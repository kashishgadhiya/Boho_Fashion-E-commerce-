//tealium universal tag - utag.495 ut4.0.202406180732, Copyright 2024 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1,"link":1};u.initialized=false;u.map={"ga_events":"event_name","customer_bpid_output":"cfg.user_id","selected_market":"cfg.market","display_language":"cfg.locale","touchpoint":"cfg.touchpoint","page_location":"cfg.page_location","page_full_path":"cfg.page_path","page_name":"cfg.page_title","page_referrer":"cfg.page_referrer","customer_isp":"cfg.traffic_type","customer_consent_output":"up.consent","dep_sid_cookie":"event.depId","customer_lcs":"up.lcs","ignore_referrer":"cfg.ignore_referrer","page_type":"cfg.content_group","page_concept":"cfg.content_group_concept"};u.extend=[function(a,b){try{if(1){if(b.page_full_path){if(b.page_full_path.indexOf("?")>=1){b.page_full_path=b.page_full_path.substring(0,b.page_full_path.indexOf("?"));}}
b.customer_isp=b.customer_isp==="h & m hennes & mauritz gbc ab"?"internal":"external";b._csku=tiq.tools.variable_is(b.product_size_code)?b.product_size_code:"";b._ccurrency=tiq.tools.variable_is(b._ccurrency)?b._ccurrency:"";b._csubtotal=tiq.tools.variable_is(b._csubtotal)?Number(b._csubtotal):0;if(a==="view"){b.ga_events.push({name:"page_view",type:"page",parameters:{},});}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){for(let c in b){if(tiq.tools.variable_is(b[c])!==false){if(c==='dom.url'||c==='dom.query_string'||c==='page_url'||c==='page_location'||c==='ga_measurement_id'||c==='product_article_id'||c==='_cprod'){continue;}
else if(c==='touchpoint'||c==='selected_market'||c==='product_currency'||c==='_ccurrency'||c==='session_platform'){try{b[c]=b[c]instanceof Array?(function(b){for(var i=0;i<b.length;i++){b[i]=(b[i].toLowerCase?b[i].toUpperCase():b[i]);}
return b;}
(b[c])):b[c]instanceof Object?b[c]:b[c].toString().toUpperCase();}catch(e){utag.DB(e);}}else{try{b[c]=b[c]instanceof Array?(function(b){for(var j=0;j<b.length;j++){b[j]=(b[j].toLowerCase?b[j].toLowerCase():b[j]);}
return b;}
(b[c])):b[c]instanceof Object?b[c]:b[c].toString().toLowerCase();}catch(e){utag.DB(e);}}}}}}catch(e){utag.DB(e)}}];u.idMapping=function(profile,env){const lookup={'goe':{'dev':'G-2QW5W9YS6M','qa':'G-GLJ2TS6KJH','prod':'G-Z1370GPB5L'},'brands-p11':{'dev':'G-LBEGK63JKB','qa':'G-HTCDL6MHX1','prod':'G-KBVJ8Z4ENB'},'brands-cos':{'dev':'G-4XH3DSY756','qa':'G-5ELK3W07E5','prod':'G-N24D02XM9L'},'brands-monki':{'dev':'G-V7TVDMFFRF','qa':'G-H9Y4FBV3VZ','prod':'G-H06492XKWZ'},'brands-stories':{'dev':'G-W8LR2Y5GS0','qa':'G-11HEG73VB0','prod':'G-V4ZHW89KFE'},'brands-weekday':{'dev':'G-8XZPXVMEXW','qa':'G-H322FV4GL5','prod':'G-HJZMJCWFP8'},'hmweb':{'dev':'G-2QW5W9YS6M','qa':'G-GLJ2TS6KJH','prod':'G-Z1370GPB5L'},'arketweb':{'dev':'G-LBEGK63JKB','qa':'G-HTCDL6MHX1','prod':'G-KBVJ8Z4ENB'},'cosweb':{'dev':'G-4XH3DSY756','qa':'G-5ELK3W07E5','prod':'G-N24D02XM9L'},'monkiweb':{'dev':'G-V7TVDMFFRF','qa':'G-H9Y4FBV3VZ','prod':'G-H06492XKWZ'},'storiesweb':{'dev':'G-W8LR2Y5GS0','qa':'G-11HEG73VB0','prod':'G-V4ZHW89KFE'},'weekdayweb':{'dev':'G-8XZPXVMEXW','qa':'G-H322FV4GL5','prod':'G-HJZMJCWFP8'},'frchs-hm-il':{'dev':'G-2QW5W9YS6M','qa':'G-GLJ2TS6KJH','prod':'G-Z1370GPB5L'}};var id=lookup[profile][env];return id;};u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var d,e,f,i;u.data={measurement_id:u.idMapping(b["ut.profile"],b["ut.env"]),transport_url:"https://www.googletagmanager.com/",events:b.ga_events,cookie_domain:b["ut.domain"]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
function popEcom(en){var c={};if(b._ccurrency!==""){c.currency=b._ccurrency;if(Number(b._csubtotal)>0){c.value=Number(b._csubtotal);}else{var d=0;for(var i=0;i<b._cprod.length;i++){d+=(tiq.tools.variable_is(b._cquan[i]))?Number(b._cprice[i])*Number(b._cquan[i]):Number(b._cprice[i]);}
c.value=d;}}
if(en==="purchase"){c.transaction_id=b._corder;c.shipping=Number(b._cship);c.affiliation='online';c.coupon=(b._cpromo)?b._cpromo:undefined;}
return c;}
function popProduct(){var c=[];for(var i=0;i<b._cprod.length;i++){var e={};e.item_id=(b._cprod[i]!=="")?b._cprod[i]:undefined;e.item_name=(b._cprodname[i]!=="")?b._cprodname[i]:undefined;e.item_brand=(b._cbrand[i]!=="")?b._cbrand[i]:undefined;e.item_variant=(b._csku[i]!=="")?b._csku[i]:undefined;e.price=(tiq.tools.variable_is(b._cprice[i]))?Number(b._cprice[i]):undefined;e.quantity=(tiq.tools.variable_is(b._cquan[i]))?Number(b._cquan[i]):undefined;e.discount=(Number(b._cpdisc[i])>0)?Number(b._cpdisc[i]):undefined;if(b._ccat[i]!==""&&b._ccat[i]!==undefined&&b._ccat[i]!==null){var d=b._ccat[i].split("_");for(var j=1;j<=d.length;j++){if(j===1){e.item_category=d[j-1];}else if(j<5){var prop="item_category"+j;e[prop]=d[j-1];}else{(j>=6)?e.item_category5+="_"+d[j-1]:e.item_category5=d[j-1];}}
c.push(e);}}
return c;}
function popUserProperties(){var c={};for(d in u.data){if(d.indexOf('up.')>-1){var e=d.split(".");c[e[1]]=u.data[d];}}
return c;}
function popConfig(){var c={send_page_view:false,cookie_domain:u.data.cookie_domain,cookie_flags:'SameSite=Lax,Secure',environment:b["ut.env"],utag_version:b["ut.version"]};for(d in u.data){if(d.indexOf('cfg.')>-1){var e=d.split(".");c[e[1]]=u.data[d];}}
return c;}
function popPayload(ep,en){var c={send_to:u.data.measurement_id,};for(d in u.data){if(d.indexOf('event.')>-1){var e=d.split(".");c[e[1]]=u.data[d];}}
c[en]=1;for(var prop in ep){c[prop]=ep[prop];}
return c;}
function setUserProperties(){up=popUserProperties();var hasUserProperty=false;for(var i in up){hasUserProperty=true;}
if(hasUserProperty===true){window.gtag('set','user_properties',up);}}
function setConfig(){var cfg=popConfig();u.tc(cfg);}
u.te=function(en,ep){window.gtag('event',en,ep);};u.tc=function(ep){window.gtag('config',u.data.measurement_id,ep);};u.tx=function(ep){ep.send_to=u.data.measurement_id;window.gtag('event','exception',ep);};try{if(u.data.events&&u.data.events.length===0){return;}else{setUserProperties();setConfig();for(var i=0;i<u.data.events.length;i++){var et=u.data.events[i].type;var en=u.data.events[i].name;var payload={};if(et==="page"||et==="click"){payload=popPayload(u.data.events[i].parameters,en);}else if(et==="exception"){payload=u.data.events[i].parameters;payload.fatal=false;}else if(et==="ecommerce"){try{payload=popPayload(u.data.events[i].parameters,en);var ca=popEcom(u.data.events[i].name);utag.ut.merge(payload,ca,0);payload.items=popProduct();if(u.data.events[i].name==="purchase"){var cb=popConfig();cb.ignore_referrer='true';cb.first_party_collection='true';u.tc(cb);}}catch(e){u.tx({description:'Tag - '+b["ut.version"]+' - ecom: '+e.message,fatal:false});}}
if(en!==null){u.te(en,payload);}}}}catch(e){u.tx({description:'Tag - '+b["ut.version"]+' - event_type loop: '+e.message,fatal:false});}
if(!u.initialized){gtag('js',new Date());u.loader({"type":"script","src":u.data.transport_url+"gtag/js?id="+u.data.measurement_id+"&l=dataLayer","loc":"script","id":'custom_gtag_495',attrs:{"async":"true"}});}
}};utag.o[loader].loader.LOAD(id);})("495","hm.goe");}catch(error){utag.DB(error);}
