/*! @license DOMPurify 2.4.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.0/LICENSE */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).DOMPurify=t()}(this,(function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,n){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function r(e,o,a){return r=n()?Reflect.construct:function(e,n,r){var o=[null];o.push.apply(o,n);var a=new(Function.bind.apply(e,o));return r&&t(a,r.prototype),a},r.apply(null,arguments)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=Object.hasOwnProperty,l=Object.setPrototypeOf,c=Object.isFrozen,u=Object.getPrototypeOf,s=Object.getOwnPropertyDescriptor,m=Object.freeze,f=Object.seal,p=Object.create,d="undefined"!=typeof Reflect&&Reflect,h=d.apply,g=d.construct;h||(h=function(e,t,n){return e.apply(t,n)}),m||(m=function(e){return e}),f||(f=function(e){return e}),g||(g=function(e,t){return r(e,o(t))});var y,b=_(Array.prototype.forEach),v=_(Array.prototype.pop),T=_(Array.prototype.push),N=_(String.prototype.toLowerCase),A=_(String.prototype.match),E=_(String.prototype.replace),w=_(String.prototype.indexOf),x=_(String.prototype.trim),S=_(RegExp.prototype.test),k=(y=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g(y,t)});function _(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return h(e,t,r)}}function O(e,t,n){n=n||N,l&&l(e,null);for(var r=t.length;r--;){var o=t[r];if("string"==typeof o){var a=n(o);a!==o&&(c(t)||(t[r]=a),o=a)}e[o]=!0}return e}function D(e){var t,n=p(null);for(t in e)h(i,e,[t])&&(n[t]=e[t]);return n}function R(e,t){for(;null!==e;){var n=s(e,t);if(n){if(n.get)return _(n.get);if("function"==typeof n.value)return _(n.value)}e=u(e)}return function(e){return console.warn("fallback value for",e),null}}var M=m(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=m(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C=m(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=m(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),F=m(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),H=m(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),U=m(["#text"]),z=m(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),j=m(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=m(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),P=m(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),G=f(/\{\{[\w\W]*|[\w\W]*\}\}/gm),W=f(/<%[\w\W]*|[\w\W]*%>/gm),q=f(/^data-[\-\w.\u00B7-\uFFFF]/),Y=f(/^aria-[\-\w]+$/),K=f(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),V=f(/^(?:\w+script|data):/i),$=f(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),X=f(/^html$/i),Z=function(){return"undefined"==typeof window?null:window},J=function(t,n){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var r=null,o="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(o)&&(r=n.currentScript.getAttribute(o));var a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+a+" could not be created."),null}};var Q=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z(),r=function(e){return t(e)};if(r.version="2.4.0",r.removed=[],!n||!n.document||9!==n.document.nodeType)return r.isSupported=!1,r;var a=n.document,i=n.document,l=n.DocumentFragment,c=n.HTMLTemplateElement,u=n.Node,s=n.Element,f=n.NodeFilter,p=n.NamedNodeMap,d=void 0===p?n.NamedNodeMap||n.MozNamedAttrMap:p,h=n.HTMLFormElement,g=n.DOMParser,y=n.trustedTypes,_=s.prototype,Q=R(_,"cloneNode"),ee=R(_,"nextSibling"),te=R(_,"childNodes"),ne=R(_,"parentNode");if("function"==typeof c){var re=i.createElement("template");re.content&&re.content.ownerDocument&&(i=re.content.ownerDocument)}var oe=J(y,a),ae=oe?oe.createHTML(""):"",ie=i,le=ie.implementation,ce=ie.createNodeIterator,ue=ie.createDocumentFragment,se=ie.getElementsByTagName,me=a.importNode,fe={};try{fe=D(i).documentMode?i.documentMode:{}}catch(e){}var pe={};r.isSupported="function"==typeof ne&&le&&void 0!==le.createHTMLDocument&&9!==fe;var de,he,ge=G,ye=W,be=q,ve=Y,Te=V,Ne=$,Ae=K,Ee=null,we=O({},[].concat(o(M),o(L),o(C),o(F),o(U))),xe=null,Se=O({},[].concat(o(z),o(j),o(B),o(P))),ke=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),_e=null,Oe=null,De=!0,Re=!0,Me=!1,Le=!1,Ce=!1,Ie=!1,Fe=!1,He=!1,Ue=!1,ze=!1,je=!0,Be=!1,Pe="user-content-",Ge=!0,We=!1,qe={},Ye=null,Ke=O({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ve=null,$e=O({},["audio","video","img","source","image","track"]),Xe=null,Ze=O({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Qe="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml",tt=et,nt=!1,rt=["application/xhtml+xml","text/html"],ot="text/html",at=null,it=i.createElement("form"),lt=function(e){return e instanceof RegExp||e instanceof Function},ct=function(t){at&&at===t||(t&&"object"===e(t)||(t={}),t=D(t),de=de=-1===rt.indexOf(t.PARSER_MEDIA_TYPE)?ot:t.PARSER_MEDIA_TYPE,he="application/xhtml+xml"===de?function(e){return e}:N,Ee="ALLOWED_TAGS"in t?O({},t.ALLOWED_TAGS,he):we,xe="ALLOWED_ATTR"in t?O({},t.ALLOWED_ATTR,he):Se,Xe="ADD_URI_SAFE_ATTR"in t?O(D(Ze),t.ADD_URI_SAFE_ATTR,he):Ze,Ve="ADD_DATA_URI_TAGS"in t?O(D($e),t.ADD_DATA_URI_TAGS,he):$e,Ye="FORBID_CONTENTS"in t?O({},t.FORBID_CONTENTS,he):Ke,_e="FORBID_TAGS"in t?O({},t.FORBID_TAGS,he):{},Oe="FORBID_ATTR"in t?O({},t.FORBID_ATTR,he):{},qe="USE_PROFILES"in t&&t.USE_PROFILES,De=!1!==t.ALLOW_ARIA_ATTR,Re=!1!==t.ALLOW_DATA_ATTR,Me=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Le=t.SAFE_FOR_TEMPLATES||!1,Ce=t.WHOLE_DOCUMENT||!1,He=t.RETURN_DOM||!1,Ue=t.RETURN_DOM_FRAGMENT||!1,ze=t.RETURN_TRUSTED_TYPE||!1,Fe=t.FORCE_BODY||!1,je=!1!==t.SANITIZE_DOM,Be=t.SANITIZE_NAMED_PROPS||!1,Ge=!1!==t.KEEP_CONTENT,We=t.IN_PLACE||!1,Ae=t.ALLOWED_URI_REGEXP||Ae,tt=t.NAMESPACE||et,t.CUSTOM_ELEMENT_HANDLING&&lt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&lt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Le&&(Re=!1),Ue&&(He=!0),qe&&(Ee=O({},o(U)),xe=[],!0===qe.html&&(O(Ee,M),O(xe,z)),!0===qe.svg&&(O(Ee,L),O(xe,j),O(xe,P)),!0===qe.svgFilters&&(O(Ee,C),O(xe,j),O(xe,P)),!0===qe.mathMl&&(O(Ee,F),O(xe,B),O(xe,P))),t.ADD_TAGS&&(Ee===we&&(Ee=D(Ee)),O(Ee,t.ADD_TAGS,he)),t.ADD_ATTR&&(xe===Se&&(xe=D(xe)),O(xe,t.ADD_ATTR,he)),t.ADD_URI_SAFE_ATTR&&O(Xe,t.ADD_URI_SAFE_ATTR,he),t.FORBID_CONTENTS&&(Ye===Ke&&(Ye=D(Ye)),O(Ye,t.FORBID_CONTENTS,he)),Ge&&(Ee["#text"]=!0),Ce&&O(Ee,["html","head","body"]),Ee.table&&(O(Ee,["tbody"]),delete _e.tbody),m&&m(t),at=t)},ut=O({},["mi","mo","mn","ms","mtext"]),st=O({},["foreignobject","desc","title","annotation-xml"]),mt=O({},["title","style","font","a","script"]),ft=O({},L);O(ft,C),O(ft,I);var pt=O({},F);O(pt,H);var dt=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:et,tagName:"template"});var n=N(e.tagName),r=N(t.tagName);return e.namespaceURI===Qe?t.namespaceURI===et?"svg"===n:t.namespaceURI===Je?"svg"===n&&("annotation-xml"===r||ut[r]):Boolean(ft[n]):e.namespaceURI===Je?t.namespaceURI===et?"math"===n:t.namespaceURI===Qe?"math"===n&&st[r]:Boolean(pt[n]):e.namespaceURI===et&&(!(t.namespaceURI===Qe&&!st[r])&&(!(t.namespaceURI===Je&&!ut[r])&&(!pt[n]&&(mt[n]||!ft[n]))))},ht=function(e){T(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ae}catch(t){e.remove()}}},gt=function(e,t){try{T(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){T(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!xe[e])if(He||Ue)try{ht(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},yt=function(e){var t,n;if(Fe)e="<remove></remove>"+e;else{var r=A(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===de&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=oe?oe.createHTML(e):e;if(tt===et)try{t=(new g).parseFromString(o,de)}catch(e){}if(!t||!t.documentElement){t=le.createDocument(tt,"template",null);try{t.documentElement.innerHTML=nt?"":o}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(i.createTextNode(n),a.childNodes[0]||null),tt===et?se.call(t,Ce?"html":"body")[0]:Ce?t.documentElement:a},bt=function(e){return ce.call(e.ownerDocument||e,e,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null,!1)},vt=function(e){return e instanceof h&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},Tt=function(t){return"object"===e(u)?t instanceof u:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Nt=function(e,t,n){pe[e]&&b(pe[e],(function(e){e.call(r,t,n,at)}))},At=function(e){var t;if(Nt("beforeSanitizeElements",e,null),vt(e))return ht(e),!0;if(S(/[\u0080-\uFFFF]/,e.nodeName))return ht(e),!0;var n=he(e.nodeName);if(Nt("uponSanitizeElement",e,{tagName:n,allowedTags:Ee}),e.hasChildNodes()&&!Tt(e.firstElementChild)&&(!Tt(e.content)||!Tt(e.content.firstElementChild))&&S(/<[/\w]/g,e.innerHTML)&&S(/<[/\w]/g,e.textContent))return ht(e),!0;if("select"===n&&S(/<template/i,e.innerHTML))return ht(e),!0;if(!Ee[n]||_e[n]){if(!_e[n]&&wt(n)){if(ke.tagNameCheck instanceof RegExp&&S(ke.tagNameCheck,n))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))return!1}if(Ge&&!Ye[n]){var o=ne(e)||e.parentNode,a=te(e)||e.childNodes;if(a&&o)for(var i=a.length-1;i>=0;--i)o.insertBefore(Q(a[i],!0),ee(e))}return ht(e),!0}return e instanceof s&&!dt(e)?(ht(e),!0):"noscript"!==n&&"noembed"!==n||!S(/<\/no(script|embed)/i,e.innerHTML)?(Le&&3===e.nodeType&&(t=e.textContent,t=E(t,ge," "),t=E(t,ye," "),e.textContent!==t&&(T(r.removed,{element:e.cloneNode()}),e.textContent=t)),Nt("afterSanitizeElements",e,null),!1):(ht(e),!0)},Et=function(e,t,n){if(je&&("id"===t||"name"===t)&&(n in i||n in it))return!1;if(Re&&!Oe[t]&&S(be,t));else if(De&&S(ve,t));else if(!xe[t]||Oe[t]){if(!(wt(e)&&(ke.tagNameCheck instanceof RegExp&&S(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&S(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&S(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(Xe[t]);else if(S(Ae,E(n,Ne,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==w(n,"data:")||!Ve[e]){if(Me&&!S(Te,E(n,Ne,"")));else if(n)return!1}else;return!0},wt=function(e){return e.indexOf("-")>0},xt=function(t){var n,o,a,i;Nt("beforeSanitizeAttributes",t,null);var l=t.attributes;if(l){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe};for(i=l.length;i--;){var u=n=l[i],s=u.name,m=u.namespaceURI;if(o="value"===s?n.value:x(n.value),a=he(s),c.attrName=a,c.attrValue=o,c.keepAttr=!0,c.forceKeepAttr=void 0,Nt("uponSanitizeAttribute",t,c),o=c.attrValue,!c.forceKeepAttr&&(gt(s,t),c.keepAttr))if(S(/\/>/i,o))gt(s,t);else{Le&&(o=E(o,ge," "),o=E(o,ye," "));var f=he(t.nodeName);if(Et(f,a,o)){if(!Be||"id"!==a&&"name"!==a||(gt(s,t),o=Pe+o),oe&&"object"===e(y)&&"function"==typeof y.getAttributeType)if(m);else switch(y.getAttributeType(f,a)){case"TrustedHTML":o=oe.createHTML(o);break;case"TrustedScriptURL":o=oe.createScriptURL(o)}try{m?t.setAttributeNS(m,s,o):t.setAttribute(s,o),v(r.removed)}catch(e){}}}}Nt("afterSanitizeAttributes",t,null)}},St=function e(t){var n,r=bt(t);for(Nt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Nt("uponSanitizeShadowNode",n,null),At(n)||(n.content instanceof l&&e(n.content),xt(n));Nt("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(t){var o,i,c,s,m,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((nt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Tt(t)){if("function"!=typeof t.toString)throw k("toString is not a function");if("string"!=typeof(t=t.toString()))throw k("dirty is not a string, aborting")}if(!r.isSupported){if("object"===e(n.toStaticHTML)||"function"==typeof n.toStaticHTML){if("string"==typeof t)return n.toStaticHTML(t);if(Tt(t))return n.toStaticHTML(t.outerHTML)}return t}if(Ie||ct(f),r.removed=[],"string"==typeof t&&(We=!1),We){if(t.nodeName){var p=he(t.nodeName);if(!Ee[p]||_e[p])throw k("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof u)1===(i=(o=yt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?o=i:o.appendChild(i);else{if(!He&&!Le&&!Ce&&-1===t.indexOf("<"))return oe&&ze?oe.createHTML(t):t;if(!(o=yt(t)))return He?null:ze?ae:""}o&&Fe&&ht(o.firstChild);for(var d=bt(We?t:o);c=d.nextNode();)3===c.nodeType&&c===s||At(c)||(c.content instanceof l&&St(c.content),xt(c),s=c);if(s=null,We)return t;if(He){if(Ue)for(m=ue.call(o.ownerDocument);o.firstChild;)m.appendChild(o.firstChild);else m=o;return xe.shadowroot&&(m=me.call(a,m,!0)),m}var h=Ce?o.outerHTML:o.innerHTML;return Ce&&Ee["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&S(X,o.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+h),Le&&(h=E(h,ge," "),h=E(h,ye," ")),oe&&ze?oe.createHTML(h):h},r.setConfig=function(e){ct(e),Ie=!0},r.clearConfig=function(){at=null,Ie=!1},r.isValidAttribute=function(e,t,n){at||ct({});var r=he(e),o=he(t);return Et(r,o,n)},r.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],T(pe[e],t))},r.removeHook=function(e){if(pe[e])return v(pe[e])},r.removeHooks=function(e){pe[e]&&(pe[e]=[])},r.removeAllHooks=function(){pe={}},r}();return Q}));
//# sourceMappingURL=purify.min.js.map

/*! modernizr 3.3.1 (Custom Build) | MIT *
 * https://modernizr.com/download/?-backgroundsize-borderradius-csstransforms-csstransitions-flexbox-flexboxlegacy-history-input-inputtypes-lastchild-nthchild-oninput-rgba-touchevents-domprefixes-mq-prefixed-prefixes-setclasses-shiv-testallprops-testprop-teststyles !*/

!function(e,t,n){function r(e,t){return typeof e===t}function i(){var e,t,n,i,o,a,s;for(var l in b)if(b.hasOwnProperty(l)){if(e=[],t=b[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=r(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)a=e[o],s=a.split("."),1===s.length?Modernizr[s[0]]=i:(!Modernizr[s[0]]||Modernizr[s[0]]instanceof Boolean||(Modernizr[s[0]]=new Boolean(Modernizr[s[0]])),Modernizr[s[0]][s[1]]=i),y.push((i?"":"no-")+s.join("-"))}}function o(e){var t=E.className,n=Modernizr._config.classPrefix||"";if(S&&(t=t.baseVal),Modernizr._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}Modernizr._config.enableClasses&&(t+=" "+n+e.join(" "+n),S?E.className.baseVal=t:E.className=t)}function a(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):S?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function l(){var e=t.body;return e||(e=s(S?"svg":"body"),e.fake=!0),e}function u(e,n,r,i){var o,a,u,d,c="modernizr",f=s("div"),p=l();if(parseInt(r,10))for(;r--;)u=s("div"),u.id=i?i[r]:c+(r+1),f.appendChild(u);return o=s("style"),o.type="text/css",o.id="s"+c,(p.fake?p:f).appendChild(o),p.appendChild(f),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),f.id=c,p.fake&&(p.style.background="",p.style.overflow="hidden",d=E.style.overflow,E.style.overflow="hidden",E.appendChild(p)),a=n(f,e),p.fake?(p.parentNode.removeChild(p),E.style.overflow=d,E.offsetHeight):f.parentNode.removeChild(f),!!a}function d(e,t){return!!~(""+e).indexOf(t)}function c(e,t){return function(){return e.apply(t,arguments)}}function f(e,t,n){var i;for(var o in e)if(e[o]in t)return n===!1?e[o]:(i=t[e[o]],r(i,"function")?c(i,n||t):i);return!1}function p(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function m(t,r){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(p(t[i]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];i--;)o.push("("+p(t[i])+":"+r+")");return o=o.join(" or "),u("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function h(e,t,i,o){function l(){c&&(delete F.style,delete F.modElem)}if(o=r(o,"undefined")?!1:o,!r(i,"undefined")){var u=m(e,i);if(!r(u,"undefined"))return u}for(var c,f,p,h,v,g=["modernizr","tspan","samp"];!F.style&&g.length;)c=!0,F.modElem=s(g.shift()),F.style=F.modElem.style;for(p=e.length,f=0;p>f;f++)if(h=e[f],v=F.style[h],d(h,"-")&&(h=a(h)),F.style[h]!==n){if(o||r(i,"undefined"))return l(),"pfx"==t?h:!0;try{F.style[h]=i}catch(y){}if(F.style[h]!=v)return l(),"pfx"==t?h:!0}return l(),!1}function v(e,t,n,i,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+M.join(a+" ")+a).split(" ");return r(t,"string")||r(t,"undefined")?h(s,t,i,o):(s=(e+" "+T.join(a+" ")+a).split(" "),f(s,t,n))}function g(e,t,r){return v(e,n,n,t,r)}var y=[],b=[],x={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){b.push({name:e,fn:t,options:n})},addAsyncTest:function(e){b.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=x,Modernizr=new Modernizr,Modernizr.addTest("history",function(){var t=navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")?e.history&&"pushState"in e.history:!1});var C=x._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];x._prefixes=C;var E=t.documentElement,S="svg"===E.nodeName.toLowerCase();S||!function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=b.elements;return"string"==typeof e?e.split(" "):e}function i(e,t){var n=b.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),b.elements=n+" "+e,u(t)}function o(e){var t=y[e[v]];return t||(t={},g++,e[v]=g,y[g]=t),t}function a(e,n,r){if(n||(n=t),c)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():h.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||m.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function s(e,n){if(e||(e=t),c)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)i.createElement(s[a]);return i}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return b.shivMethods?a(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(b,t.frag)}function u(e){e||(e=t);var r=o(e);return!b.shivCSS||d||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||l(e,r),e}var d,c,f="3.7.3",p=e.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,v="_html5shiv",g=0,y={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){d=!0,c=!0}}();var b={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:f,shivCSS:p.shivCSS!==!1,supportsUnknownElements:c,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:u,createElement:a,createDocumentFragment:s,addElements:i};e.html5=b,u(t),"object"==typeof module&&module.exports&&(module.exports=b)}("undefined"!=typeof e?e:this,t);var w="Moz O ms Webkit",T=x._config.usePrefixes?w.toLowerCase().split(" "):[];x._domPrefixes=T,Modernizr.addTest("rgba",function(){var e=s("a").style;return e.cssText="background-color:rgba(150,255,150,.5)",(""+e.backgroundColor).indexOf("rgba")>-1});var _=s("input"),k="autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),z={};Modernizr.input=function(t){for(var n=0,r=t.length;r>n;n++)z[t[n]]=!!(t[n]in _);return z.list&&(z.list=!(!s("datalist")||!e.HTMLDataListElement)),z}(k);var A="search tel url email datetime date month week time datetime-local number range color".split(" "),N={};Modernizr.inputtypes=function(e){for(var r,i,o,a=e.length,s="1)",l=0;a>l;l++)_.setAttribute("type",r=e[l]),o="text"!==_.type&&"style"in _,o&&(_.value=s,_.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&_.style.WebkitAppearance!==n?(E.appendChild(_),i=t.defaultView,o=i.getComputedStyle&&"textfield"!==i.getComputedStyle(_,null).WebkitAppearance&&0!==_.offsetHeight,E.removeChild(_)):/^(search|tel)$/.test(r)||(o=/^(url|email)$/.test(r)?_.checkValidity&&_.checkValidity()===!1:_.value!=s)),N[e[l]]=!!o;return N}(A);var j=function(){function e(e,t){var i;return e?(t&&"string"!=typeof t||(t=s(t||"div")),e="on"+e,i=e in t,!i&&r&&(t.setAttribute||(t=s("div")),t.setAttribute(e,""),i="function"==typeof t[e],t[e]!==n&&(t[e]=n),t.removeAttribute(e)),i):!1}var r=!("onblur"in t.documentElement);return e}();x.hasEvent=j;var P=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return u("@media "+t+" { #modernizr { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),n}}();x.mq=P;var L=x.testStyles=u;Modernizr.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var r=["@media (",C.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");L(r,function(e){n=9===e.offsetTop})}return n}),L("#modernizr div {width:100px} #modernizr :last-child{width:200px;display:block}",function(e){Modernizr.addTest("lastchild",e.lastChild.offsetWidth>e.firstChild.offsetWidth)},2),L("#modernizr div {width:1px} #modernizr div:nth-child(2n) {width:2px;}",function(e){for(var t=e.getElementsByTagName("div"),n=!0,r=0;5>r;r++)n=n&&t[r].offsetWidth===r%2+1;Modernizr.addTest("nthchild",n)},5),Modernizr.addTest("oninput",function(){var n,r=s("input");if(r.setAttribute("oninput","return"),j("oninput",E)||"function"==typeof r.oninput)return!0;try{var i=t.createEvent("KeyboardEvent");n=!1;var o=function(e){n=!0,e.preventDefault(),e.stopPropagation()};i.initKeyEvent("keypress",!0,!0,e,!1,!1,!1,!1,0,"e".charCodeAt(0)),E.appendChild(r),r.addEventListener("input",o,!1),r.focus(),r.dispatchEvent(i),r.removeEventListener("input",o,!1),E.removeChild(r)}catch(a){n=!1}return n});var M=x._config.usePrefixes?w.split(" "):[];x._cssomPrefixes=M;var O=function(t){var r,i=C.length,o=e.CSSRule;if("undefined"==typeof o)return n;if(!t)return!1;if(t=t.replace(/^@/,""),r=t.replace(/-/g,"_").toUpperCase()+"_RULE",r in o)return"@"+t;for(var a=0;i>a;a++){var s=C[a],l=s.toUpperCase()+"_"+r;if(l in o)return"@-"+s.toLowerCase()+"-"+t}return!1};x.atRule=O;var D={elem:s("modernizr")};Modernizr._q.push(function(){delete D.elem});var F={style:D.elem.style};Modernizr._q.unshift(function(){delete F.style});x.testProp=function(e,t,r){return h([e],n,t,r)};x.testAllProps=v;x.prefixed=function(e,t,n){return 0===e.indexOf("@")?O(e):(-1!=e.indexOf("-")&&(e=a(e)),t?v(e,t,n):v(e,"pfx"))};x.testAllProps=g,Modernizr.addTest("backgroundsize",g("backgroundSize","100%",!0)),Modernizr.addTest("borderradius",g("borderRadius","0px",!0)),Modernizr.addTest("flexbox",g("flexBasis","1px",!0)),Modernizr.addTest("flexboxlegacy",g("boxDirection","reverse",!0)),Modernizr.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&g("transform","scale(1)",!0)}),Modernizr.addTest("csstransitions",g("transition","all",!0)),i(),o(y),delete x.addTest,delete x.addAsyncTest;for(var q=0;q<Modernizr._q.length;q++)Modernizr._q[q]();e.Modernizr=Modernizr}(window,document);

/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "../";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 248);
/******/ })
/************************************************************************/
/******/ ({

/***/ 248:
/***/ (function(module, exports) {

window.hm = window.hm || {};
window.hm.options = 'options' in window.hm ? window.hm.options : {};

/***/ })

/******/ });
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "../";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 250);
/******/ })
/************************************************************************/
/******/ ({

/***/ 250:
/***/ (function(module, exports) {

;

(function (hm) {
  hm.waitUntil = function (isReady, times, interval) {
    var _interval = interval || 200;

    var _times = times || 20;

    var dfd = $.Deferred();
    var counter = 0;
    var intervalId = setInterval(function () {
      if (counter < _times) {
        if (isReady()) {
          clearInterval(intervalId);
          dfd.resolve();
        } else {
          counter += 1;
        }
      } else {
        clearInterval(intervalId);
        dfd.reject();
      }
    }, _interval);
    return dfd;
  };
})(window.hm);

/***/ })

/******/ });
;(function(hm) {
  function initElements(parent, selectors) {
    var $elements = {},
      $parent = $(parent),
      children = $.extend({}, selectors),
      key

    if (!selectors) {
      children = parent // Flatten prefix if no parent is set

      if ('prefix' in children) {
        children = $.extend(children, children.prefix)
        delete children.prefix
      }

      for (key in children) {
        $elements[key] = $(children[key])
      }
    } else {
      if ('prefix' in selectors) {
        delete children.prefix // Init non-prefixed selectors

        $elements = initElements(children)
        children = selectors.prefix
      }

      for (key in children) {
        $elements[key] = $parent.find(children[key])
      }
    }

    return $elements
  }

  hm.initElements = initElements
})(window.hm);

/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "https://s1-cdn.hm.com/global/frontend/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 451);
/******/ })
/************************************************************************/
/******/ ({

/***/ 0:
/***/ (function(module, exports, __webpack_require__) {

  "use strict";

  var $ = __webpack_require__(9);
  var $find = __webpack_require__(81).find;
  var addToUnscopables = __webpack_require__(125);
  
  var FIND = 'find';
  var SKIPS_HOLES = true;
  
  // Shouldn't skip holes
  if (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });
  
  // `Array.prototype.find` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.find
  $({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {
    find: function find(callbackfn /* , that = undefined */) {
      return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    }
  });
  
  // https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables
  addToUnscopables(FIND);
  
  
  /***/ }),
  
  /***/ 10:
  /***/ (function(module, exports) {
  
  module.exports = function (exec) {
    try {
      return !!exec();
    } catch (error) {
      return true;
    }
  };
  
  
  /***/ }),
  
  /***/ 102:
  /***/ (function(module, exports, __webpack_require__) {
  
  var NATIVE_WEAK_MAP = __webpack_require__(169);
  var global = __webpack_require__(5);
  var isObject = __webpack_require__(21);
  var createNonEnumerableProperty = __webpack_require__(27);
  var objectHas = __webpack_require__(22);
  var sharedKey = __webpack_require__(92);
  var hiddenKeys = __webpack_require__(79);
  
  var WeakMap = global.WeakMap;
  var set, get, has;
  
  var enforce = function (it) {
    return has(it) ? get(it) : set(it, {});
  };
  
  var getterFor = function (TYPE) {
    return function (it) {
      var state;
      if (!isObject(it) || (state = get(it)).type !== TYPE) {
        throw TypeError('Incompatible receiver, ' + TYPE + ' required');
      } return state;
    };
  };
  
  if (NATIVE_WEAK_MAP) {
    var store = new WeakMap();
    var wmget = store.get;
    var wmhas = store.has;
    var wmset = store.set;
    set = function (it, metadata) {
      wmset.call(store, it, metadata);
      return metadata;
    };
    get = function (it) {
      return wmget.call(store, it) || {};
    };
    has = function (it) {
      return wmhas.call(store, it);
    };
  } else {
    var STATE = sharedKey('state');
    hiddenKeys[STATE] = true;
    set = function (it, metadata) {
      createNonEnumerableProperty(it, STATE, metadata);
      return metadata;
    };
    get = function (it) {
      return objectHas(it, STATE) ? it[STATE] : {};
    };
    has = function (it) {
      return objectHas(it, STATE);
    };
  }
  
  module.exports = {
    set: set,
    get: get,
    has: has,
    enforce: enforce,
    getterFor: getterFor
  };
  
  
  /***/ }),
  
  /***/ 103:
  /***/ (function(module, exports, __webpack_require__) {
  
  var IS_PURE = __webpack_require__(78);
  var store = __webpack_require__(109);
  
  (module.exports = function (key, value) {
    return store[key] || (store[key] = value !== undefined ? value : {});
  })('versions', []).push({
    version: '3.5.0',
    mode: IS_PURE ? 'pure' : 'global',
    copyright: '© 2019 Denis Pushkarev (zloirock.ru)'
  });
  
  
  /***/ }),
  
  /***/ 104:
  /***/ (function(module, exports) {
  
  var id = 0;
  var postfix = Math.random();
  
  module.exports = function (key) {
    return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);
  };
  
  
  /***/ }),
  
  /***/ 105:
  /***/ (function(module, exports, __webpack_require__) {
  
  var toIndexedObject = __webpack_require__(46);
  var toLength = __webpack_require__(29);
  var toAbsoluteIndex = __webpack_require__(94);
  
  // `Array.prototype.{ indexOf, includes }` methods implementation
  var createMethod = function (IS_INCLUDES) {
    return function ($this, el, fromIndex) {
      var O = toIndexedObject($this);
      var length = toLength(O.length);
      var index = toAbsoluteIndex(fromIndex, length);
      var value;
      // Array#includes uses SameValueZero equality algorithm
      // eslint-disable-next-line no-self-compare
      if (IS_INCLUDES && el != el) while (length > index) {
        value = O[index++];
        // eslint-disable-next-line no-self-compare
        if (value != value) return true;
      // Array#indexOf ignores holes, Array#includes - not
      } else for (;length > index; index++) {
        if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
      } return !IS_INCLUDES && -1;
    };
  };
  
  module.exports = {
    // `Array.prototype.includes` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.includes
    includes: createMethod(true),
    // `Array.prototype.indexOf` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.indexof
    indexOf: createMethod(false)
  };
  
  
  /***/ }),
  
  /***/ 106:
  /***/ (function(module, exports, __webpack_require__) {
  
  var fails = __webpack_require__(10);
  
  var replacement = /#|\.prototype\./;
  
  var isForced = function (feature, detection) {
    var value = data[normalize(feature)];
    return value == POLYFILL ? true
      : value == NATIVE ? false
      : typeof detection == 'function' ? fails(detection)
      : !!detection;
  };
  
  var normalize = isForced.normalize = function (string) {
    return String(string).replace(replacement, '.').toLowerCase();
  };
  
  var data = isForced.data = {};
  var NATIVE = isForced.NATIVE = 'N';
  var POLYFILL = isForced.POLYFILL = 'P';
  
  module.exports = isForced;
  
  
  /***/ }),
  
  /***/ 107:
  /***/ (function(module, exports, __webpack_require__) {
  
  var global = __webpack_require__(5);
  var isObject = __webpack_require__(21);
  
  var document = global.document;
  // typeof document.createElement is 'object' in old IE
  var EXISTS = isObject(document) && isObject(document.createElement);
  
  module.exports = function (it) {
    return EXISTS ? document.createElement(it) : {};
  };
  
  
  /***/ }),
  
  /***/ 108:
  /***/ (function(module, exports, __webpack_require__) {
  
  var DESCRIPTORS = __webpack_require__(28);
  var fails = __webpack_require__(10);
  var createElement = __webpack_require__(107);
  
  // Thank's IE8 for his funny defineProperty
  module.exports = !DESCRIPTORS && !fails(function () {
    return Object.defineProperty(createElement('div'), 'a', {
      get: function () { return 7; }
    }).a != 7;
  });
  
  
  /***/ }),
  
  /***/ 109:
  /***/ (function(module, exports, __webpack_require__) {
  
  var global = __webpack_require__(5);
  var setGlobal = __webpack_require__(80);
  
  var SHARED = '__core-js_shared__';
  var store = global[SHARED] || setGlobal(SHARED, {});
  
  module.exports = store;
  
  
  /***/ }),
  
  /***/ 110:
  /***/ (function(module, exports, __webpack_require__) {
  
  var fails = __webpack_require__(10);
  
  module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
    // Chrome 38 Symbol has incorrect toString conversion
    // eslint-disable-next-line no-undef
    return !String(Symbol());
  });
  
  
  /***/ }),
  
  /***/ 12:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var fixRegExpWellKnownSymbolLogic = __webpack_require__(129);
  var isRegExp = __webpack_require__(173);
  var anObject = __webpack_require__(20);
  var requireObjectCoercible = __webpack_require__(35);
  var speciesConstructor = __webpack_require__(207);
  var advanceStringIndex = __webpack_require__(155);
  var toLength = __webpack_require__(29);
  var callRegExpExec = __webpack_require__(130);
  var regexpExec = __webpack_require__(122);
  var fails = __webpack_require__(10);
  
  var arrayPush = [].push;
  var min = Math.min;
  var MAX_UINT32 = 0xFFFFFFFF;
  
  // babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError
  var SUPPORTS_Y = !fails(function () { return !RegExp(MAX_UINT32, 'y'); });
  
  // @@split logic
  fixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {
    var internalSplit;
    if (
      'abbc'.split(/(b)*/)[1] == 'c' ||
      'test'.split(/(?:)/, -1).length != 4 ||
      'ab'.split(/(?:ab)*/).length != 2 ||
      '.'.split(/(.?)(.?)/).length != 4 ||
      '.'.split(/()()/).length > 1 ||
      ''.split(/.?/).length
    ) {
      // based on es5-shim implementation, need to rework it
      internalSplit = function (separator, limit) {
        var string = String(requireObjectCoercible(this));
        var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
        if (lim === 0) return [];
        if (separator === undefined) return [string];
        // If `separator` is not a regex, use native split
        if (!isRegExp(separator)) {
          return nativeSplit.call(string, separator, lim);
        }
        var output = [];
        var flags = (separator.ignoreCase ? 'i' : '') +
                    (separator.multiline ? 'm' : '') +
                    (separator.unicode ? 'u' : '') +
                    (separator.sticky ? 'y' : '');
        var lastLastIndex = 0;
        // Make `global` and avoid `lastIndex` issues by working with a copy
        var separatorCopy = new RegExp(separator.source, flags + 'g');
        var match, lastIndex, lastLength;
        while (match = regexpExec.call(separatorCopy, string)) {
          lastIndex = separatorCopy.lastIndex;
          if (lastIndex > lastLastIndex) {
            output.push(string.slice(lastLastIndex, match.index));
            if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));
            lastLength = match[0].length;
            lastLastIndex = lastIndex;
            if (output.length >= lim) break;
          }
          if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop
        }
        if (lastLastIndex === string.length) {
          if (lastLength || !separatorCopy.test('')) output.push('');
        } else output.push(string.slice(lastLastIndex));
        return output.length > lim ? output.slice(0, lim) : output;
      };
    // Chakra, V8
    } else if ('0'.split(undefined, 0).length) {
      internalSplit = function (separator, limit) {
        return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);
      };
    } else internalSplit = nativeSplit;
  
    return [
      // `String.prototype.split` method
      // https://tc39.github.io/ecma262/#sec-string.prototype.split
      function split(separator, limit) {
        var O = requireObjectCoercible(this);
        var splitter = separator == undefined ? undefined : separator[SPLIT];
        return splitter !== undefined
          ? splitter.call(separator, O, limit)
          : internalSplit.call(String(O), separator, limit);
      },
      // `RegExp.prototype[@@split]` method
      // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@split
      //
      // NOTE: This cannot be properly polyfilled in engines that don't support
      // the 'y' flag.
      function (regexp, limit) {
        var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);
        if (res.done) return res.value;
  
        var rx = anObject(regexp);
        var S = String(this);
        var C = speciesConstructor(rx, RegExp);
  
        var unicodeMatching = rx.unicode;
        var flags = (rx.ignoreCase ? 'i' : '') +
                    (rx.multiline ? 'm' : '') +
                    (rx.unicode ? 'u' : '') +
                    (SUPPORTS_Y ? 'y' : 'g');
  
        // ^(? + rx + ) is needed, in combination with some S slicing, to
        // simulate the 'y' flag.
        var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);
        var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;
        if (lim === 0) return [];
        if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];
        var p = 0;
        var q = 0;
        var A = [];
        while (q < S.length) {
          splitter.lastIndex = SUPPORTS_Y ? q : 0;
          var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));
          var e;
          if (
            z === null ||
            (e = min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p
          ) {
            q = advanceStringIndex(S, q, unicodeMatching);
          } else {
            A.push(S.slice(p, q));
            if (A.length === lim) return A;
            for (var i = 1; i <= z.length - 1; i++) {
              A.push(z[i]);
              if (A.length === lim) return A;
            }
            q = p = e;
          }
        }
        A.push(S.slice(p));
        return A;
      }
    ];
  }, !SUPPORTS_Y);
  
  
  /***/ }),
  
  /***/ 120:
  /***/ (function(module, exports) {
  
  var g;
  
  // This works in non-strict mode
  g = (function() {
    return this;
  })();
  
  try {
    // This works if eval is allowed (see CSP)
    g = g || new Function("return this")();
  } catch (e) {
    // This works if the window reference is available
    if (typeof window === "object") g = window;
  }
  
  // g can still be undefined, but nothing to do about it...
  // We return undefined, instead of nothing here, so it's
  // easier to handle this case. if(!global) { ...}
  
  module.exports = g;
  
  
  /***/ }),
  
  /***/ 122:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var regexpFlags = __webpack_require__(172);
  
  var nativeExec = RegExp.prototype.exec;
  // This always refers to the native implementation, because the
  // String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,
  // which loads this file before patching the method.
  var nativeReplace = String.prototype.replace;
  
  var patchedExec = nativeExec;
  
  var UPDATES_LAST_INDEX_WRONG = (function () {
    var re1 = /a/;
    var re2 = /b*/g;
    nativeExec.call(re1, 'a');
    nativeExec.call(re2, 'a');
    return re1.lastIndex !== 0 || re2.lastIndex !== 0;
  })();
  
  // nonparticipating capturing group, copied from es5-shim's String#split patch.
  var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;
  
  var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED;
  
  if (PATCH) {
    patchedExec = function exec(str) {
      var re = this;
      var lastIndex, reCopy, match, i;
  
      if (NPCG_INCLUDED) {
        reCopy = new RegExp('^' + re.source + '$(?!\\s)', regexpFlags.call(re));
      }
      if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;
  
      match = nativeExec.call(re, str);
  
      if (UPDATES_LAST_INDEX_WRONG && match) {
        re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
      }
      if (NPCG_INCLUDED && match && match.length > 1) {
        // Fix browsers whose `exec` methods don't consistently return `undefined`
        // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/
        nativeReplace.call(match[0], reCopy, function () {
          for (i = 1; i < arguments.length - 2; i++) {
            if (arguments[i] === undefined) match[i] = undefined;
          }
        });
      }
  
      return match;
    };
  }
  
  module.exports = patchedExec;
  
  
  /***/ }),
  
  /***/ 123:
  /***/ (function(module, exports, __webpack_require__) {
  
  var anObject = __webpack_require__(20);
  var defineProperties = __webpack_require__(208);
  var enumBugKeys = __webpack_require__(95);
  var hiddenKeys = __webpack_require__(79);
  var html = __webpack_require__(174);
  var documentCreateElement = __webpack_require__(107);
  var sharedKey = __webpack_require__(92);
  var IE_PROTO = sharedKey('IE_PROTO');
  
  var PROTOTYPE = 'prototype';
  var Empty = function () { /* empty */ };
  
  // Create object with fake `null` prototype: use iframe Object with cleared prototype
  var createDict = function () {
    // Thrash, waste and sodomy: IE GC bug
    var iframe = documentCreateElement('iframe');
    var length = enumBugKeys.length;
    var lt = '<';
    var script = 'script';
    var gt = '>';
    var js = 'java' + script + ':';
    var iframeDocument;
    iframe.style.display = 'none';
    html.appendChild(iframe);
    iframe.src = String(js);
    iframeDocument = iframe.contentWindow.document;
    iframeDocument.open();
    iframeDocument.write(lt + script + gt + 'document.F=Object' + lt + '/' + script + gt);
    iframeDocument.close();
    createDict = iframeDocument.F;
    while (length--) delete createDict[PROTOTYPE][enumBugKeys[length]];
    return createDict();
  };
  
  // `Object.create` method
  // https://tc39.github.io/ecma262/#sec-object.create
  module.exports = Object.create || function create(O, Properties) {
    var result;
    if (O !== null) {
      Empty[PROTOTYPE] = anObject(O);
      result = new Empty();
      Empty[PROTOTYPE] = null;
      // add "__proto__" for Object.getPrototypeOf polyfill
      result[IE_PROTO] = O;
    } else result = createDict();
    return Properties === undefined ? result : defineProperties(result, Properties);
  };
  
  hiddenKeys[IE_PROTO] = true;
  
  
  /***/ }),
  
  /***/ 124:
  /***/ (function(module, exports, __webpack_require__) {
  
  var has = __webpack_require__(22);
  var toIndexedObject = __webpack_require__(46);
  var indexOf = __webpack_require__(105).indexOf;
  var hiddenKeys = __webpack_require__(79);
  
  module.exports = function (object, names) {
    var O = toIndexedObject(object);
    var i = 0;
    var result = [];
    var key;
    for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);
    // Don't enum bug & hidden keys
    while (names.length > i) if (has(O, key = names[i++])) {
      ~indexOf(result, key) || result.push(key);
    }
    return result;
  };
  
  
  /***/ }),
  
  /***/ 125:
  /***/ (function(module, exports, __webpack_require__) {
  
  var wellKnownSymbol = __webpack_require__(14);
  var create = __webpack_require__(123);
  var createNonEnumerableProperty = __webpack_require__(27);
  
  var UNSCOPABLES = wellKnownSymbol('unscopables');
  var ArrayPrototype = Array.prototype;
  
  // Array.prototype[@@unscopables]
  // https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables
  if (ArrayPrototype[UNSCOPABLES] == undefined) {
    createNonEnumerableProperty(ArrayPrototype, UNSCOPABLES, create(null));
  }
  
  // add a key to Array.prototype[@@unscopables]
  module.exports = function (key) {
    ArrayPrototype[UNSCOPABLES][key] = true;
  };
  
  
  /***/ }),
  
  /***/ 128:
  /***/ (function(module, exports, __webpack_require__) {
  
  var isObject = __webpack_require__(21);
  var isArray = __webpack_require__(96);
  var wellKnownSymbol = __webpack_require__(14);
  
  var SPECIES = wellKnownSymbol('species');
  
  // `ArraySpeciesCreate` abstract operation
  // https://tc39.github.io/ecma262/#sec-arrayspeciescreate
  module.exports = function (originalArray, length) {
    var C;
    if (isArray(originalArray)) {
      C = originalArray.constructor;
      // cross-realm fallback
      if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;
      else if (isObject(C)) {
        C = C[SPECIES];
        if (C === null) C = undefined;
      }
    } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);
  };
  
  
  /***/ }),
  
  /***/ 129:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var createNonEnumerableProperty = __webpack_require__(27);
  var redefine = __webpack_require__(50);
  var fails = __webpack_require__(10);
  var wellKnownSymbol = __webpack_require__(14);
  var regexpExec = __webpack_require__(122);
  
  var SPECIES = wellKnownSymbol('species');
  
  var REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {
    // #replace needs built-in support for named groups.
    // #match works fine because it just return the exec results, even if it has
    // a "grops" property.
    var re = /./;
    re.exec = function () {
      var result = [];
      result.groups = { a: '7' };
      return result;
    };
    return ''.replace(re, '$<a>') !== '7';
  });
  
  // Chrome 51 has a buggy "split" implementation when RegExp#exec !== nativeExec
  // Weex JS has frozen built-in prototypes, so use try / catch wrapper
  var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {
    var re = /(?:)/;
    var originalExec = re.exec;
    re.exec = function () { return originalExec.apply(this, arguments); };
    var result = 'ab'.split(re);
    return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';
  });
  
  module.exports = function (KEY, length, exec, sham) {
    var SYMBOL = wellKnownSymbol(KEY);
  
    var DELEGATES_TO_SYMBOL = !fails(function () {
      // String methods call symbol-named RegEp methods
      var O = {};
      O[SYMBOL] = function () { return 7; };
      return ''[KEY](O) != 7;
    });
  
    var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {
      // Symbol-named RegExp methods call .exec
      var execCalled = false;
      var re = /a/;
  
      if (KEY === 'split') {
        // We can't use real regex here since it causes deoptimization
        // and serious performance degradation in V8
        // https://github.com/zloirock/core-js/issues/306
        re = {};
        // RegExp[@@split] doesn't call the regex's exec method, but first creates
        // a new one. We need to return the patched regex when creating the new one.
        re.constructor = {};
        re.constructor[SPECIES] = function () { return re; };
        re.flags = '';
        re[SYMBOL] = /./[SYMBOL];
      }
  
      re.exec = function () { execCalled = true; return null; };
  
      re[SYMBOL]('');
      return !execCalled;
    });
  
    if (
      !DELEGATES_TO_SYMBOL ||
      !DELEGATES_TO_EXEC ||
      (KEY === 'replace' && !REPLACE_SUPPORTS_NAMED_GROUPS) ||
      (KEY === 'split' && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)
    ) {
      var nativeRegExpMethod = /./[SYMBOL];
      var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {
        if (regexp.exec === regexpExec) {
          if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
            // The native String method already delegates to @@method (this
            // polyfilled function), leasing to infinite recursion.
            // We avoid it by directly calling the native @@method method.
            return { done: true, value: nativeRegExpMethod.call(regexp, str, arg2) };
          }
          return { done: true, value: nativeMethod.call(str, regexp, arg2) };
        }
        return { done: false };
      });
      var stringMethod = methods[0];
      var regexMethod = methods[1];
  
      redefine(String.prototype, KEY, stringMethod);
      redefine(RegExp.prototype, SYMBOL, length == 2
        // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)
        // 21.2.5.11 RegExp.prototype[@@split](string, limit)
        ? function (string, arg) { return regexMethod.call(string, this, arg); }
        // 21.2.5.6 RegExp.prototype[@@match](string)
        // 21.2.5.9 RegExp.prototype[@@search](string)
        : function (string) { return regexMethod.call(string, this); }
      );
      if (sham) createNonEnumerableProperty(RegExp.prototype[SYMBOL], 'sham', true);
    }
  };
  
  
  /***/ }),
  
  /***/ 130:
  /***/ (function(module, exports, __webpack_require__) {
  
  var classof = __webpack_require__(48);
  var regexpExec = __webpack_require__(122);
  
  // `RegExpExec` abstract operation
  // https://tc39.github.io/ecma262/#sec-regexpexec
  module.exports = function (R, S) {
    var exec = R.exec;
    if (typeof exec === 'function') {
      var result = exec.call(R, S);
      if (typeof result !== 'object') {
        throw TypeError('RegExp exec method returned something other than an Object or null');
      }
      return result;
    }
  
    if (classof(R) !== 'RegExp') {
      throw TypeError('RegExp#exec called on incompatible receiver');
    }
  
    return regexpExec.call(R, S);
  };
  
  
  
  /***/ }),
  
  /***/ 14:
  /***/ (function(module, exports, __webpack_require__) {
  
  var global = __webpack_require__(5);
  var shared = __webpack_require__(103);
  var has = __webpack_require__(22);
  var uid = __webpack_require__(104);
  var NATIVE_SYMBOL = __webpack_require__(110);
  var USE_SYMBOL_AS_UID = __webpack_require__(154);
  
  var WellKnownSymbolsStore = shared('wks');
  var Symbol = global.Symbol;
  var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : uid;
  
  module.exports = function (name) {
    if (!has(WellKnownSymbolsStore, name)) {
      if (NATIVE_SYMBOL && has(Symbol, name)) WellKnownSymbolsStore[name] = Symbol[name];
      else WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);
    } return WellKnownSymbolsStore[name];
  };
  
  
  /***/ }),
  
  /***/ 147:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var nativePropertyIsEnumerable = {}.propertyIsEnumerable;
  var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
  
  // Nashorn ~ JDK8 bug
  var NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);
  
  // `Object.prototype.propertyIsEnumerable` method implementation
  // https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable
  exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
    var descriptor = getOwnPropertyDescriptor(this, V);
    return !!descriptor && descriptor.enumerable;
  } : nativePropertyIsEnumerable;
  
  
  /***/ }),
  
  /***/ 148:
  /***/ (function(module, exports) {
  
  exports.f = Object.getOwnPropertySymbols;
  
  
  /***/ }),
  
  /***/ 149:
  /***/ (function(module, exports, __webpack_require__) {
  
  var has = __webpack_require__(22);
  var ownKeys = __webpack_require__(168);
  var getOwnPropertyDescriptorModule = __webpack_require__(64);
  var definePropertyModule = __webpack_require__(37);
  
  module.exports = function (target, source) {
    var keys = ownKeys(source);
    var defineProperty = definePropertyModule.f;
    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
    for (var i = 0; i < keys.length; i++) {
      var key = keys[i];
      if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));
    }
  };
  
  
  /***/ }),
  
  /***/ 150:
  /***/ (function(module, exports, __webpack_require__) {
  
  var global = __webpack_require__(5);
  
  module.exports = global;
  
  
  /***/ }),
  
  /***/ 151:
  /***/ (function(module, exports, __webpack_require__) {
  
  var aFunction = __webpack_require__(89);
  
  // optional / simple context binding
  module.exports = function (fn, that, length) {
    aFunction(fn);
    if (that === undefined) return fn;
    switch (length) {
      case 0: return function () {
        return fn.call(that);
      };
      case 1: return function (a) {
        return fn.call(that, a);
      };
      case 2: return function (a, b) {
        return fn.call(that, a, b);
      };
      case 3: return function (a, b, c) {
        return fn.call(that, a, b, c);
      };
    }
    return function (/* ...args */) {
      return fn.apply(that, arguments);
    };
  };
  
  
  /***/ }),
  
  /***/ 152:
  /***/ (function(module, exports, __webpack_require__) {
  
  var internalObjectKeys = __webpack_require__(124);
  var enumBugKeys = __webpack_require__(95);
  
  // `Object.keys` method
  // https://tc39.github.io/ecma262/#sec-object.keys
  module.exports = Object.keys || function keys(O) {
    return internalObjectKeys(O, enumBugKeys);
  };
  
  
  /***/ }),
  
  /***/ 154:
  /***/ (function(module, exports, __webpack_require__) {
  
  var NATIVE_SYMBOL = __webpack_require__(110);
  
  module.exports = NATIVE_SYMBOL
    // eslint-disable-next-line no-undef
    && !Symbol.sham
    // eslint-disable-next-line no-undef
    && typeof Symbol() == 'symbol';
  
  
  /***/ }),
  
  /***/ 155:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var charAt = __webpack_require__(285).charAt;
  
  // `AdvanceStringIndex` abstract operation
  // https://tc39.github.io/ecma262/#sec-advancestringindex
  module.exports = function (S, index, unicode) {
    return index + (unicode ? charAt(S, index).length : 1);
  };
  
  
  /***/ }),
  
  /***/ 168:
  /***/ (function(module, exports, __webpack_require__) {
  
  var getBuiltIn = __webpack_require__(69);
  var getOwnPropertyNamesModule = __webpack_require__(90);
  var getOwnPropertySymbolsModule = __webpack_require__(148);
  var anObject = __webpack_require__(20);
  
  // all object keys, includes non-enumerable and symbols
  module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
    var keys = getOwnPropertyNamesModule.f(anObject(it));
    var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
    return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;
  };
  
  
  /***/ }),
  
  /***/ 169:
  /***/ (function(module, exports, __webpack_require__) {
  
  var global = __webpack_require__(5);
  var inspectSource = __webpack_require__(93);
  
  var WeakMap = global.WeakMap;
  
  module.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));
  
  
  /***/ }),
  
  /***/ 172:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var anObject = __webpack_require__(20);
  
  // `RegExp.prototype.flags` getter implementation
  // https://tc39.github.io/ecma262/#sec-get-regexp.prototype.flags
  module.exports = function () {
    var that = anObject(this);
    var result = '';
    if (that.global) result += 'g';
    if (that.ignoreCase) result += 'i';
    if (that.multiline) result += 'm';
    if (that.dotAll) result += 's';
    if (that.unicode) result += 'u';
    if (that.sticky) result += 'y';
    return result;
  };
  
  
  /***/ }),
  
  /***/ 173:
  /***/ (function(module, exports, __webpack_require__) {
  
  var isObject = __webpack_require__(21);
  var classof = __webpack_require__(48);
  var wellKnownSymbol = __webpack_require__(14);
  
  var MATCH = wellKnownSymbol('match');
  
  // `IsRegExp` abstract operation
  // https://tc39.github.io/ecma262/#sec-isregexp
  module.exports = function (it) {
    var isRegExp;
    return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');
  };
  
  
  /***/ }),
  
  /***/ 174:
  /***/ (function(module, exports, __webpack_require__) {
  
  var getBuiltIn = __webpack_require__(69);
  
  module.exports = getBuiltIn('document', 'documentElement');
  
  
  /***/ }),
  
  /***/ 2:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var $ = __webpack_require__(9);
  var exec = __webpack_require__(122);
  
  $({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {
    exec: exec
  });
  
  
  /***/ }),
  
  /***/ 20:
  /***/ (function(module, exports, __webpack_require__) {
  
  var isObject = __webpack_require__(21);
  
  module.exports = function (it) {
    if (!isObject(it)) {
      throw TypeError(String(it) + ' is not an object');
    } return it;
  };
  
  
  /***/ }),
  
  /***/ 207:
  /***/ (function(module, exports, __webpack_require__) {
  
  var anObject = __webpack_require__(20);
  var aFunction = __webpack_require__(89);
  var wellKnownSymbol = __webpack_require__(14);
  
  var SPECIES = wellKnownSymbol('species');
  
  // `SpeciesConstructor` abstract operation
  // https://tc39.github.io/ecma262/#sec-speciesconstructor
  module.exports = function (O, defaultConstructor) {
    var C = anObject(O).constructor;
    var S;
    return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);
  };
  
  
  /***/ }),
  
  /***/ 208:
  /***/ (function(module, exports, __webpack_require__) {
  
  var DESCRIPTORS = __webpack_require__(28);
  var definePropertyModule = __webpack_require__(37);
  var anObject = __webpack_require__(20);
  var objectKeys = __webpack_require__(152);
  
  // `Object.defineProperties` method
  // https://tc39.github.io/ecma262/#sec-object.defineproperties
  module.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {
    anObject(O);
    var keys = objectKeys(Properties);
    var length = keys.length;
    var index = 0;
    var key;
    while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);
    return O;
  };
  
  
  /***/ }),
  
  /***/ 21:
  /***/ (function(module, exports) {
  
  module.exports = function (it) {
    return typeof it === 'object' ? it !== null : typeof it === 'function';
  };
  
  
  /***/ }),
  
  /***/ 22:
  /***/ (function(module, exports) {
  
  var hasOwnProperty = {}.hasOwnProperty;
  
  module.exports = function (it, key) {
    return hasOwnProperty.call(it, key);
  };
  
  
  /***/ }),
  
  /***/ 27:
  /***/ (function(module, exports, __webpack_require__) {
  
  var DESCRIPTORS = __webpack_require__(28);
  var definePropertyModule = __webpack_require__(37);
  var createPropertyDescriptor = __webpack_require__(70);
  
  module.exports = DESCRIPTORS ? function (object, key, value) {
    return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
  } : function (object, key, value) {
    object[key] = value;
    return object;
  };
  
  
  /***/ }),
  
  /***/ 28:
  /***/ (function(module, exports, __webpack_require__) {
  
  var fails = __webpack_require__(10);
  
  // Thank's IE8 for his funny defineProperty
  module.exports = !fails(function () {
    return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;
  });
  
  
  /***/ }),
  
  /***/ 285:
  /***/ (function(module, exports, __webpack_require__) {
  
  var toInteger = __webpack_require__(53);
  var requireObjectCoercible = __webpack_require__(35);
  
  // `String.prototype.{ codePointAt, at }` methods implementation
  var createMethod = function (CONVERT_TO_STRING) {
    return function ($this, pos) {
      var S = String(requireObjectCoercible($this));
      var position = toInteger(pos);
      var size = S.length;
      var first, second;
      if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
      first = S.charCodeAt(position);
      return first < 0xD800 || first > 0xDBFF || position + 1 === size
        || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF
          ? CONVERT_TO_STRING ? S.charAt(position) : first
          : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
    };
  };
  
  module.exports = {
    // `String.prototype.codePointAt` method
    // https://tc39.github.io/ecma262/#sec-string.prototype.codepointat
    codeAt: createMethod(false),
    // `String.prototype.at` method
    // https://github.com/mathiasbynens/String.prototype.at
    charAt: createMethod(true)
  };
  
  
  /***/ }),
  
  /***/ 29:
  /***/ (function(module, exports, __webpack_require__) {
  
  var toInteger = __webpack_require__(53);
  
  var min = Math.min;
  
  // `ToLength` abstract operation
  // https://tc39.github.io/ecma262/#sec-tolength
  module.exports = function (argument) {
    return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
  };
  
  
  /***/ }),
  
  /***/ 3:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var fixRegExpWellKnownSymbolLogic = __webpack_require__(129);
  var anObject = __webpack_require__(20);
  var toObject = __webpack_require__(52);
  var toLength = __webpack_require__(29);
  var toInteger = __webpack_require__(53);
  var requireObjectCoercible = __webpack_require__(35);
  var advanceStringIndex = __webpack_require__(155);
  var regExpExec = __webpack_require__(130);
  
  var max = Math.max;
  var min = Math.min;
  var floor = Math.floor;
  var SUBSTITUTION_SYMBOLS = /\$([$&'`]|\d\d?|<[^>]*>)/g;
  var SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&'`]|\d\d?)/g;
  
  var maybeToString = function (it) {
    return it === undefined ? it : String(it);
  };
  
  // @@replace logic
  fixRegExpWellKnownSymbolLogic('replace', 2, function (REPLACE, nativeReplace, maybeCallNative) {
    return [
      // `String.prototype.replace` method
      // https://tc39.github.io/ecma262/#sec-string.prototype.replace
      function replace(searchValue, replaceValue) {
        var O = requireObjectCoercible(this);
        var replacer = searchValue == undefined ? undefined : searchValue[REPLACE];
        return replacer !== undefined
          ? replacer.call(searchValue, O, replaceValue)
          : nativeReplace.call(String(O), searchValue, replaceValue);
      },
      // `RegExp.prototype[@@replace]` method
      // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@replace
      function (regexp, replaceValue) {
        var res = maybeCallNative(nativeReplace, regexp, this, replaceValue);
        if (res.done) return res.value;
  
        var rx = anObject(regexp);
        var S = String(this);
  
        var functionalReplace = typeof replaceValue === 'function';
        if (!functionalReplace) replaceValue = String(replaceValue);
  
        var global = rx.global;
        if (global) {
          var fullUnicode = rx.unicode;
          rx.lastIndex = 0;
        }
        var results = [];
        while (true) {
          var result = regExpExec(rx, S);
          if (result === null) break;
  
          results.push(result);
          if (!global) break;
  
          var matchStr = String(result[0]);
          if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);
        }
  
        var accumulatedResult = '';
        var nextSourcePosition = 0;
        for (var i = 0; i < results.length; i++) {
          result = results[i];
  
          var matched = String(result[0]);
          var position = max(min(toInteger(result.index), S.length), 0);
          var captures = [];
          // NOTE: This is equivalent to
          //   captures = result.slice(1).map(maybeToString)
          // but for some reason `nativeSlice.call(result, 1, result.length)` (called in
          // the slice polyfill when slicing native arrays) "doesn't work" in safari 9 and
          // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.
          for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));
          var namedCaptures = result.groups;
          if (functionalReplace) {
            var replacerArgs = [matched].concat(captures, position, S);
            if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);
            var replacement = String(replaceValue.apply(undefined, replacerArgs));
          } else {
            replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);
          }
          if (position >= nextSourcePosition) {
            accumulatedResult += S.slice(nextSourcePosition, position) + replacement;
            nextSourcePosition = position + matched.length;
          }
        }
        return accumulatedResult + S.slice(nextSourcePosition);
      }
    ];
  
    // https://tc39.github.io/ecma262/#sec-getsubstitution
    function getSubstitution(matched, str, position, captures, namedCaptures, replacement) {
      var tailPos = position + matched.length;
      var m = captures.length;
      var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
      if (namedCaptures !== undefined) {
        namedCaptures = toObject(namedCaptures);
        symbols = SUBSTITUTION_SYMBOLS;
      }
      return nativeReplace.call(replacement, symbols, function (match, ch) {
        var capture;
        switch (ch.charAt(0)) {
          case '$': return '$';
          case '&': return matched;
          case '`': return str.slice(0, position);
          case "'": return str.slice(tailPos);
          case '<':
            capture = namedCaptures[ch.slice(1, -1)];
            break;
          default: // \d\d?
            var n = +ch;
            if (n === 0) return match;
            if (n > m) {
              var f = floor(n / 10);
              if (f === 0) return match;
              if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);
              return match;
            }
            capture = captures[n - 1];
        }
        return capture === undefined ? '' : capture;
      });
    }
  });
  
  
  /***/ }),
  
  /***/ 35:
  /***/ (function(module, exports) {
  
  // `RequireObjectCoercible` abstract operation
  // https://tc39.github.io/ecma262/#sec-requireobjectcoercible
  module.exports = function (it) {
    if (it == undefined) throw TypeError("Can't call method on " + it);
    return it;
  };
  
  
  /***/ }),
  
  /***/ 37:
  /***/ (function(module, exports, __webpack_require__) {
  
  var DESCRIPTORS = __webpack_require__(28);
  var IE8_DOM_DEFINE = __webpack_require__(108);
  var anObject = __webpack_require__(20);
  var toPrimitive = __webpack_require__(71);
  
  var nativeDefineProperty = Object.defineProperty;
  
  // `Object.defineProperty` method
  // https://tc39.github.io/ecma262/#sec-object.defineproperty
  exports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {
    anObject(O);
    P = toPrimitive(P, true);
    anObject(Attributes);
    if (IE8_DOM_DEFINE) try {
      return nativeDefineProperty(O, P, Attributes);
    } catch (error) { /* empty */ }
    if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');
    if ('value' in Attributes) O[P] = Attributes.value;
    return O;
  };
  
  
  /***/ }),
  
  /***/ 451:
  /***/ (function(module, __webpack_exports__, __webpack_require__) {
  
  "use strict";
  __webpack_require__.r(__webpack_exports__);
  /* harmony import */ var core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
  /* harmony import */ var core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_0__);
  /* harmony import */ var core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
  /* harmony import */ var core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_1__);
  /* harmony import */ var core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2);
  /* harmony import */ var core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__);
  /* harmony import */ var core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);
  /* harmony import */ var core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3__);
  /* harmony import */ var core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12);
  /* harmony import */ var core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_4__);
  /* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(8);
  /* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_5__);
  
  
  
  
  
  
  ;
  
  (function (hm) {
    hm.Cookies = function () {
      var self = this;
      this.checkCookieName = 'hm_check_cookie';
      this.appCookieName = 'hm_app_promotion';
      this.cookieMessageUrlSelector = '.js-cookie-message-url';
      this.cookieNotificationSelector = '.js-cookie-notification';
      this.userCookieName = 'userCookie';
      this.rememberMeCookieName = 'rememberMeUser';
      hm.waitUntil(function () {
        return hm && hm.version;
      }).then(function () {
        self.setupUser();
      });
  
      this.eventListeners();
    };
    /*eslint-disable*/
  
  
    hm.Cookies.prototype.setupUser = function () {
      var cartCount = 0,
          actualUserCookie;
      this.userCookie = this.readCookie(this.userCookieName);
      this.userCookie = jQuery.parseJSON(this.userCookie);
  
      if (typeof this.userCookie === 'string') {
        this.userCookie = jQuery.parseJSON(this.userCookie);
      }
  
      if (this.userCookie && this.userCookie.cartCount) {
        cartCount = this.userCookie.cartCount;
      }
  
      if (this.userCookie && this.userCookie.hybris_uuid) {
        // this.setupSignedInUserWithCookie(this.userCookie);
        actualUserCookie = this.userCookie;
      } else {
        this.rememberMeUserCookie = jQuery.parseJSON(this.readCookie(this.rememberMeCookieName));
  
        if (typeof this.rememberMeUserCookie === 'string') {
          this.rememberMeUserCookie = jQuery.parseJSON(this.rememberMeUserCookie);
        }
  
        if (this.rememberMeUserCookie && this.rememberMeUserCookie.hybris_uuid) {
          // this.setupSignedInUserWithCookie(this.rememberMeUserCookie);
          actualUserCookie = this.rememberMeUserCookie;
          cartCount = this.rememberMeUserCookie.cartCount;
          var origin = window.location.origin;
  
          if (!origin) {
            origin = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
          }
  
          var originHttps = origin.replace('http:', 'https:') //minicart
          ;
  
          (function () {
            var $shoppingBagPopDown = $('.shopping-bag.rollover-popdown'),
                miniCartUrl = $shoppingBagPopDown.data('cart'),
                replacedMiniCartUrl;
  
            if (miniCartUrl) {
              if (miniCartUrl.indexOf('https') != 0) {
                replacedMiniCartUrl = originHttps + miniCartUrl.replace('/minicart', '/sminicart');
                replacedMiniCartUrl = replacedMiniCartUrl + '?targetURL=' + replacedMiniCartUrl;
              }
  
              $shoppingBagPopDown.data('cart', replacedMiniCartUrl);
            }
          })() //ShoppingBag LInk
          ;
  
          (function () {
            var $shoppingBagLink = $('.shopping-bag.rollover-popdown a'),
                href = $shoppingBagLink.attr('href'),
                replacedHref;
  
            if (href) {
              replacedHref = href.replace('http:', 'https:').replace('/cart', '/scart');
              $shoppingBagLink.attr('href', replacedHref + '?targetURL=' + href);
            }
          })();
        }
      }
  
      var isSignedIn = this.userCookie && this.userCookie.hybris_uuid || this.rememberMeUserCookie && this.rememberMeUserCookie.hybris_uuid;
  
      if (isSignedIn) {
        $('body').addClass('signed-in').removeClass('not-signed-in');
  
        if (this.setupSignedInUserWithCookie) {
          this.setupSignedInUserWithCookie(actualUserCookie);
        }
  
        hm.eventBus.emit('cookie.user.setup', {
          isSignedIn: true,
          hybris_uuid: this.userCookie.hybris_uuid,
          showClub2TermsAndConditionModal: this.userCookie.showClub2TermsAndConditionModal
        });
      } else {
        $('body').addClass('not-signed-in').removeClass('signed-in');
        hm.eventBus.emit('cookie.user.setup', {
          isSignedIn: false
        });
      }
  
      this.setShoppingBagCount(cartCount);
      this.checkCookies();
    };
    /*eslint-enable*/
  
  
    hm.Cookies.prototype.eventListeners = function () {
      var self = this;
      $(document).on('click', self.cookieNotificationSelector + ' .close,' + self.cookieNotificationSelector + ' .button', function (e) {
        e.preventDefault();
        self.createCookie(self.checkCookieName, 'true', 182);
      });
    };
  
    hm.Cookies.prototype.checkCookies = function () {
      var self = this,
          messageUrl = $(self.cookieMessageUrlSelector).data('message-url'),
          messageFetch = function messageFetch(success) {
        $.ajax({
          url: messageUrl,
          dataType: 'html',
          success: success
        });
      };
  
      if (messageUrl) {
        if (!hm.notifications || !hm.notifications.showNotification) {
          return;
        }
  
        hm.notifications.showNotification(messageFetch, self.cookieNotificationSelector, self.checkCookieName, true);
      }
  
      if (typeof self.getFirstTimeMessage == 'function' && _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_5___default()(hm.device) === 'object' && hm.device.android()) {
        // (hm.device.ios() || hm.device.android())) {
        if (!self.readCookie(self.appCookieName)) {
          var appStoreUrl = '';
          var firstTimeMessageUrl = $(self.cookieMessageUrlSelector).data('first-time-url');
  
          if (firstTimeMessageUrl) {
            self.createCookie(self.appCookieName, 'true', parseInt($(self.cookieMessageUrlSelector).data('first-time-expiration') || 60, 10));
            /*
              if(hm.device.ios()) {
                appStoreUrl = $(self.cookieMessageUrlSelector).data('ios-app-path');
              }
              */
  
            if (hm.device.android()) {
              appStoreUrl = $(self.cookieMessageUrlSelector).data('android-app-path');
            }
  
            self.getFirstTimeMessage(firstTimeMessageUrl, appStoreUrl);
          }
        }
      }
    };
  
    hm.Cookies.prototype.createCookie = function (name, value, days, minutes, secure, domain) {
      var date = new Date();
      var expires;
  
      if (days) {
        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
        expires = '; expires=' + date.toGMTString();
      } else if (minutes) {
        date.setTime(date.getTime() + minutes * 60 * 1000);
        expires = '; expires=' + date.toGMTString();
      } else {
        expires = '';
      }
  
      var cookieSignature = name + '=' + '##' + btoa(value) + '##' + expires + '; path=/';
  
      if (domain) {
        cookieSignature += '; domain=' + domain;
      }
  
      if (secure) {
        cookieSignature += '; secure=true';
      }
  
      document.cookie = cookieSignature;
    };
  
    hm.Cookies.prototype.isValueEncoded = function (value) {
      return value.length >= 8 && value.charAt(0) == '#' && value.charAt(1) == '#' && value.charAt(value.length - 2) == '#' && value.charAt(value.length - 1) == '#';
    };
  
    hm.Cookies.prototype.readCookie = function (name) {
      var nameEQ = name + '=';
      var ca = document.cookie.split(';');
      var c;
      var i;
  
      for (i = 0; i < ca.length; i++) {
        c = ca[i];
  
        while (c.charAt(0) == ' ') {
          c = c.substring(1, c.length);
        }
  
        if (c.indexOf(nameEQ) === 0) {
          var result = c.substring(nameEQ.length, c.length);
  
          if (this.isValueEncoded(result)) {
            result = result.replace(/#/g, '');
            return atob(result);
          } else {
            return result;
          }
        }
      }
  
      return null;
    };
  
    hm.Cookies.prototype.cookieExists = function (name) {
      return this.readCookie(name) !== null;
    };
  
    hm.Cookies.prototype.eraseCookie = function (name) {
      this.createCookie(name, '', -1);
    };
  
    hm.Cookies.prototype.checkAliveCallStatus = function () {
      var currentTimeStamp = new Date().getTime();
      var aliveCookieValue = this.readCookie(this.aliveCookieName);
  
      if (aliveCookieValue) {
        if (currentTimeStamp - aliveCookieValue > 900000) {
          aliveCookieValue = currentTimeStamp;
          this.createCookie(this.aliveCookieName, aliveCookieValue, 1);
          $('#keepalive').attr('src', $('.aliveuser').val());
        } else {
          $('#keepalive').attr('src', '');
          aliveCookieValue = currentTimeStamp;
        }
      } else {
        aliveCookieValue = currentTimeStamp;
        this.createCookie(this.aliveCookieName, aliveCookieValue, 1);
        $('#keepalive').attr('src', $('.aliveuser').val());
      }
    }; // This was from hm-vanilla/src/shared/js/_desktopComponents/cookies.js
  
  
    hm.Cookies.prototype.setupSignedInUserWithCookie = function (cookie) {
      var $signedIn = $('.goto-signed-in');
      var $shoppingBag = $('.shopping-bag');
      var $greetingText = $('.greeting-text');
      $signedIn.addClass('hidden');
      var emailMaxWidth = 410 - $('.signin-signed-in').width() - $shoppingBag.width();
      $signedIn.css('max-width', emailMaxWidth + 'px');
      var email = cookie.hybris_uuid;
      var fname = decodeURIComponent((cookie.hybris_firstName + '').replace(/\+/g, '%20'));
  
      if (typeof cookie.hideGreeting !== 'undefined' && cookie.hideGreeting === true) {
        $greetingText.addClass('hidden');
      } else if (cookie.hybris_firstName && cookie.hybris_firstName.length > 0) {
        $signedIn.html(fname);
      } else {
        $signedIn.html(email);
      }
  
      $signedIn.removeClass('hidden');
    };
  
    hm.Cookies.prototype.showCookieNotification = function (data) {
      $('body').prepend(data);
    };
  
    hm.Cookies.prototype.setShoppingBagCount = function (count) {
      $('.header-global .shoppingbag-item-count').html(count);
      $('.header-global .shopping-bag').addClass('is-loaded');
    }; // This was from hm-vanilla/src/shared/js/_mobileComponents/cookies.js
  
  
    hm.Cookies.prototype.showCookieNotification = function (data) {//$('main').prepend(data);
    };
  
    hm.Cookies.prototype.setShoppingBagCount = function (count) {
      $('.header-global .shoppingbag-item-count').html(count);
      $('.header-global .shopping-bag').addClass('is-loaded');
    };
  
    hm.Cookies.prototype.getFirstTimeMessage = function (url, appStoreUrl) {
      $.ajax({
        url: url,
        success: function success(data) {
          if ($('.first-time-message').length === 0) {
			var cleanData = DOMPurify.sanitize(data);
            var response = $(cleanData);
            response.find('a.modalconfirm').attr('href', appStoreUrl);
            hm.modal.populateConfirmModal(response);
          }
        }
      });
    };
  
    hm.cookies = hm.cookies || new hm.Cookies();
  })(window.hm);
  
  /***/ }),
  
  /***/ 46:
  /***/ (function(module, exports, __webpack_require__) {
  
  // toObject with fallback for non-array-like ES3 strings
  var IndexedObject = __webpack_require__(91);
  var requireObjectCoercible = __webpack_require__(35);
  
  module.exports = function (it) {
    return IndexedObject(requireObjectCoercible(it));
  };
  
  
  /***/ }),
  
  /***/ 48:
  /***/ (function(module, exports) {
  
  var toString = {}.toString;
  
  module.exports = function (it) {
    return toString.call(it).slice(8, -1);
  };
  
  
  /***/ }),
  
  /***/ 5:
  /***/ (function(module, exports, __webpack_require__) {
  
  /* WEBPACK VAR INJECTION */(function(global) {var check = function (it) {
    return it && it.Math == Math && it;
  };
  
  // https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
  module.exports =
    // eslint-disable-next-line no-undef
    check(typeof globalThis == 'object' && globalThis) ||
    check(typeof window == 'object' && window) ||
    check(typeof self == 'object' && self) ||
    check(typeof global == 'object' && global) ||
    // eslint-disable-next-line no-new-func
    Function('return this')();
  
  /* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(120)))
  
  /***/ }),
  
  /***/ 50:
  /***/ (function(module, exports, __webpack_require__) {
  
  var global = __webpack_require__(5);
  var createNonEnumerableProperty = __webpack_require__(27);
  var has = __webpack_require__(22);
  var setGlobal = __webpack_require__(80);
  var inspectSource = __webpack_require__(93);
  var InternalStateModule = __webpack_require__(102);
  
  var getInternalState = InternalStateModule.get;
  var enforceInternalState = InternalStateModule.enforce;
  var TEMPLATE = String(String).split('String');
  
  (module.exports = function (O, key, value, options) {
    var unsafe = options ? !!options.unsafe : false;
    var simple = options ? !!options.enumerable : false;
    var noTargetGet = options ? !!options.noTargetGet : false;
    if (typeof value == 'function') {
      if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);
      enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');
    }
    if (O === global) {
      if (simple) O[key] = value;
      else setGlobal(key, value);
      return;
    } else if (!unsafe) {
      delete O[key];
    } else if (!noTargetGet && O[key]) {
      simple = true;
    }
    if (simple) O[key] = value;
    else createNonEnumerableProperty(O, key, value);
  // add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
  })(Function.prototype, 'toString', function toString() {
    return typeof this == 'function' && getInternalState(this).source || inspectSource(this);
  });
  
  
  /***/ }),
  
  /***/ 52:
  /***/ (function(module, exports, __webpack_require__) {
  
  var requireObjectCoercible = __webpack_require__(35);
  
  // `ToObject` abstract operation
  // https://tc39.github.io/ecma262/#sec-toobject
  module.exports = function (argument) {
    return Object(requireObjectCoercible(argument));
  };
  
  
  /***/ }),
  
  /***/ 53:
  /***/ (function(module, exports) {
  
  var ceil = Math.ceil;
  var floor = Math.floor;
  
  // `ToInteger` abstract operation
  // https://tc39.github.io/ecma262/#sec-tointeger
  module.exports = function (argument) {
    return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);
  };
  
  
  /***/ }),
  
  /***/ 64:
  /***/ (function(module, exports, __webpack_require__) {
  
  var DESCRIPTORS = __webpack_require__(28);
  var propertyIsEnumerableModule = __webpack_require__(147);
  var createPropertyDescriptor = __webpack_require__(70);
  var toIndexedObject = __webpack_require__(46);
  var toPrimitive = __webpack_require__(71);
  var has = __webpack_require__(22);
  var IE8_DOM_DEFINE = __webpack_require__(108);
  
  var nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
  
  // `Object.getOwnPropertyDescriptor` method
  // https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor
  exports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
    O = toIndexedObject(O);
    P = toPrimitive(P, true);
    if (IE8_DOM_DEFINE) try {
      return nativeGetOwnPropertyDescriptor(O, P);
    } catch (error) { /* empty */ }
    if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);
  };
  
  
  /***/ }),
  
  /***/ 65:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var fails = __webpack_require__(10);
  
  module.exports = function (METHOD_NAME, argument) {
    var method = [][METHOD_NAME];
    return !method || !fails(function () {
      // eslint-disable-next-line no-useless-call,no-throw-literal
      method.call(null, argument || function () { throw 1; }, 1);
    });
  };
  
  
  /***/ }),
  
  /***/ 69:
  /***/ (function(module, exports, __webpack_require__) {
  
  var path = __webpack_require__(150);
  var global = __webpack_require__(5);
  
  var aFunction = function (variable) {
    return typeof variable == 'function' ? variable : undefined;
  };
  
  module.exports = function (namespace, method) {
    return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])
      : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];
  };
  
  
  /***/ }),
  
  /***/ 7:
  /***/ (function(module, exports, __webpack_require__) {
  
  "use strict";
  
  var $ = __webpack_require__(9);
  var $indexOf = __webpack_require__(105).indexOf;
  var sloppyArrayMethod = __webpack_require__(65);
  
  var nativeIndexOf = [].indexOf;
  
  var NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;
  var SLOPPY_METHOD = sloppyArrayMethod('indexOf');
  
  // `Array.prototype.indexOf` method
  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof
  $({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || SLOPPY_METHOD }, {
    indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {
      return NEGATIVE_ZERO
        // convert -0 to +0
        ? nativeIndexOf.apply(this, arguments) || 0
        : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);
    }
  });
  
  
  /***/ }),
  
  /***/ 70:
  /***/ (function(module, exports) {
  
  module.exports = function (bitmap, value) {
    return {
      enumerable: !(bitmap & 1),
      configurable: !(bitmap & 2),
      writable: !(bitmap & 4),
      value: value
    };
  };
  
  
  /***/ }),
  
  /***/ 71:
  /***/ (function(module, exports, __webpack_require__) {
  
  var isObject = __webpack_require__(21);
  
  // `ToPrimitive` abstract operation
  // https://tc39.github.io/ecma262/#sec-toprimitive
  // instead of the ES6 spec version, we didn't implement @@toPrimitive case
  // and the second argument - flag - preferred type is a string
  module.exports = function (input, PREFERRED_STRING) {
    if (!isObject(input)) return input;
    var fn, val;
    if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;
    if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;
    if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;
    throw TypeError("Can't convert object to primitive value");
  };
  
  
  /***/ }),
  
  /***/ 78:
  /***/ (function(module, exports) {
  
  module.exports = false;
  
  
  /***/ }),
  
  /***/ 79:
  /***/ (function(module, exports) {
  
  module.exports = {};
  
  
  /***/ }),
  
  /***/ 8:
  /***/ (function(module, exports) {
  
  function _typeof(obj) {
    "@babel/helpers - typeof";
  
    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      module.exports = _typeof = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      module.exports = _typeof = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }
  
    return _typeof(obj);
  }
  
  module.exports = _typeof;
  
  /***/ }),
  
  /***/ 80:
  /***/ (function(module, exports, __webpack_require__) {
  
  var global = __webpack_require__(5);
  var createNonEnumerableProperty = __webpack_require__(27);
  
  module.exports = function (key, value) {
    try {
      createNonEnumerableProperty(global, key, value);
    } catch (error) {
      global[key] = value;
    } return value;
  };
  
  
  /***/ }),
  
  /***/ 81:
  /***/ (function(module, exports, __webpack_require__) {
  
  var bind = __webpack_require__(151);
  var IndexedObject = __webpack_require__(91);
  var toObject = __webpack_require__(52);
  var toLength = __webpack_require__(29);
  var arraySpeciesCreate = __webpack_require__(128);
  
  var push = [].push;
  
  // `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation
  var createMethod = function (TYPE) {
    var IS_MAP = TYPE == 1;
    var IS_FILTER = TYPE == 2;
    var IS_SOME = TYPE == 3;
    var IS_EVERY = TYPE == 4;
    var IS_FIND_INDEX = TYPE == 6;
    var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
    return function ($this, callbackfn, that, specificCreate) {
      var O = toObject($this);
      var self = IndexedObject(O);
      var boundFunction = bind(callbackfn, that, 3);
      var length = toLength(self.length);
      var index = 0;
      var create = specificCreate || arraySpeciesCreate;
      var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;
      var value, result;
      for (;length > index; index++) if (NO_HOLES || index in self) {
        value = self[index];
        result = boundFunction(value, index, O);
        if (TYPE) {
          if (IS_MAP) target[index] = result; // map
          else if (result) switch (TYPE) {
            case 3: return true;              // some
            case 5: return value;             // find
            case 6: return index;             // findIndex
            case 2: push.call(target, value); // filter
          } else if (IS_EVERY) return false;  // every
        }
      }
      return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
    };
  };
  
  module.exports = {
    // `Array.prototype.forEach` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.foreach
    forEach: createMethod(0),
    // `Array.prototype.map` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.map
    map: createMethod(1),
    // `Array.prototype.filter` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.filter
    filter: createMethod(2),
    // `Array.prototype.some` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.some
    some: createMethod(3),
    // `Array.prototype.every` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.every
    every: createMethod(4),
    // `Array.prototype.find` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.find
    find: createMethod(5),
    // `Array.prototype.findIndex` method
    // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex
    findIndex: createMethod(6)
  };
  
  
  /***/ }),
  
  /***/ 89:
  /***/ (function(module, exports) {
  
  module.exports = function (it) {
    if (typeof it != 'function') {
      throw TypeError(String(it) + ' is not a function');
    } return it;
  };
  
  
  /***/ }),
  
  /***/ 9:
  /***/ (function(module, exports, __webpack_require__) {
  
  var global = __webpack_require__(5);
  var getOwnPropertyDescriptor = __webpack_require__(64).f;
  var createNonEnumerableProperty = __webpack_require__(27);
  var redefine = __webpack_require__(50);
  var setGlobal = __webpack_require__(80);
  var copyConstructorProperties = __webpack_require__(149);
  var isForced = __webpack_require__(106);
  
  /*
    options.target      - name of the target object
    options.global      - target is the global object
    options.stat        - export as static methods of target
    options.proto       - export as prototype methods of target
    options.real        - real prototype method for the `pure` version
    options.forced      - export even if the native feature is available
    options.bind        - bind methods to the target, required for the `pure` version
    options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version
    options.unsafe      - use the simple assignment of property instead of delete + defineProperty
    options.sham        - add a flag to not completely full polyfills
    options.enumerable  - export as enumerable property
    options.noTargetGet - prevent calling a getter on target
  */
  module.exports = function (options, source) {
    var TARGET = options.target;
    var GLOBAL = options.global;
    var STATIC = options.stat;
    var FORCED, target, key, targetProperty, sourceProperty, descriptor;
    if (GLOBAL) {
      target = global;
    } else if (STATIC) {
      target = global[TARGET] || setGlobal(TARGET, {});
    } else {
      target = (global[TARGET] || {}).prototype;
    }
    if (target) for (key in source) {
      sourceProperty = source[key];
      if (options.noTargetGet) {
        descriptor = getOwnPropertyDescriptor(target, key);
        targetProperty = descriptor && descriptor.value;
      } else targetProperty = target[key];
      FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
      // contained in target
      if (!FORCED && targetProperty !== undefined) {
        if (typeof sourceProperty === typeof targetProperty) continue;
        copyConstructorProperties(sourceProperty, targetProperty);
      }
      // add a flag to not completely full polyfills
      if (options.sham || (targetProperty && targetProperty.sham)) {
        createNonEnumerableProperty(sourceProperty, 'sham', true);
      }
      // extend global
      redefine(target, key, sourceProperty, options);
    }
  };
  
  
  /***/ }),
  
  /***/ 90:
  /***/ (function(module, exports, __webpack_require__) {
  
  var internalObjectKeys = __webpack_require__(124);
  var enumBugKeys = __webpack_require__(95);
  
  var hiddenKeys = enumBugKeys.concat('length', 'prototype');
  
  // `Object.getOwnPropertyNames` method
  // https://tc39.github.io/ecma262/#sec-object.getownpropertynames
  exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
    return internalObjectKeys(O, hiddenKeys);
  };
  
  
  /***/ }),
  
  /***/ 91:
  /***/ (function(module, exports, __webpack_require__) {
  
  var fails = __webpack_require__(10);
  var classof = __webpack_require__(48);
  
  var split = ''.split;
  
  // fallback for non-array-like ES3 and non-enumerable old V8 strings
  module.exports = fails(function () {
    // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
    // eslint-disable-next-line no-prototype-builtins
    return !Object('z').propertyIsEnumerable(0);
  }) ? function (it) {
    return classof(it) == 'String' ? split.call(it, '') : Object(it);
  } : Object;
  
  
  /***/ }),
  
  /***/ 92:
  /***/ (function(module, exports, __webpack_require__) {
  
  var shared = __webpack_require__(103);
  var uid = __webpack_require__(104);
  
  var keys = shared('keys');
  
  module.exports = function (key) {
    return keys[key] || (keys[key] = uid(key));
  };
  
  
  /***/ }),
  
  /***/ 93:
  /***/ (function(module, exports, __webpack_require__) {
  
  var store = __webpack_require__(109);
  
  var functionToString = Function.toString;
  
  // this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper
  if (typeof store.inspectSource != 'function') {
    store.inspectSource = function (it) {
      return functionToString.call(it);
    };
  }
  
  module.exports = store.inspectSource;
  
  
  /***/ }),
  
  /***/ 94:
  /***/ (function(module, exports, __webpack_require__) {
  
  var toInteger = __webpack_require__(53);
  
  var max = Math.max;
  var min = Math.min;
  
  // Helper for a popular repeating case of the spec:
  // Let integer be ? ToInteger(index).
  // If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).
  module.exports = function (index, length) {
    var integer = toInteger(index);
    return integer < 0 ? max(integer + length, 0) : min(integer, length);
  };
  
  
  /***/ }),
  
  /***/ 95:
  /***/ (function(module, exports) {
  
  // IE8- don't enum bug keys
  module.exports = [
    'constructor',
    'hasOwnProperty',
    'isPrototypeOf',
    'propertyIsEnumerable',
    'toLocaleString',
    'toString',
    'valueOf'
  ];
  
  
  /***/ }),
  
  /***/ 96:
  /***/ (function(module, exports, __webpack_require__) {
  
  var classof = __webpack_require__(48);
  
  // `IsArray` abstract operation
  // https://tc39.github.io/ecma262/#sec-isarray
  module.exports = Array.isArray || function isArray(arg) {
    return classof(arg) == 'Array';
  };
  
  
  /***/ })
  
  /******/ });
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "../";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 251);
/******/ })
/************************************************************************/
/******/ ({

/***/ 251:
/***/ (function(module, exports) {

;

(function () {
  'use strict';

  hm.EventEmitter = function () {
    var publ = this,
        priv = {
      subscribers: {}
    };
    /**
     * Init is called from the bottom of the class declaration
     */

    priv.init = function () {};
    /**
     * Emit event
     * @param  {string}  event Event name
     * @return {boolean}       TRUE if event has subscribers
     */


    publ.emit = function (event) {
      var len = arguments.length,
          args = new Array(len - 1),
          handlers = priv.subscribers[event],
          i;
      if (!handlers || !handlers.length) return false; //Remove first argument

      for (i = 1; i < len; i++) {
        args[i - 1] = arguments[i];
      }

      priv.emitMany(handlers, this, args);
      return true;
    };
    /**
     * Call each function in handler
     * @param  {array}  handlers List of callbacks
     * @param  {object} self     Value of this to be provided to the callback
     * @param  {array}  args     Arguments to be passed to the callback
     */


    priv.emitMany = function (handlers, self, args) {
      var len = handlers.length,
          i;

      for (i = 0; i < len; i++) {
        handlers[i].apply(self, args);
      }
    };
    /**
     * Add event listener
     * @param  {string}   event   Name of event to listen to
     * @param  {Function} handler Function to be called on emit
     * @return {boolean}          TRUE if handler was attached
     */


    publ.addListener = function (event, handler) {
      var events = priv.subscribers[event];
      if (typeof handler !== 'function') throw new TypeError('Second argument has to be a function');

      if (!events) {
        priv.subscribers[event] = [];
        events = priv.subscribers[event];
      }

      events.push(handler);
      return true;
    };
    /**
     * Remove event listener
     * @param  {string}   event   Name of the event
     * @param  {Function} handler Event handler to remove
     * @return {boolean}          TRUE if event was removed
     */


    publ.removeListener = function (event, handler) {
      var events = priv.subscribers[event],
          index = events.indexOf(handler);
      if (index === -1) return false;
      events.splice(index, 1);
      return true;
    };

    priv.init();
  };

  hm.eventBus = new hm.EventEmitter();
})();

/***/ })

/******/ });
;(function(hm) {
  'use strict'

  hm.confirmExitHead = function() {
    var publ = this,
      priv = {
        selectors: {
          body: document.body,
          exitConfirmationModal: '.js-confirm-exit-modal',
        },
        pageHasUnsavedData: false,
        bypassNativeWarning: false, // user has already clicked "leave" in custom modal or they are submitting the form
        $modalTrigger: null,
        modalText: null,
      }

    priv.init = function() {
      if (!$(priv.selectors.exitConfirmationModal).length) {
        return
      }

      publ.$elements = hm.initElements(priv.selectors)

      priv.modalText = $(priv.selectors.exitConfirmationModal)
        .find('.modal-text')
        .text()
      priv.setupEventListeners()
    }

    priv.setupEventListeners = function() {
      publ.$elements.body.one('change', 'input, textarea, select', function() {
        priv.pageHasUnsavedData = true
      })

      publ.$elements.body.on('click', 'a', function(e) {
        var $link = $(this),
          url = $link.attr('href'),
          target = $link.attr('target'),
          isModalTrigger = $link.hasClass('overlay-trigger')

        if (
          !priv.bypassNativeWarning &&
          priv.pageHasUnsavedData &&
          url &&
          url !== '#' &&
          !isModalTrigger &&
          target !== '_blank'
        ) {
          e.preventDefault()
          priv.displayModal(url)
        }
      })

      $(window).on('beforeunload', function(e) {
        if (priv.pageHasUnsavedData && !priv.bypassNativeWarning) {
          e.returnValue = priv.modalText
          return priv.modalText
        }
      })
    }

    priv.displayModal = function(url) {
      var $confirmButton

      hm.modalManager.loadModalWithElement(
        'confirmExit',
        $(priv.selectors.exitConfirmationModal).clone(),
        '',
        null,
        null,
        null,
        'confirm'
      )

      $confirmButton = $(priv.selectors.exitConfirmationModal).find('.modalconfirm')

      $confirmButton.one('click', function() {
        priv.bypassNativeWarning = true
        window.location.href = url
      })
    }

    publ.toggle = function(bool) {
      priv.bypassNativeWarning = !bool
    }

    publ.enableExitWarning = function(enable) {
      priv.pageHasUnsavedData = enable
      priv.bypassNativeWarning = !enable
    }

    priv.init()
  }

  hm.confirmExit = new hm.confirmExitHead()
})(window.hm);

/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "../";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 247);
/******/ })
/************************************************************************/
/******/ ({

/***/ 247:
/***/ (function(module, exports) {

;

(function (hm) {
  hm.Device = function () {};

  hm.Device.prototype.ua = function () {
    return navigator.userAgent;
  };

  hm.Device.prototype.uaContains = function (fragment, ua) {
    if (!ua) ua = this.ua();
    return ua.toLowerCase().indexOf(fragment) > -1;
  };

  hm.Device.prototype.iPhone = function () {
    return this.uaContains('iphone');
  };

  hm.Device.prototype.iPod = function () {
    return this.uaContains('ipod');
  };

  hm.Device.prototype.iPad = function () {
    return this.uaContains('ipad');
  };

  hm.Device.prototype.ios = function () {
    return this.iPhone() || this.iPod() || this.iPad();
  };

  hm.Device.prototype.android = function () {
    return this.uaContains('android');
  };

  hm.Device.prototype.msie = function () {
    return this.uaContains('msie');
  };

  hm.Device.prototype.trident = function () {
    return this.uaContains('trident');
  };

  hm.Device.prototype.edge = function () {
    return this.uaContains('edge');
  };

  hm.Device.prototype.ms = function () {
    return this.msie() || this.trident() || this.edge();
  };

  hm.Device.prototype.mac = function () {
    if (navigator.platform.toUpperCase().indexOf('MAC') !== -1) {
      return true;
    }
  };

  hm.Device.prototype.win = function () {
    if (navigator.platform.toUpperCase().indexOf('WIN') !== -1) {
      return true;
    }
  };

  hm.Device.prototype.linux = function () {
    if (navigator.platform.toUpperCase().indexOf('LINUX') !== -1) {
      return true;
    }
  };

  hm.Device.prototype.app = function () {
    //window.isMobileApp to fake app behaviour
    return this.uaContains('targetapp_') || window.isMobileApp;
  };

  hm.device = new hm.Device();
})(window.hm);

/***/ })

/******/ });
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "../";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 249);
/******/ })
/************************************************************************/
/******/ ({

/***/ 249:
/***/ (function(module, exports) {

;

(function (hm) {
  'use strict';

  hm.Tracking = {
    debug: false,
    logger: function logger() {
      this.debug && typeof console !== 'undefined' && console.log.apply(console, arguments);
    },
    link: function link(data) {
      // Save the utag data to session
      // If the tracking is cancelled due to page redirect then tracking for the click will be done on the following page
      window.sessionStorage.setItem('utagClickData', JSON.stringify(data));
      var method = hm.device.app() ? 'event' : 'link';
      this.tracker(method, data);
    },
    view: function view(data) {
      this.tracker('view', data);
    },
    appPageView: function appPageView(data) {
      if (hm.device.app()) {
        this.tracker('appPageView', data);
      }
    },
    tracker: function tracker(method, data) {
      var self = this;
      var forceUtagLogic = hm.device.iPhone() && hm.options.forceUtagForIOS || hm.device.android() && hm.options.forceUtagForAndroid || hm.device.iPad() && hm.options.forceUtagForIOS; // Bridge for web analytics for mobile

      if (hm.device.app() && !forceUtagLogic) {
        var postData = {
          type: method,
          payload: data,
          purchase: $('.order-confirmation').length ? 1 : 0
        };

        if (hm.device.iPhone()) {
          hm.waitUntil(function () {
            return window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.NativeTracker && window.webkit.messageHandlers.NativeTracker.postMessage;
          }).done(function () {
            window.webkit.messageHandlers.NativeTracker.postMessage(postData);
          }).fail(function () {
            if (method === 'appPageView') {
              method = 'view';
            }

            window.utag && window.utag[method] && window.utag[method](data);
          });
        } else if (hm.device.android()) {
          hm.waitUntil(function () {
            return window.NativeTracker && window.NativeTracker.postMessage;
          }).done(function () {
            window.NativeTracker.postMessage(JSON.stringify(postData));
          }).fail(function () {
            if (method === 'appPageView') {
              method = 'view';
            }

            window.utag && window.utag[method] && window.utag[method](data);
          });
        } else if (hm.device.iPad()) {
          hm.waitUntil(function () {
            return window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.NativeTracker && window.webkit.messageHandlers.NativeTracker.postMessage;
          }).done(function () {
            window.webkit.messageHandlers.NativeTracker.postMessage(postData);
          }).fail(function () {
            if (method === 'appPageView') {
              method = 'view';
            }

            window.utag && window.utag[method] && window.utag[method](data);
          });
        } else {
          self.logger('Unsupported device for analytics bridge for mobile');
        }
      } else {
        hm.waitUntil(function () {
          var utagIsReady = window.utag && typeof window.utag[method] === 'function';
          self.logger('**Tracking** is utag ready?', utagIsReady);
          return utagIsReady;
        }).done(function () {
          window.sessionStorage.setItem('utagClickData', null);
          self.logger('**Tracking** window.utag.link', data);
          window.utag[method](data);
        });
      }
    }
  }; // Trigger the cta link tracking in case it was missed due to page redirect

  try {
    var utagClickData = JSON.parse(window.sessionStorage.getItem('utagClickData'));

    if (utagClickData) {
      hm.Tracking.link(utagClickData);
      window.sessionStorage.setItem('utagClickData', null);
    }
  } catch (e) {
    console.error('Error parsing', e.message);
    console.log(window);
  }
})(window.hm);

/***/ })

/******/ });
function setOsaParameters(area, type, productId){
	var areaAttr = "osa_area_"+productId;
	var typeAttr = "osa_type_"+productId;
	var osaArea = "";
	var osaType = "";
	if(area != null){
		osaArea = area;
	}
	if(type != null){
	    osaType = type;
	}
	if(sessionStorage){
		sessionStorage.setItem(areaAttr,osaArea);
		sessionStorage.setItem(typeAttr,osaType);
	}else if(localStorage){
		localStorage.setItem(areaAttr,osaArea);
		localStorage.setItem(typeAttr,osaType);
	}
	}
function setVCParameter(vc, productId){
	var vcAttr = "vc_"+productId;
	var virtualCategory = "";
	if(vc != null){
		virtualCategory = vc;
	}
	if(sessionStorage){
		sessionStorage.setItem(vcAttr,virtualCategory);
	}else if(localStorage){
		localStorage.setItem(vcAttr,virtualCategory);
	}
}
function setNotificationTicket(ticket, articleId) {	
	if(sessionStorage){
		sessionStorage.setItem("ticket_" + articleId, ticket);
	}else if(localStorage){
		localStorage.setItem("ticket_" + articleId, ticket);
	}	
}
function notifyClick(ticket, productId, praType) {	
	setNotificationTicket(ticket,productId);
	
	setVCParameter(praType,productId);
	var categoryId = "";
	if(typeof(utag_data) != "undefined"){
		categoryId = utag_data.category_id;
	}
	if(praType != "PRA1"){
		setOsaParameters(categoryId,'SMALL',productId);
	}
	
}
function sendNotification(locale, articleId, type, pageType){
	var tick = "";
	var src = "";
	var params = {};
	var local = locale.toLowerCase();
	if(type === "click"){
		if(sessionStorage){
			tick = sessionStorage.getItem("ticket_" + articleId);
			src = sessionStorage.getItem("notSrc_" + articleId);
			sessionStorage.removeItem("ticket_" + articleId);
			sessionStorage.removeItem("notSrc_" + articleId);
		} else if(localStorage){
			tick = localStorage.getItem("ticket_" + articleId);
			src = localStorage.getItem("notSrc_" + articleId);
			localStorage.removeItem("ticket_" + articleId);
			localStorage.removeItem("notSrc_" + articleId);
		}
		if(src !== "SDP" && src !== "SEARCH"){	
			if(pageType.slice(-2)==="AS"){
				src = pageType;
			}else{
				src = "DEFAULT";
			}
		}
		if(tick !== "" && tick !== null){
			params = {ticket : tick};
		}
		else{
			params = {variant_key : articleId, notification_src : pageType};
		}
	}else{
		
		params = {variant_key : articleId, notification_src : pageType};
	}
	$.ajax({
        url: '/'+ local +'/pra/notification/'+type,
        type: 'POST',
        data: JSON.stringify(params),
        contentType:'application/json',
        success: function() {
        },
        error: function(){
        }
      });
	
}
//create a utagCookie passing parameter
function createUtagCookie(conversionId, conversionCategory, conversionStep){
	if(hm.cookies != undefined){
		hm.cookies.createCookie("utagCookie",
				"\"{\\\"conversion_id\\\":\\\"" + conversionId +
				"\\\",\\\"conversion_category\\\":\\\"" + conversionCategory + 
				"\\\",\\\"conversion_step\\\":" + conversionStep +  "}\""
			, 1);
	}	
}

//to send the utag.view parameter
function utagTrackFormView(categoryId, categoryPath, pageid , displayLanguage, selectedmarket) {
	hm.Tracking.view({
        display_language : displayLanguage,
        page_id : pageid,
        category_id : categoryId,
        category_path : categoryPath,
        selected_market : selectedmarket,
        touchpoint: getTouchpoint()
   });
}


//checking if is user logged in
function checkifLogged(appUserCookie){
	var logged = false; 
    var jsonUserCookie = jQuery.parseJSON(appUserCookie);
  	if(typeof(jsonUserCookie) == "string") {
  		jsonUserCookie = jQuery.parseJSON(jsonUserCookie);
    }
	var hybrisuuid = jsonUserCookie.hybris_uuid;
	var customerkey = jsonUserCookie.customer_key;
	if(hybrisuuid && customerkey){
		logged = true;
	}
    return logged;
}

//get variable from user cookie
function readCookieValueForTealium(appUserCookie){
	var values = [];
	var customerId = "";
	var hybrisUuid = "";
	var postalCode = "";
	var town = "";
	//set only in china
	var state = "";
	//default value if we are not loyalty
	var loyaltyLevel = "";
	var hasChildren = "";
	var fashionNews = "";
	var customerBpid = "";

	var jsonCookie = jQuery.parseJSON(appUserCookie);
  	if(typeof(jsonCookie) == "string") {
        jsonCookie = jQuery.parseJSON(jsonCookie);
    }
  	
  	if(jsonCookie.customer_id){
  		customerId = jsonCookie.customer_id;
  	}
  	if(jsonCookie.hybris_uuid){
  		hybrisUuid = jsonCookie.hybris_uuid;
  	}
  	if(jsonCookie.zc){
  		postalCode = jsonCookie.zc;
  	}
  	if(jsonCookie.tn){
  		town = jsonCookie.tn;
  	}
  	if(jsonCookie.bpid){
  		customerBpid = jsonCookie.bpid;
    }
  	if(jsonCookie.st){
  		state = jsonCookie.st;
  	}

  	values[0]= customerId;
    values[1]= hybrisUuid;
    values[2]= postalCode;
    values[3]= town;
    values[4]= state;
    values[5]= loyaltyLevel;
    values[6]= hasChildren;
    values[7]= fashionNews;
    values[8]= customerBpid;

    return values;
}

//we have id for indentify /club/join button
function setPromotionsBannerFields(){
   if( ($("#hmc_isjoinbutton_banner").length > 0) || ($("#hmc_isjoinbutton_voucher").length > 0) || ($("#hmc_isjoinbutton_checkout").length > 0)){	   
               utag_data.promotion_id  =  ['Campaign'];
               utag_data.promotion_name = ['Loyalty'];
               utag_data.promotion_creative =  ['Teaser'];
               utag_data.promotion_position = [utag_data.page_id];
   }
}


function setLoyaltyFields(callBackTealium){
	//if we are loyalty market we provide additional information from getMember function - retry 5 seconds
	//else we can call tealium with the data already added from setCustomerData function
	var $header = $('header.header-global'),
	isLoyaltyEnabled = $header.data('loyalty');
	if(isLoyaltyEnabled == true ) {		
		//get hmClubGetMemberData
		var memberfields;
		var memberstatus;	
		//adding promotion fields only if join banner is precent
		setPromotionsBannerFields();
		//max time of retry ping for getMember();
		var countdown = 5;
		var timer = setInterval(function() {
		--countdown;
		var lc = localStorage.getItem("hmClubGetMemberData");
			if (lc != null || lc != null){
				memberfields = JSON.parse(lc);
				memberstatus = memberfields.status;		
				//set right value of memeber status
				if(memberstatus != undefined && memberstatus !=""){					
					if((memberstatus == 'NON_MEMBER') || (memberstatus == 'SUBSCRIBER')){
						utag_data.customer_loyalty_level = '0';
					}
					if((memberstatus == 'FULL_MEMBER') || (memberstatus == 'PENDING') || (memberstatus == 'PENDING_ABORTED')){
						utag_data.customer_loyalty_level = '1';
					}
					if(memberstatus == 'INITIAL'){
						utag_data.customer_loyalty_level = '2';
					}

				}
				if(memberfields.frequencyTextClubNews != undefined){
					if(memberfields.frequencyTextClubNews !== 'none'){
						utag_data.customer_fashion_news = 'Y'
					}
					if(memberfields.frequencyTextClubNews == 'none'){
						utag_data.customer_fashion_news = 'N';
					}		
				}
				if(memberfields.hasChildren != undefined){
					if(memberfields.hasChildren === true){
						utag_data.customer_has_children = 'Y';
					}
					if(memberfields.hasChildren === false){
						utag_data.customer_has_children = 'N';
					}
				}
	            //we set and we can close the loop
				clearTimeout(timer);
				callBackTealium();
			}
			if(countdown<0){
				clearTimeout(timer);
				callBackTealium();
			}
		}, 1000);	
	}else{
		callBackTealium();
	}
}




//set the customer data.
function setCustomerData(appUserCookie){
	var cookieValues = readCookieValueForTealium(appUserCookie);	
	
	utag_data.customer_id  =  cookieValues[0];
	utag_data.customer_email = cookieValues[1];
	utag_data.customer_zip =  cookieValues[2];
	utag_data.customer_city = decodeURIComponent(cookieValues[3]);
	utag_data.customer_state  =  decodeURIComponent(cookieValues[4]);
	utag_data.customer_country = decodeURIComponent(utag_data.selected_market);
	//set empty even if we are not in loyalty market
	utag_data.customer_loyalty_level = cookieValues[5];
	utag_data.customer_has_children = cookieValues[6];
	utag_data.customer_fashion_news = cookieValues[7];
	utag_data.customer_bpid = cookieValues[8];
}

function utagTealiumTrack(callBackTealium){
	if(hm.cookies == undefined){
		hm.cookies = new hm.Cookies();
	}
	var isUserLogged = false;
	var appUserCookie = null;
	appUserCookie = hm.cookies.readCookie('userCookie');
    
	if(appUserCookie != null){
		isUserLogged = checkifLogged(appUserCookie);
	}
	
	var appUtagCookie = null;
	appUtagCookie = hm.cookies.readCookie('utagCookie');
	
	if(appUserCookie != null && isUserLogged == true){
		utag_data.customer_status = 'TRUE';
    }else {
		utag_data.customer_status = 'FALSE';
	}
    if(isUserLogged == true && hm.cookies != undefined && hm.cookies.readCookie('clubFullJoinCookie') != null){
		utag_data.customer_club_member = 'TRUE';
	}
	else if(isUserLogged == true && hm.cookies != undefined && hm.cookies.readCookie('clubFullJoinCookie') == null){
		utag_data.customer_club_member = 'FALSE';
	}
	var jsonCookie = jQuery.parseJSON(appUserCookie);
	if(typeof(jsonCookie) == "string") {
        jsonCookie = jQuery.parseJSON(jsonCookie);
    }
	if(isUserLogged == true && jsonCookie.customer_club_level != null && hm.cookies != undefined && hm.cookies.readCookie('clubFullJoinCookie') != null){
		var cust_club_level = parseInt(jsonCookie.customer_club_level)+1;
		utag_data.customer_club_level = "tier "+cust_club_level;
    }
	
    if(isUserLogged == true){
    	setCustomerData(appUserCookie);
		hm.cookies.eraseCookie("utagCookie");	
		//scenario for loyalty market
		setLoyaltyFields(callBackTealium);
     }else{
	    setPromotionsBannerFields();		
    	//standard call
	    callBackTealium();
     }
    
}


//for utag.view login pop-up desktop - on Account component there is function that call it
function removeloginparam(){
  if(sessionStorage.getItem('lastOpened')) {
		sessionStorage.removeItem('lastOpened');
  }
}

//to check banner and vaucher in H&MClub page Adobe and when it is included in Hybris
function utagLinkBanner(){
	hm.Tracking.link({
		event_type : 'PROMOTIONCLICK',
	   	promotion_id : ['Campaign'],
       	promotion_name : ['Loyalty'],
	   	promotion_creative : ['Teaser'],
     	promotion_position : [ utag_data.page_id ]	
	});
	createUtagCookie("Registration : Join H&M Club", "Registration", 1);
}


//Order Confirmation page utag link for hybris page when they include it.
function utagLinkOrderConfirmation(){
	hm.Tracking.link({
		event_type : 'PROMOTIONCLICK',
	   	promotion_id : ['Campaign'],
       	promotion_name : ['Loyalty'],
	   	promotion_creative : ['Teaser'],
     	promotion_position : [ utag_data.page_id ]	
	});
}

//Tracker function when the user has checked the check box for fashion news and clicks on “join/subscribe” in registration form.
function trackSignup(){
  hm.Tracking.link({
		  event_type : 'NEWSLETTER_SIGNUP', 
		  event_category : 'Newsletter', 
		  event_id : 'Signup', 
		  newsletter_signup: "1" 
		 });
}

// Tracker fuction when the user submit "Join Us" 
function trackJoinClub(isModal) {
	console.log("trackJoinClub initiate");

	if(typeof utag_data !== 'undefined'){
		var label = 'Header';
		if(utag_data.page_id == "CHECKOUT : LOGIN" && !isModal){
			label = 'Checkout Login' 
		}
		if(utag_data.page_id == "CART" && !isModal){
			label = 'Shopping bag' 
		}
		if(utag_data.page_id == "LOGIN" && !isModal){
			label = 'Login' 
		}
		
		hm.Tracking.link({ 
			event_type: 'CLUB_JOIN_INITIATE', 
			event_category: 'Club', 
			event_id: 'Join club initiated',event_label: label
		});

	}
	
}

//ACCOUNT COMPONENT
//function to call correct view function, if both open no view is called
function trackLinkAccountHeader() {
if(!$(".signin-rollover-login").is(':visible') && !$(".signin-rollover-join").is(':visible')){
    if(sessionStorage.getItem('lastOpened')) {
        if(sessionStorage.getItem('lastOpened') == 'login'){
            utagTrackFormView("LOGIN", "LOGIN", "Login : Header", localeInfo.locale, localeInfo.country);
        }
        else{
            utagTrackFormView("REGISTER", "REGISTER", "Registration : Header", localeInfo.locale, localeInfo.country);
        }

    }
    else{
	sessionStorage.setItem('lastOpened', 'login');
        utagTrackFormView("LOGIN", "LOGIN", "Login : Header", localeInfo.locale, localeInfo.country);
	}
}
}

//called on click of the ENROLL button from login pop-up

function trackClickButtonCreateNewAccount() {						
    sessionStorage.setItem('lastOpened', 'join');
utagTrackFormView("REGISTER", "REGISTER", "Registration : Header", localeInfo.locale, localeInfo.country);
}

//called on click of the BACK TO LOGIN button from join pop-up 

function trackClickButtonBack() {									
    sessionStorage.setItem('lastOpened', 'login');
utagTrackFormView("LOGIN", "LOGIN", "Login : Header", localeInfo.locale, localeInfo.country);
}


//called when Logout button is clicked
									
function trackLogout() {										
	hm.Tracking.link({
		event_type : 'LOGIN_LOGOUT',
        event_id : 'Logout',
        event_category : 'Login'
    });
}

//called when Join US button is called and update hidden field
function trackSubmitJoin(isModal) {
	if(hm.options.isLoyaltyMarket){
		trackJoinClub(isModal);
	}
	
}

function utagHMNewsLetterSignupEvent(){
	hm.Tracking.link({
		event_type : 'NEWSLETTER_SIGNUP',
		event_category : 'Newsletter',
		event_id : 'Signup',
		newsletter_signup : '1'
	});
}

//on successful club join
function utagTrackClubJoinSuccess(isModal){
  console.log("utagTrackClubJoinSuccess");
	if(typeof utag_data !== 'undefined'){
		var label = 'Header';
		if(utag_data.page_id == "CHECKOUT : LOGIN" && !isModal){
			label = 'Checkout Login' 
		}
		if(utag_data.page_id == "CART" && !isModal){
			label = 'Shopping bag' 
		}
		if(utag_data.page_id == "LOGIN" && !isModal){
			label = 'Login' 
		}


		hm.Tracking.link({
				event_type : 'CLUB_JOIN_SUCCESS',
	            event_id : 'Join club succeeded',
	            event_category : 'Club',
	            event_label : label
		 });
	}
}


//on club join failure
function utagTrackClubJoinFailure(){
	 console.log("utagTrackClubJoinFailure");
	 hm.Tracking.link({
	  event_type : 'CLUB_JOIN_ERROR',
	  event_id : 'Join club unsuccessful',
	  event_category : 'Club',
	  event_label : 'Club Join Error'
	 });
}


function utagClubAndFNSignupEvent(){
	hm.Tracking.link({
			event_type: 'CLUB_SIGNUP',
			event_category: 'Club',
			event_id: 'Signup',
			club_signup: '1',
			newsletter_signup: '1'
	});
}

function utagRakutenRedirectLinkEvent(data){
    var affReferrer = [];
    var affNetwork = [];
    var affPublisher = [];
    var affSiteId = [];
    var affTargetPage = [];
    affReferrer.push(data.referrer);
    affNetwork.push(data.ranMID);
    affPublisher.push(data.ranEAID);
    affSiteId.push(data.ranSiteID);
    affTargetPage.push(data.url);
    hm.Tracking.link({
        aff_referrer : affReferrer,
        aff_network : affNetwork,
        aff_publisher : affPublisher,
        aff_site_id : affSiteId,
        aff_target_page : affTargetPage
    });
  }

function utagRakutenRedirectLink(){
	hm.cookies = hm.cookies || new hm.Cookies();
    var data;
    var cookieName = "affiliateCookie";
    
    data = hm.cookies.readCookie(cookieName);
    
    if((data !== null) && (typeof(data) !== 'undefined')){
        //Converting string data to json object
        var jsonObject = JSON.parse(data);
        if(typeof(jsonObject) == 'string'){
            jsonObject = JSON.parse(jsonObject);
        }
        if ((!jsonObject.rakutenExecuted)){
            utagRakutenRedirectLinkEvent(jsonObject);
            jsonObject.rakutenExecuted = true;
            var duration = jsonObject.cookieDuration/60;
            hm.cookies.createCookie(cookieName,JSON.stringify(jsonObject),null,duration,true,".hm.com");
        }
    }
}

function utagSocialLoginEvent(){
	hm.cookies = hm.cookies || new hm.Cookies();
    var cookieName = "socialLoginTracking";
    var data = hm.cookies.readCookie(cookieName);
    
    if ((data !== null) && (typeof(data) !== 'undefined')){
        var jsonObject = JSON.parse(data);
        if (typeof(jsonObject) == 'string'){
            jsonObject = JSON.parse(jsonObject);
        }
        if (!jsonObject.tracked){
        	var id = jsonObject.action + ' success';
	        hm.Tracking.link({
	        		event_type: 'LOGIN_SOCIAL_SUCCESS',
	        		event_category: "Social login",
	        		event_id:  id,
	        		event_label: jsonObject.initiator,
	        		customer_social_id: jsonObject.social_id,
	        		customer_social_service: jsonObject.social_name
	        });
	        jsonObject.tracked = true;
	        hm.cookies.createCookie(cookieName, JSON.stringify(jsonObject));
        }
    }
}

hm.eventBus.addListener('loaded:hm-vanilla-application-js', function() {
	utagRakutenRedirectLink();
	utagSocialLoginEvent();
});

$(function() {

    const priceModuleSelector = '.cq-pricemodule';

    hm.eventBus.addListener('loaded:hm-vanilla-general-css', function() {
        $('hm-campaign-teaser, hm-membersplit, hm-segmented-teaser, article.teaser-media').each(function() {
            const config = { childList: true, subtree: true };
            const observer = new MutationObserver(callback);
            observer.observe($(this).context, config);
        });
    });

    const transformInPercentage = (target) => {
        var i = 1;
        $(target).find(priceModuleSelector).each(function () {
            var elm = $(this),
                pW = parseFloat(elm.parent().css("width"), 10),
                pH = parseFloat(elm.parent().css("height"), 10),
                piW = parseFloat(elm.data('container-initial-width'), 10),
                piH = parseFloat(elm.data('container-initial-height'), 10),
                p = elm.position(),
                w = parseFloat(elm.css("width"), 10),
                h = parseFloat(elm.css("height"), 10);

            if (isNaN(piW)) {
                piW = pW;
            }
            if (isNaN(piH)) {
                piH = pH;
            }

            var i = 1;
            if (p.left > 0 || p.top > 0) {
                elm.css({
                    top: Math.ceil(p.top / piH * 1E2) + '%',
                    left: Math.ceil(p.left / piW * 1E2) + '%',
                    position: 'absolute'
                });
            } else {
                elm.css({top: (i++ * 20) + 'px', left: (i * 20) + 'px', position: 'absolute'});
            }

        });
    };

    const callback = (mutationList, observer) => {
        for (const mutation of mutationList) {
            let elm = $(mutation.target).find('article.js-pricemodule-positioning .cq-pricemodule');
            if (elm.length === 0) {
                elm = $(mutation.target).find('.cq-pricemodule');
            }
            if (mutation.type === "childList" && elm.length && elm.attr('style').indexOf('%') === -1) {
                transformInPercentage(mutation.target);
            }
        }
    };
    
});
function getLocaleValue() {
  const localeRegex = /^([a-zA-Z]{2})[-_]([a-zA-Z]{2})$/
  const locale = window.location.pathname.split('/')[1] //getting locale from URL
  const isLocale = localeRegex.test(locale)
  if (!isLocale) 
    return null
  if (locale) {
    return locale
  }
  else{
    return localeInfo && localeInfo.locale //fallback
  }
}

function subscribeNewsLetter(hybrisURL,thankYoupagePath, confirmationPage)  {  
      trackSignup();
      var emailAction='',email='',kid='',gender='0',postalCode='',enablePersonal='',frequency='';
      emailAction = "subscribe";
      if(!thankYoupagePath){
        thankYoupagePath = getThankYouPage($('#thankyoupage').val());
      }
      enablePersonal = $('#enablePersonal').val();
      email = $("#txt-email").val();
      kid = $('#newsletter-i-am-kids').is(':checked');
      frequency = $('#cs-fashion-news').is(':checked');

      if(enablePersonal == 'true')
      {    
       gender = $('[name=newsletter-i-am-gender]:checked').val() == undefined ? 0 : $('[name=newsletter-i-am-gender]:checked').val();
       postalCode =  $('#txt-postal-code').val() || "";
      }
       var requestObj = '';
       var currentLocale = getLocaleValue();

	 if(currentLocale === 'hw_il'){
        var prefix = "+972";
        var cellPhone = $("#txt-phonenumber").val();
        var birthDay = $("#dob-day").val() || "";
        var birthMonth = $("#dob-month").val() || "";
        var birthYear = $("#dob-year").val() || "";
        requestObj = '{"email":"' + email + '","firstName":"","lastName":"","gender":' + gender  +  ',"postalCode":"' + postalCode +  '","kids":"' + kid + '","frequency":"' + frequency  + '","prefix":"' + prefix +'","cellPhone":"' + cellPhone + '","birthYear":"' + birthYear + '","birthMonth":"' + birthMonth + '","birthDay":"' + birthDay + '"}';
	  }else{
        requestObj = '{"email":"' + email + '","firstName":"","lastName":"","gender":' + gender  +  ',"postalCode":"' + postalCode +  '","kids":"' + kid + '","frequency":"' + frequency +'","birthYear":"","birthMonth":"","birthDay":""}';
      }
        $.ajax({
            type: "POST",
            url: hybrisURL,
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                if (data) {
                 var statusCode = data.responseStatusCode;
                 var alreadyExists = data.responseAlreadyExists;
                 //var statusMessage = data.responseStatusMessage;
                 var doubleOptIn = data.responseDoubleOptIn;
                 var emailConfirmed = data.responseEmailConfirmed;
                 
                 if(data.subscriberEmail){
                	 sessionStorage.setItem('fn.subscriber.email.hm',data.subscriberEmail);
                 }
                 
                 if(confirmationPage){
                	 if(doubleOptIn && !emailConfirmed){
                		 $("#fashion-news-first-box").remove();
                		 $("#fashion-news-second-box").remove();
                		 $("#fashion-news-third-box").removeClass("ng-hide");
                		 
                	 } else {
                		 $("#fashion-news-first-box").remove();
                		 $("#fashion-news-third-box").remove();                		
                		 $("#fashion-news-second-box").removeClass("ng-hide");
                	 }
                 } else {              
	                 if (statusCode == 'ok' && alreadyExists == false && doubleOptIn == false) {
	                	 window.location = (thankYoupagePath + "?statusCode=success");
	                 } else if (statusCode == 'ok' && alreadyExists == true && doubleOptIn == false) {
	                	 window.location = (thankYoupagePath + "?statusCode=alreadySubscribed");
	                 } else if (statusCode == 'ok' && doubleOptIn == true && alreadyExists == true && emailConfirmed == false) {
	                	 window.location = (thankYoupagePath + "?statusCode=onlyConfirmationNeeded");
	                 } else if (statusCode == 'ok' && doubleOptIn == true && alreadyExists == false && emailConfirmed == false) {
	                	 window.location = (thankYoupagePath + "?statusCode=confirmationMailSent");
	                 } else if (statusCode == 'ok' && doubleOptIn == true && alreadyExists == true && emailConfirmed == true) {
	                	 window.location = (thankYoupagePath + "?statusCode=alreadySubscribed");
	                 } else {
	                	 window.location = (thankYoupagePath + "?statusCode=error");
	                 }              
                }
              }
            },
            data: requestObj
            });  

   }


  function getThankYouPage(path){
      var thankyou =path;
      if (thankyou != null && thankyou != '') {
           if(thankyou.indexOf('.html') < 0)
           {  
               thankyou = thankyou + '.html';

           }
      } else {
          thankyou = window.location.pathname.replace("newsletter", "thank-you");
          var endIndex = thankyou.indexOf(".html") + (".html").length;
          thankyou = thankyou.substring(0, endIndex);

      }
              return thankyou;
  }
//Tracker function when the user sign-up newsletter.
  function trackSignup(){
	  hm.Tracking.link({ 
		  event_type : 'NEWSLETTER_SIGNUP', 
		  event_category : 'Newsletter', 
		  event_id : 'Signup', 
		  newsletter_signup: "1" 
		 }); 
  }
function optoutform() {
 var URL = document.querySelector('#opt-out-form').dataset.url;
 document.querySelector('.form_button_submit').disabled = true;
 var name =  $('#name').val();
 var email = $('#email').val();
 var brand = $('#brand').val();
 var contactnumber = $('#phone').val();
 var requestObj = '{"name":"' + name + '","email":"' + email  + '","brand":"' + brand + '","contactNumber":"' + contactnumber +'"}';
    $.ajax({
        type: "POST",
        url: URL,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: requestObj,
    success: function (data) {
		document.querySelector('.form_button_submit').disabled = false;
		document.getElementById("opt-out-form").reset();
        $('.thankyou_message').show();
    },
	error: function (error) {
		document.querySelector('.form_button_submit').disabled = false;
        }
    });
}

function thankyouhide() {
    $('.thankyou_message').hide();
    return false;

}
var localeData = {
   "macau": {
       "locale": ["en_MO", "zh_MO"],
       "url": "https://hm.delivery-status.com/mo/en"
    },
  "philippines": {
      "locale": ["en_PH"],
      "url": "https://hm.delivery-status.com/ph/en"
    },
   "taiwan": {
       "locale": ["en_TW", "zh_TW"],
       "url": "https://hm.delivery-status.com/tw/zh"
    }
}

function getTrackingUrl(orderNo,trackingUrl) {
  var localeInfo = hm.cookies.readCookie('HMCORP_locale');
  var isLocalInList = Object.values(localeData).find(data => data.locale.includes(localeInfo));
  if(isLocalInList) {
    return isLocalInList.url+'/?orderNo='+orderNo;
  }
  return trackingUrl+'/?orderNo='+orderNo;
}
function trackOrder() {
   var trackingUrl = document.getElementById('trackingurl').value;
   var orderNo = document.getElementById('orderno').value;
	if (orderNo === "") {
        var el = document.querySelector('#order-no-required-error');
 		el.classList.remove("hidden");
		return;
    }					 															 
    if (orderNo !== "" && trackingUrl !== "") {
      var anchor = document.createElement('a');
      anchor.href = getTrackingUrl(orderNo,trackingUrl)
      anchor.target="_blank";
      hm.Tracking.link({
                event_type : 'ORDERTRACKINGCLICK',
                event_id : 'ORDER',
                event_category : 'ORDERSELFSERVICE'
     });
      anchor.click()
    }
}
function returnRequest(href) {
     hm.Tracking.link({
                event_type : 'RETURNREGISTERCLICK',
                event_label : href,
                selected_market : localeInfo.country,
                touchpoint: getTouchpoint(),
                event_id : 'RETURN',
                event_category : 'RETURNSELFSERVICE'
     });
     return true;
}
function orderValidation(){
var el = document.getElementById('orderno');
var errOrderDiv = document.querySelector('#order-no-required-error');
el.addEventListener('keyup', (event) => {
console.log(document.getElementById("orderno").value.length)
el.value === "" ?  errOrderDiv.classList.remove("hidden") :  errOrderDiv.classList.add("hidden");
});
}	
function numberValidation(val){
    document.getElementById('orderno').value =  val.replace(/[^0-9]/g, '');
}		
!function(t) {
	var i = t(window);
	t.fn.visible = function(t, e, o) {
		if (!(this.length < 1)) {
			var r = this.length > 1 ? this.eq(0) : this, n = r.get(0), f = i
					.width(), h = i.height(), o = o ? o : "both", l = e === !0 ? n.offsetWidth
					* n.offsetHeight
					: !0;
			if ("function" == typeof n.getBoundingClientRect) {
				var g = n.getBoundingClientRect(), u = g.top >= 0 && g.top < h, s = g.bottom > 0
						&& g.bottom <= h, c = g.left >= 0 && g.left < f, a = g.right > 0
						&& g.right <= f, v = t ? u || s : u && s, b = t ? c
						|| a : c && a;
				if ("both" === o)
					return l && v && b;
				if ("vertical" === o)
					return l && v;
				if ("horizontal" === o)
					return l && b
			} else {
				var d = i.scrollTop(), p = d + h, w = i.scrollLeft(), m = w + f, y = r
						.offset(), z = y.top, B = z + r.height(), C = y.left, R = C
						+ r.width(), j = t === !0 ? B : z, q = t === !0 ? z : B, H = t === !0 ? R
						: C, L = t === !0 ? C : R;
				if ("both" === o)
					return !!l && p >= q && j >= d && m >= L && H >= w;
				if ("vertical" === o)
					return !!l && p >= q && j >= d;
				if ("horizontal" === o)
					return !!l && m >= L && H >= w
			}
		}
	}
}(jQuery);

var promotionTracking = promotionTracking || {};
var isPraBroughtWith = false;
var isPraStyleWith = false;

(function(pt) {

	pt.trackedElementsInPage = [];
	pt.swipers = {};
	pt.isViewClick = false;
	pt.viewClick = function(e) {
		pt.isViewClick = true;
		setTimeout(function() {
			pt.isViewClick = false;
		}, 1000);
	};

	pt.viewSwipe = function(e) {
		clearTimeout(pt.swipeTimeOut);
		pt.isViewClick = true;
		console.log("got the swipe");
		pt.swipeTimeOut = setTimeout(function() {
			pt.isViewClick = false;
			console.log("swipe freed");
		}, 1000);
	};
	
	pt.initialized = false;

	pt.initialize = function() {
		if(!pt.initialized){
			pt.initialized = true;
			pt.debugTracking = false;

			pt.interval = setInterval(
				function() {
					//console.log("promotion Tracking started");
					var seed = Math.floor(Math.random() * 1E7);
					$('*[data-view-tracking="true"]:not([data-view-tracking-added="true"])')
							.each(
									function() {
										var id = "track_" + ++seed;
										var $elm = $(this);
										$elm.attr('id', id);
										var elemInfo = {
											id : id,
											elm : $elm,
											type : $elm
													.attr('data-activity-type') ? $elm
													.attr('data-activity-type')
													: "",
											code : $elm
													.attr('data-activity-code') ? $elm
													.attr('data-activity-code')
													: "",
											creative : $elm
													.attr('data-promotion-creative') ? $elm
													.attr('data-promotion-creative')
													: "",	
											position : $elm
													.attr('data-promotion-position') ? $elm
													.attr('data-promotion-position')
													: "",
											percentage : $elm
													.attr('data-tracking-percentage') ? $elm
													.attr('data-tracking-percentage')
													: "",
											promotionType : $elm
													.attr('data-promotion-type') ? $elm
													.attr('data-promotion-type')
													: "default",		
											segment : $elm
													.attr('data-promotion-segment') ? $elm
													.attr('data-promotion-segment')
													: "",
											top : $elm.offset().top,
											left : $elm.offset().left,
											width : $elm.width(),
											height : $elm.height(),
											tracked : false,
											// [PS] boolean needed to check if
											// we are in the first new
											// arrival product; if so, we have
											// to do the call
											viewTrackingEnabled : $elm
													.attr('data-newarrivals-first-article') ? $elm
													.attr('data-newarrivals-first-article') === "true"
													: true
										};
										pt.trackedElementsInPage.push(elemInfo);

										var $ctas;
										// if we are in the new arrival case for
										// now ew have to take parent
										if ($elm
												.attr('data-newarrivals-first-article')) {
											// console.log("new arrival mode
											// ON");
											$ctas = $elm.parent().find(
													".cta, .cta-overlay");
										} else {
											$ctas = $elm
													.find(".cta, .cta-overlay");
										}

										// [PS] code to manage cta-list outside
										// article, moved by application.js
										// ( mobile case )
										//console.log("Checkink if we are in case cta-list outside");
										if ($elm.next().hasClass("cta-list")
												&& $elm.next()
														.hasClass("moved")) {
											//console.log("we are in case mobile cta list");
											$ctas = $elm.next().find(
													".cta, .cta-overlay");
										}

										$ctas
												.each(function() {

													var $this = $(this);
													// console.log($this + " "
													// + $this.html());
													if ($this
															.data("cta-tracking") == true) {
														$this
																.on(
																		'click',
																		function(
																				e) {

																			var payload = {
																				event_type : 'PROMOTIONCLICK',
																				promotion_name : [ elemInfo.type ],
																				promotion_id : [ elemInfo.code ],
																				promotion_creative : [ elemInfo.creative ],
																				promotion_page_id : [ $this
																						.data('promotion-page-id') ? $this
																						.data('promotion-page-id')
																						: "" ],
																				promotion_page_category : [ $this
																						.data('promotion-page-category') ? $this
																						.data('promotion-page-category')
																						: "" ],
																				promotion_type : [ elemInfo.promotionType],
																				promotion_segment: [ elemInfo.segment] 
																			};

																			hm.Tracking.link(payload);
																			if (pt.debugTracking) {
																				console.log("CTA utag.link sent with payload:");
																				console.log(payload);
																			}
																		});
													}
												});

										var $swiperParent = $elm
												.closest(".swipe-container.teaser-swipe");
										if ($swiperParent.length) {
											var swiperid = $swiperParent
													.attr("id");
											if (!swiperid) {
												swiperid = "swi_"
														+ Math
																.floor(Math
																		.random() * 1E7);
												$swiperParent.attr("id",
														swiperid);
											}
											
											var isMobile = window.getTouchpoint()=='MOBILE' ? true : false;

											if (!pt.swipers[swiperid]) {
												pt.swipers[swiperid] = $swiperParent;
												$swiperParent
														.find(
																".swipe-pagination-button")
														.on('click',
																pt.viewClick);
												if(isMobile){
													$swiperParent.on(
															'touchmove',
															pt.viewSwipe);
												} else {
													$swiperParent
														.find(
																".swipe-navigation-prev")
														.on(
																'click',
																pt.viewClick);
													$swiperParent
														.find(
																".swipe-navigation-next")
														.on(
																'click',
																pt.viewClick);
												}
											}
										}
										console.log("data added");
									$elm.attr("data-view-tracking-added","true");
								});
				}, 1000);
		}
	}

	pt.initialize();
	
	pt.stop = function(){
		pt.trackedElementsInPage = [];
		clearInterval(pt.interval);
		clearInterval(pt.checkInterval);
	}

	pt.checkInterval = setInterval(
			
			function() {
				//console.log("check view");
				var doc = document.documentElement, left = (window.pageXOffset || doc.scrollLeft)
						- (doc.clientLeft || 0), top = (window.pageYOffset || doc.scrollTop)
						- (doc.clientTop || 0), _wH = $(window).height(), _wW = $(
						window).width(), doTrackingCall, types = [], codes = [], creatives = [], positions = [], promotionType =[], promotionSegments = [];

				var dtss = sessionStorage.getItem('debugTracking'), debugTracking = window.debugTracking
						|| dtss;
				if (debugTracking == true) {
					if (dtss != true) {
						try {
							sessionStorage.setItem('debugTracking',
									debugTracking);
						} catch (err) {
						}
					}
				}

				for (var i = 0; i < pt.trackedElementsInPage.length; ++i) {
					var e = pt.trackedElementsInPage[i];
					// [PS] check if we are in new arrival cmp; if so have to do
					// the
					// call only for the first element

					if (e.viewTrackingEnabled) {
						e.top = e.elm.offset().top;
						e.left = e.elm.offset().left;
						{
							var isChrome = /Chrome/.test(navigator.userAgent)
							if(isChrome) {
							e.width=324;
							e.height=408;
							}else {
								e.width = e.elm.width();
								e.height = e.elm.height();
							}
						
						}

						if (debugTracking) {
							if (e.tracked) {
								$('#' + e.id).css('border', '3px solid red');
							} else {
								$('#' + e.id).css('border', '3px solid blue');
							}
						}

						if ((e.percentage != "undefined")
								&& (e.percentage != "")) {
							// var for percentage for each component trackable
							var compPercentage = ((e.top) + e.height
									* e.percentage);
							// track with percentage
							if (e.height > 0 && e.width > 0 && top >= top
									&& compPercentage <= top + _wH
									&& e.left >= left
									&& (e.left + e.width) <= left + _wW) {
								if (!e.tracked) {
									e.tracked = true;
									if (hm.eventBus) {
										hm.eventBus.emit('trackable-event', {
											type : 'pra_visualization',
											el : e.elm
										});
									}
								}
							}
						} else {
							if (e.height > 0 && e.width > 0 && top >= top
									&& (e.top + e.height) <= top + _wH
									&& e.left >= left
									&& (e.left + e.width) <= left + _wW) {
								if (!e.tracked) {
									doTrackingCall = e.tracked = true;
									types.push(e.type);
									codes.push(e.code);
									creatives.push(e.creative);
									positions.push(e.position);
									promotionType.push(e.promotionType);
									promotionSegments.push(e.segment);
								}
							}
						}
					}
				}

				if (doTrackingCall) {
					var eventType = 'area_visible';
					if (pt.isViewClick) {
						eventType = 'area_visible_click';
						pt.isViewClick = false;
					}

					var payload = {
						event_type : eventType,
						event_category : 'Internal Promotions',
						event_id : 'view',
						promotion_name : types,
						promotion_id : codes,
						promotion_segment: promotionSegments,
						promotion_creative : creatives,
						promotion_type : promotionType,
						promotion_position : positions
					};
					hm.Tracking.link(payload);

					if (pt.debugTracking) {
						console.log("viewtrack utag.link sent with payload:");
						console.log(payload);
					}

				}
			}, 500);
})(promotionTracking);

$(function() {

	var elementsToTrack = [];
	var seed = Math.floor(Math.random() * 1E7);

	$('*[data-tracking-type]')
			.each(
					function() {
						var $this = $(this);
						var jsonParamsString;
						if ($this.data("tracking-json-template")) {
							jsonParamsString = $(
									"#" + $this.data("tracking-json-template"))
									.text();
							var params = $this.data("tracking-params").split(
									"|");
							$.each(params, function(i) {
								jsonParamsString = jsonParamsString.replace("{"
										+ i + "}", this);
							});
						} else {
							jsonParamsString = $this.data("tracking-params");
						}

						var jsonParams;
						try {
							jsonParams = JSON.parse(jsonParamsString.trim());
						} catch (err) {
							console.log("Error parsing json params for the tracking call");
							return true;
						}
						if ($this.data("tracking-type") == "link") {
							$this
									.click(function() {
                                        hm.Tracking.link(jsonParams);
									});
						}

					});
});

(function() {
	"use strict";

	window.HMTrackingManager = function() {

		var publ = this;

		var priv = {

			debugTracking : false,

			eventType : {
				ADD_FAVORITE : "add_favorite",
				REMOVE_FAVORITE : "remove_favorite",
				FAQ_OPENING : "faq_opening",
				POPUP : "popup",
				BANNER : "club_banner",
				PRA_VISUALIZATION : "pra_visualization",
				PRA_STYLE_WITH_SWIPE : "PRA_Style_with",
				PRA_STYLE_WITH_CLICK : "PRA_Style_with_click"
			},

			colorArticleCode : ""
		}

		priv.init = function() {

			priv.setDebugStatus();
			if (hm.eventBus) {
				hm.eventBus.addListener('trackable-event',
						priv.manageTrackableEvent);
				hm.eventBus.addListener('pra:loaded',
						promotionTracking.initialize);

				// [PS]if we enable this listener the code sent to tealium will
				// be the color code chosen
				hm.eventBus.addListener('product.setColor', function(code) {
					if (priv.debugTracking) {
						console.log("a product.setColor has been emitted!");
						console.log(code);
					}
					priv.colorArticleCode = code.toString();
				});
				priv.addListener();
			} else {
				console.log("Event Bus is not intialized!");
			}
		}

		priv.addListener = function() {
			$(document).on("click", "*[data-tracking-type='click']",
					function() {
						hm.eventBus.emit('trackable-event', {
							type : 'generic_click',
							el : $(this)
						});
					});
		}

		priv.constructJsonPayload = function($element, type) {

			var jsonParamsString;
			var productArticleId = "";

			// [PS] the data could be in trigger object or in its inner html (
			// for popup for example )
			if (type == priv.eventType.POPUP) {
				// var elementsToTrack =$element.find('*[data-tracking-type]');
				var elementsToTrack = $element
						.find('*[data-tracking-type="popup"]');
				if (elementsToTrack && elementsToTrack.size() > 0) {
					$element = $(elementsToTrack[0]);
				}
			}

			if ($element.data("tracking-json-template")) {
				jsonParamsString = $(
						"#" + $element.data("tracking-json-template")).text();
				var params = $element.data("tracking-params").split("|");
				$.each(params, function(i) {
					// here we manage the cparticular case in wich we have to
					// call a function for values
					var _val = this.toString();
					if (_val == "localeInfo.locale"
							|| _val == "localeInfo.country" || _val == "getTouchpoint()") {
						_val = eval(_val);
					}
					if (i == 1) {
						productArticleId = _val;
					}
					_val = decodeURIComponent(_val); 
					jsonParamsString = jsonParamsString.replace("{" + i + "}",
							_val);
				});
			} else {
				jsonParamsString = $element.data("tracking-params");
			}

			var jsonParams;
			if (jsonParamsString) {
				try {
					jsonParams = JSON.parse(jsonParamsString.trim());
				} catch (err) {
					console.log("Error parsing json params for the tracking call");
					return undefined;
				}
			}
			
			// [PS] is not elegant, but for now it's ok. In a generic method i
			// put a not so generic exception to manage color Change in pdp.
			
            

			if (type == priv.eventType.ADD_FAVORITE
					|| type == priv.eventType.REMOVE_FAVORITE) {
				
				jsonParams.product_article_id = [ productArticleId ];
				if (priv.colorArticleCode != "") {
					jsonParams.product_id[0] = priv.colorArticleCode;
					jsonParams.product_article_id = [ priv.colorArticleCode ];
				}
				jsonParams.product_id[0] = jsonParams.product_id[0].length >= 7 ? jsonParams.product_id[0]
						.substring(0, 7)
						: jsonParams.product_id[0];
					if(jsonParams.is_pdp && jsonParams.is_pdp == "TRUE"){      
						
						var variants = hm.productHelper.getProductVariants(productArticleDetails);
			            getProductAvailability(variants);
			            var isFewPieceLeft = productAvailability.fewPieceLeft.indexOf(productArticleId)>=0 ? true : false;
			            
		                var size = "";
		                var price = "";
		                var productPriceType = "";
		                var selectedMarket = localeInfo.country;
		                var displayLanguage = localeInfo.locale;
		                var productCartStarter = hm.cookies.userCookie && (hm.cookies.userCookie.cartCount > 0);
		                var isCartStarterString = productCartStarter?"TRUE":"FALSE";				
		                var cc = [productArticleDetails[productArticleId].colorCode];           
		                var whitePrice = productArticleDetails[productArticleId].whitePriceValue;

		                if (productArticleDetails[productArticleId].redPrice !== null && productArticleDetails[productArticleId].redPrice !== undefined) {
		                    price = productArticleDetails[productArticleId].redPriceValue;
		                    productPriceType = 'SALES_PRICE';
		                }
		                if (productArticleDetails[productArticleId].whitePrice !== null && productArticleDetails[productArticleId].whitePrice !== undefined) {
		                    price = productArticleDetails[productArticleId].whitePriceValue;
		                    productPriceType = "";
		                }
		                if (productArticleDetails[productArticleId].bluePrice !== null && productArticleDetails[productArticleId].bluePrice !== undefined) {
		                    price = productArticleDetails[productArticleId].bluePriceValue;
		                    productPriceType = 'PRE_SHOPPING_PRICE';
		                }
		                if (productArticleDetails[productArticleId].priceClubValue !== null && productArticleDetails[productArticleId].priceClubValue !== undefined) {
		                    price = productArticleDetails[productArticleId].priceClubValue;
		                    productPriceType = 'CLUB_PRICE';
		                }

		                jsonParams.product_ugc = ["FALSE"];
		                jsonParams.product_few_pieces = [isFewPieceLeft.toString().toUpperCase()];
		                jsonParams.product_rating = ["FALSE"];
		                jsonParams.product_rating_avg = ['0.0'];  
		                jsonParams.product_cart_starter = [isCartStarterString];
		                jsonParams.product_color_code = cc;
		                jsonParams.product_size_code = [size];
		                jsonParams.product_view_type = ['PDP'];		                
		                jsonParams.product_discount = [""];
		                jsonParams.product_quantity = ["1"];
		                jsonParams.display_language = displayLanguage;
		                jsonParams.selected_market = selectedMarket;
		                jsonParams.product_view_price_type = [productPriceType];
		                jsonParams.product_price_type = [productPriceType];
		                jsonParams.product_original_price = [whitePrice];
		                jsonParams.product_list_price = [price];
		                jsonParams.product_size = [''];
		                jsonParams.product_osa_type = ['SMALL'];
		                jsonParams.product_size_rec = ['No recommendation available'];
		                delete jsonParams['is_pdp'];
					}			
			}

			return jsonParams;
		}

		priv.manageTrackingCall = function(type, jsonParams, $element) {

			priv.setDebugStatus();
			if (jsonParams) {

				if (type == priv.eventType.ADD_FAVORITE) {
					jsonParams.event_type = "ADD_TO_FAVOURITES";
					jsonParams.event_id = "Add to favourites";
					if (priv.debugTracking) {
						console.log("viewtrack utag.link will be sent with payload:");
						console.log(jsonParams);
					}
					hm.Tracking.link(jsonParams);
				} else if (type == priv.eventType.REMOVE_FAVORITE) {
					jsonParams.event_type = "REMOVE_FROM_FAVOURITES";
					jsonParams.event_id = "Remove from favourites";
					if (priv.debugTracking) {
						console.log("viewtrack utag.link will be sent with payload:");
						console.log(jsonParams);
					}
					hm.Tracking.link(jsonParams);

				}

				else if (type == priv.eventType.PRA_VISUALIZATION) {

					jsonParams.event_type = "imp_visible";

					if (!isPraStyleWith
							&& (jsonParams.imp_list_name == "PRA_STYLE_WITH_GROUP")) {
						jsonParams.event_type = "imp_visible";
						isPraStyleWith = true;
						hm.Tracking.link(jsonParams);

					}

					else if (!isPraBroughtWith
							&& (jsonParams.imp_list_name == "PRA1")) {
						jsonParams.event_type = "imp_visible";
						isPraBroughtWith = true;
						hm.Tracking.link(jsonParams);

					}
					/*else{
						hm.Tracking.link(jsonParams);
					}*/

					if (priv.debugTracking) {
						console.log("viewtrack utag.link will be sent with payload:");
						console.log(jsonParams);
					}

				}

				else if (type == priv.eventType.PRA_STYLE_WITH_SWIPE || type == priv.eventType.PRA_STYLE_WITH_CLICK) {
					if (priv.debugTracking) {
						console.log("viewtrack utag.link will be sent with payload:");
						console.log(jsonParams);
					}
					hm.Tracking.link(jsonParams);
				}

				else {

					if ($element.data("tracking-method")
							&& $element.data("tracking-method") == "view") {
						if (priv.debugTracking) {
							console.log("viewtrack utag.link will be sent with payload:");
							console.log(jsonParams);
						}
						hm.Tracking.view(jsonParams);
					} else {
						if (priv.debugTracking) {
							console.log("viewtrack utag.view will be sent with payload:");
							console.log(jsonParams);
						}
						hm.Tracking.link(jsonParams);
					}
				}
			} else {
				console.log("jsonparams is undefined");
			}
		}

		priv.manageTrackableEvent = function(objectToTrack) {
			var type = objectToTrack.type;
			var $element = $(objectToTrack.el);
			
			var debugTracking;

			if (priv.debugTracking) {
				console.log("A trackable event has been emitted: "
						+ JSON.stringify(objectToTrack));
			}

			// [PS] Here we put some code to manage exception in case element
			// passed is not the element on wich we have the tracking params
			// or the behaviour is different from the usual.

			// [PS] we wait 500 ms that the swipe has visual effect
			// and then we search for the element that have tracking params
			// inside the carousel
			if (type == priv.eventType.PRA_STYLE_WITH_SWIPE) {
				setTimeout(function() {
					var button = $element;
					button.closest(".product-items-content")
							.find(".swipe-item").each(
									function() {
										if ($(this).visible(false, false,
												'horizontal')) {
											$element = $(this);
											return false;
										}
									});

					var jsonParams = priv.constructJsonPayload($element, type);
					priv.manageTrackingCall(type, jsonParams, $element);

				}, 500);
			}
			// [PS] element passed by the DX team in this case is the anchor,
			// but we have tracking params at article level.
			else if (type == priv.eventType.PRA_STYLE_WITH_CLICK) {
				$element = $element.closest("article");
				var jsonParams = priv.constructJsonPayload($element, type);
				priv.manageTrackingCall(type, jsonParams, $element);
			}

			// [PS] normal case: we have params on the element passed by the DX
			// team
			else {
				var jsonParams = priv.constructJsonPayload($element, type);
				priv.manageTrackingCall(type, jsonParams, $element);
			}

		}

		priv.setDebugStatus = function() {
			var dtss = sessionStorage.getItem('debugTracking');
			priv.debugTracking = window.debugTracking || dtss;
			if (priv.debugTracking == true) {
				if (dtss != true) {
					try {
						sessionStorage.setItem('debugTracking', debugTracking);
					} catch (err) {
					}
				}
			}
		}

		priv.init();

		publ.trackElement = function($element) {
			var objectToTrak = {
				el : $element,
				type : priv.eventType.BANNER
			}
			priv.manageTrackableEvent(objectToTrak);
		}

	}

})();

function initializeTrackerManager() {
	window.hMTrackingManager = new window.HMTrackingManager();
}

function getProductAvailability(variants) {

	// console.log("entering getProductAvailability");
	$.ajax({
		dataType : 'json',
		method : location.hostname === 'localhost' ? 'POST' : 'GET',
		url : hm.options.product.productAvailabilityServiceUrlResolved,
		data : '',
		processData : false,
		success : function(data) {
			window.productAvailability = data;

		},
		error : function(/* error */) {
			window.productAvailability = {

				fewPieceLeft : []
			};
		}
	});

}

// $(window).load(function(){
//	
// window.hMTrackingManager = new window.HMTrackingManager();
//		
// });

// $(window).load(function(){
//	
// hm.ModalHandler.prototype.loadOnLoadModalsForAuthor = function () {
// var self = this;
//
// $('.modal-content-on-load').each(function() {
// var $element = $(this);
//
// $element.detach();
// self.loadModalWithElement(
// self.nextModalId(),
// $element,
// $element.data('modal-title'),
// $element.data('modal-name'),
// $element.data('custom-classname'),
// $element.data('disable-close'),
// $element.data('template'),
// $element.data('type'),
// $element.data('cookie-id'),
// function(){
// $(".overlaycontainer").append($element);
// }
// );
//
// if(self.activeModal.type === self.overlayType) {
// self.beforeUnloadCheck();
// }
// });
// }
//		
// });

(function(){
	var templates = "<script type=\"text/template\" id=\"default-modal-tmpl\">"+
"<div class=\"modal fadeInModal\">"+
    "<button class=\"modalclose icon-close-black\">"+"</button>"+
    "<div class=\"modal-wrapper\">"+
    "</div>"+
"</div>"+
"</script>"+

"<script type=\"text/template\" id=\"no-close-modal-template\">"+
	"<div class=\"modal fadeInModal\">"+
	    "<div class=\"modal-wrapper\">"+
	    "</div>"+
	"</div>"+
"</script> "+

"<script type=\"text/template\" id=\"regular-overlay-tmpl\">"+
"<div class=\"modal regular\">"+
"<button class=\"modalclose\"></button>"+
"<div class=\"modal-wrapper\">"+
"</div>"+
"</div>"+
"</script>"+

"<script type=\"text/template\" id=\"takeover-tmpl\">"+
"<div class=\"modal takeover\">"+
"<button class=\"modalclose\"></button>"+
"<div class=\"modal-wrapper\">"+
"</div>"+
"</div>"+
"</script>"+ 

"<script type=\"text/template\" id=\"text-dismiss-button-modal-content-tmpl\">"+
"<div aria-hidden=\"true\" class=\"hidden modal-content\">"+
"<div class=\"modal-text\">"+
  "{{? it.heading }}"+
  "<h1 class=\"heading\">{{= it.heading }}</h1>"+
  "{{?}}"+
  "{{? it.subHeading }}"+
  "<h2 class=\"sub-heading\">{{= it.subHeading }}</h2>"+
  "{{?}}"+
  "<p class=\"text\">{{= it.text }}</p>"+
"</div>"+
"{{? it.button }}"+
"<div class=\"sticky button-group\">"+
  "<button class=\"button modalclose\" type=\"button\">{{= it.button }}</button>"+
"</div>"+
"{{?}}"+
"</div>"+
"</script>"+

"<script type=\"text\/template\" id=\"rimd-image-tmpl\">" +
	"<div class=\"rimd {{=it.className}}\">" +
	    "<noscript data-src=\"{{=it.src}}\" data-alt=\"{{=it.alt}}\">" +
	        "<img src=\"{{=it.src}}\" alt=\"{{=it.alt}}\" />" +
	    "</noscript>" +
	    "</div>" +
	"<button class=\"{{=it.playClass}}\"></button>" +
"</script>" +

"<script type=\"text/template\" id=\"utagLink\">"+
	"{\"event_type\" : \"{0}\",\"event_id\" : \"{1}\",\"event_category\" : \"{2}\", \"event_label\" :\"{3}\"}"+
"</script>"+
"<script type=\"text/template\" id=\"utagOverlay\">"+
"{\"event_type\" : \"{0}\",\"event_category_id\" : \"{1}\",\"event_page_id\" : \"{2}\"}"+
"</script>"+
"<script type=\"text/template\" id=\"utagLinkFAQ\">"+
"{\"event_type\" : \"{0}\",\"event_id\" : \"{1}\",\"event_category\" : \"{2}\"}"+
"</script>"+
"<script type=\"text/template\" id=\"utagFavorite\">"+
"{\"event_category\" : \"{0}\", \"product_id\" : [\"{1}\"], \"product_name\" : [\"{2}\"], \"product_osa_area\" : [\"{3}\"]}"+
"</script>"+
"<script type=\"text/template\" id=\"utagFavoritePdp\">"+
"{\"event_category\" : \"{0}\", \"product_id\" : [\"{1}\"], \"product_name\" : [\"{2}\"], \"product_osa_area\" : [\"{3}\"], \"product_category\" : [\"{4}\"], \"product_currency\" : [\"{5}\"], \"is_pdp\" : [\"{6}\"]}"+
"</script>"+
"<script type=\"text/template\" id=\"utagStylewith\">"+
"{\"event_type\" : \"{0}\", \"imp_list_name\" : \"{1}\", \"imp_name\" : [{2}], \"imp_id\" : [{3}] , \"imp_position\" : [{4}] , \"imp_color\" : [{5}] , \"imp_category\" : [{6}] , \"imp_origin_system\" : [{7}] }" +
"</script>"+
"<script type=\"text/template\" id=\"utagStyleWithClick\">"+
"{\"event_type\" : \"{0}\", \"product_list_name\" : [\"{1}\"], \"product_name\" : [{2}], \"product_id\" : [{3}] , \"product_position\" : [{4}] , \"product_color_code\" : [{5}] , \"product_category\" : [{6}] , \"imp_origin_system\" : [{7}] }" +
"</script>"+
"<script type=\"text/template\" id=\"utagUgcProductClick\">"+
"{\"event_type\" : \"{0}\", \"product_list_name\" : \"{1}\", \"product_name\" : [{2}], \"product_id\" : [{3}] , \"product_article_id\" : [{4}] , \"product_position\" : [{5}] , \"product_color_code\" : [{6}] , \"product_category\" : [{7}] , \"imp_origin_system\" : [{8}] }" +
"</script>"+
"<script type=\"text/template\" id=\"utagSocialShare\">"+
"{\"event_type\" : \"{0}\", \"social_network\" : [\"{1}\"], \"social_action\" : [\"{2}\"], \"social_target\" : [\"{3}\"]}"+
"</script>"+
"<script type=\"text/template\" id=\"utagView\">"+
	"{\"category_id\" : \"{0}\", \"display_language\" : \"{1}\", \"page_id\" : \"{2}\", \"selected_market\" : \"{3}\", \"touchpoint\": \"{4}\"}"+
"</script>"+
"<script type=\"text\/template\" id=\"favourites-inactive-tmpl\">  " +
	"<button type=\"button\" class=\"favorite icon icon-favorites js-favorite\" data-saved-text=\"Saved to favorites\" data-not-saved-text=\"Not saved to favorites\">    " +
	"Not saved to favorites  " +
	"<\/button>" +
"<\/script>"+

"<script type=\"text\/template-x\" id=\"notifyTmpl\">"+
"<div class=\"responsive status-message is-open notify\" data-background-color=\"{{=it.color}}\" >"+
  "<div class=\"message icon {{=it.icon}}\" role=\"alert\" aria-live=\"{{=it.ariaLive}}\" >{{=it.message}}<\/div>"+
"<\/div>"+
"<\/script>"+
"<script type=\"text/template\" id=\"filterTracking\">"+
	"{\"event_type\" : \"{0}\", \"event_id\" : \"{1}\", \"event_category\" : \"{2}\", \"page_id\" : \"{3}\" , \"category_id\" : \"{4}\" , \"filter_categories\" : [{5}] , \"filter_product\" : [{6}] , \"filter_size\" : [{7}] , \"filter_color\" : [{8}], \"filter_style\" : [{9}], \"filter_other\" : [{10}] }" +
"<\/script>";
				var $templates = $(templates);
				$("head").append($templates);
})();

(function () {
    "use strict";

	window.OverlayChecker = function($element){

		var publ = this;

		var priv = {

				timeout: 0,
				overlayUrl: "",
				now: 0

		}

		priv.init = function($element){

			priv.timeout = $element.data("check-timeout");
			priv.overlayUrl =  $element.data("overlay-url");
			priv.now = (new Date()).getTime();
			priv.lastCheck = 0;
			if(sessionStorage.getItem("last_overlay_check_time")){
				priv.lastCheck = sessionStorage.getItem("last_overlay_check_time");
			}


		}

		priv.needCheck = function(){
			if((priv.now - priv.lastCheck)/1000 > priv.timeout){
				return true;
			}
			else{
				return false;
			}
		}

		publ.checkOverlay = function(){
			// this first check is for author. There we do not set the overlay url and the overlay has to be always visible.
			if(!priv.overlayUrl){
				return new Promise(function(resolve, reject){
					resolve("{data: success 200}");
				});
			}
			if(priv.needCheck()){
				return $.ajax({
                    url: priv.overlayUrl,
                    dataType: "html",
                    contentType:'text/html',
                  });
			}
			else{
				return new Promise(function(resolve, reject){
					reject("{data: Stored an Overlay 404}");
				});
			}
		}

		publ.errorHandler = function(err){
			if(err.status == 404){
				sessionStorage.setItem("last_overlay_check_time", (new Date()).getTime());
			}
		}

		priv.init($element);

	}

}
)();

hm.eventBus.addListener('loaded:hm-vanilla-application-js', function() {
	// show notification success/error when click a btn in doiresendemail component
	var doiResendMailBtn = $('.doiresendemail').find('button');
	doiResendMailBtn.on('click',function(){
		// vars for take doiresendmail json path
		var currentProtocol = window.location.protocol;
		var currentHost = window.location.host;
		var currentPathname = window.location.pathname;
		var jsonUrl = currentProtocol +'//'+ currentHost +'/'+ hm.options.product.locale +'/doi/doiResend';
		$.ajax({
			url: jsonUrl,
			type: 'GET',
			dataType: 'json',
			success: function(result){
				if(result.responseCode == "ok"){
					var success = doiResendMailBtn.data('succes-msg');
					hm.notify.show({message: success});
				} else{
					var error = doiResendMailBtn.data('error-msg');
					hm.notify.show({message: error, type: 'error'});
				}
			},
			error: function() {
				var error = doiResendMailBtn.data('error-msg');
				hm.notify.show({message: error, type: 'error'});
			}
		});				
	});
	
	hm.cookies = hm.cookies || new hm.Cookies();
	
	if(hm.cookies.readCookie("clubFullJoinCookie")){
		
		var clubCookieString = hm.cookies.readCookie('clubFullJoinCookie');
		var clubCookieObj = JSON.parse(clubCookieString);

		if(clubCookieObj){
			var cookieStatus = clubCookieObj.status;
			//[PS] adding check also based on presence of another badge for doi
			if(cookieStatus!='2'){
				// we add isUnconfirmed class (dx team) to the body because in this way we can show the badge
				$("body").addClass("isUnconfirmed");
				$("#myHmProfile").find("span.notification-badge").attr("title",hm.i18n.completeRegistration);
			}
		}
	}
	
	if(hm.cookies.readCookie("userCookie")){
		showConfirmationMailSent(); 
		replaceEmailPlaceholder();
	}

	function removeloginparam(){
		  if(sessionStorage.getItem('lastOpened')) {
			  sessionStorage.removeItem('lastOpened');
		  }
	}
	window.onbeforeunload = removeloginparam;
	
	$("body").on("change", "form.js-join-modal-form select[name='province']", function(){
		var $formJoin = $(this).closest("form.js-join-modal-form");
		getCityByProvince($formJoin);	
	});
	
	$("body").on("change", "form.js-join-modal-form select[name='hmclub-city']", function(){
		var $formJoin = $(this).closest("form.js-join-modal-form");
		getDistrictByCity($formJoin);
	});
	
});

var replaceEmailPlaceholder = function(){
    
	if($('*[data-field-type="email"]').length>0){
    	hm.cookies = hm.cookies || new hm.Cookies();
    	
    	var userCookieString = hm.cookies.readCookie('userCookie');
    	var userCookieObj = JSON.parse(userCookieString);
    	
    	if(userCookieObj){
    		var email = userCookieObj.hybris_uuid;
    		$.each($('*[data-field-type="email"]'), function(){
	    		var subscriptionOriginalText = $(this).html();
	            if(typeof subscriptionOriginalText !== 'undefined'){
	            	$(this).html(subscriptionOriginalText.replace('{0}', email));
	            }
	    	});
    	}
    }
};

var showConfirmationMailSent = function(){
    // confirmation mail from localStorage from newsletterSubscription.jsp
    if($('.newsletterSubscription').find('#confirmationMailSentTo').length){
    	
        var subscriptionOriginalText = $('.newsletterSubscription').find('#confirmationMailSentTo').html();
        if(typeof subscriptionOriginalText !== 'undefined'){
        	$('.newsletterSubscription').find('#confirmationMailSentTo').html(subscriptionOriginalText.replace('{0}',sessionStorage.getItem('fn.subscriber.email.hm')));
        }
    }
};

var showReminderClubPopup = function(clubPage){
	hm.cookies = hm.cookies || new hm.Cookies();
	var showPopup = false;
	
	var MAX_TIMES = hm.options.acceptableJoin.popupTimes || 3;
	
	var clubCookieString = hm.cookies.readCookie('clubFullJoinCookie');
	var clubCookieObj = JSON.parse(clubCookieString);
	
	var userCookieString = hm.cookies.readCookie('userCookie');
	var userCookieObj = JSON.parse(userCookieString);
	
	if(clubCookieObj && userCookieObj){
		var clubUser = clubCookieObj.user,
		currentUser = userCookieObj.hybris_uuid;
		if(clubUser === currentUser){
			if(clubCookieObj && clubCookieObj.date){
				var cookieDate, cookieStatus, cookieDelay;
				cookieDate = new Date(clubCookieObj.date);
				cookieStatus = clubCookieObj.status;
				cookieDelay = clubCookieObj.delay;
				var delayedDate = new Date();
				delayedDate.setDate(delayedDate.getDate() + cookieDelay);
				var now = new Date();
				
				if(!clubCookieObj.counter){
					clubCookieObj.counter = 0;
				}
				
				if(clubCookieObj.counter == MAX_TIMES){
					clubCookieObj.status = 2;
				}
				
				//[PS] we are in the first login, cookie just created
				if(cookieStatus == -1){
					showPopup = false;
				}
				
				//[PS] we are in status 0 (set by server),
				//so show first time the popup and mark as viewed (i.e. put value in date)
				else if(cookieStatus == 0){
					clubCookieObj.status = 1;
					showPopup = true;
					clubCookieObj.date =  delayedDate.getTime();
					clubCookieObj.counter = clubCookieObj.counter + 1;
					
				}
				
				//[PS] we are in status = 1 and counter = 0 (autologin), so we show popup after delay and mark as viewed
				else if(cookieStatus == 1 && now > cookieDate && (clubCookieObj.counter == 0 || (clubCookieObj.counter < MAX_TIMES && clubPage))){
					showPopup = true;
					clubCookieObj.date =  delayedDate.getTime();
					clubCookieObj.counter = clubCookieObj.counter + 1;
				}
				
				hm.cookies.createCookie('clubFullJoinCookie',JSON.stringify(clubCookieObj),null,null,true);
			}
		}
	}
	return showPopup;
};

var getCityByProvince = function($formJoin) {
	var $selectProvince = $formJoin.find("select[name='province']");
	var $selectCity = $formJoin.find("select[name='hmclub-city']");
	
	var Url = "/" + localeInfo.locale.toLowerCase()
			+ "/register/loadCheckoutCities";
	$.ajax({
		url : Url,
		headers : {
			"Content-Type" : "application/json"
		},
		type : "POST",
		data : JSON.stringify({
			province : $selectProvince.val()
		}),
		dataType : "json",
		success : function(data) {
			$selectCity.children('option').remove();
			$selectCity.append($('<option>', {
				value : -1,
				text : "City"
			}));
			$.each(data, function(i, item) {
				$selectCity.append($('<option>', {
					value : i,
					label : item.name,
					isocode : item.isocode,
					text : item.name
				}));
			})
		},
		error : function(data) {
			console.log("error")
		}

	})
};

var getDistrictByCity = function($formJoin) {

	var $selectCity = $formJoin.find("select[name='hmclub-city']");
	var $selectDistrict = $formJoin.find("select[name='hmclub-district']");
	var Url = "/" + localeInfo.locale.toLowerCase()
			+ "/register/loadCheckoutDistricts";
	$.ajax({
		url : Url,
		headers : {
			"Content-Type" : "application/json"
		},
		type : "POST",
		data : JSON.stringify({
			town : $selectCity.find(":selected").attr('isocode')
			
		}),
		dataType : "json",
		success : function(data) {
			$selectDistrict.children('option').remove();
			$selectDistrict.append($('<option>', {
				value : -1,
				text : "District"
			}));
			$.each(data, function(i, item) {
				$selectDistrict.append($('<options>', {
					value : i,
					label : item.name,
					text : item.name
				}));
			})
		},
		error : function() {
			console.log("error")
		}
	})
}


// FIX SIDEDRAW AND MODAL POSITION IN AUTHOR MODE 
function fixSideDrawInAuthor(){
	var windowFrameElement = $(window.frameElement);
	var windowFrameElementParent = windowFrameElement.parent();
	var offsetTopIframe = windowFrameElementParent.parent().scrollTop();
	if (windowFrameElementParent.hasClass("sideDrawIsOpen")) {
	    windowFrameElementParent.removeClass("sideDrawIsOpen");
	    windowFrameElementParent.parent().css('overflow', 'auto');
	    windowFrameElement.css({'position': 'absolute'});
	    windowFrameElement.contents().find("body").css('top', 0);
	} else {
	    windowFrameElementParent.addClass("sideDrawIsOpen");
	    windowFrameElementParent.parent().css('overflow', 'hidden');
	    windowFrameElement.css({'position': 'fixed'});
	    windowFrameElement.contents().find("body").css('top', '-' + offsetTopIframe + 'px');
	}
}

function setHeightIframeForReModalOpen(modal) {		
	  if(modal.hasClass("is-drawer")){
		  modal.find(".remodal-header").css("padding-top", "50px")
		  fixSideDrawInAuthor();
	  }
	  if(modal.hasClass("is-popup")){
		  $(window.frameElement).addClass("setHeigthforModal");
		  $(window.frameElement).parent().parent().css('overflow','hidden');
	  }
}

function setHeightIframeForReModalClose(modal) {
	// SIDEDRAW
	if(modal.hasClass("is-drawer")){
		fixSideDrawInAuthor();
	}
	// MODAL 
	if (modal.hasClass("is-popup")) {
		$(window.frameElement).removeClass("setHeigthforModal");
		$(window.frameElement).parent().parent().css('overflow','auto');
	}
}


hm.eventBus.addListener('loaded:hm-vanilla-application-js', function() {
	var windowFrameElement = $(window.frameElement);
	// WE ARE IN AUTHOR
    if (windowFrameElement.length) {
    	windowFrameElement.parent().parent().prepend("<style type='text/css'>.setHeigthforModal {height: 100vh!important} iframe[name=livePreviewFrame] { position: relative!important;}</style>");
		hm.eventBus.addListener('remodal.afterShow', setHeightIframeForReModalOpen);
		hm.eventBus.addListener('remodal.afterHide', setHeightIframeForReModalClose);
    }

    //Replacing placeholder in customer service page with custom data
	if($(".js-custom-data").length){
	    var cookie = JSON.parse(hm.cookies.readCookie('userCookie'));
	    if (typeof cookie !== 'object') {
			cookie = JSON.parse(cookie);
		}
	    if (cookie && cookie.hybris_uuid) {
	    	var email = cookie.hybris_uuid,
	    		username = cookie.firstName || cookie.hybris_firstName,
	    		customizedText = $(".js-custom-data").html(); 
	    	if (email) {
	    		var emailRegex = /\[email\]/gmi;
	    		customizedText = customizedText.replace(emailRegex, email);  
	    	}
	    	if (username) {
	    		var usernameRegex = /\[username\]/gmi;
	    		customizedText = customizedText.replace(usernameRegex, username);
	    	}
	    	$(".js-custom-data").html(customizedText);
	    }
	}

	hm.cookies = hm.cookies || new hm.Cookies();
	if(hm.cookies && hm.cookies.readCookie("utagAutoLogin")) { 
		setTimeout(function(){
			if(typeof utagMainScript != 'undefined'){
				hm.cookies.eraseCookie("utagAutoLogin"); 
				var userCookieString = JSON.parse(hm.cookies.readCookie('userCookie')),
					cBPID = userCookieString.bpid, 
					cId = utag_data.customer_id,
					cCity = utag_data._ccity,
					cCountry = utag_data._ccountry,
					cEmail = utag_data.customer_email,
					cState = utag_data._cstate,
					cZip = utag_data._czip,
					cFashionNews = utag_data.customer_fashion_news,
					cLoyaltyLevel = utag_data.customer_loyalty_level,
					cHasChildren = utag_data.customer_has_children,
					cStatus = utag_data.customer_status,
					cClubMember = utag_data.customer_club_member,
					cClubLevel = utag_data.customer_club_level;
				hm.Tracking.link({
					event_type : 'REGISTRATION',
					event_id : 'Login : Auto',
					event_category : 'Login',
					customer_bpid : cBPID,	
					customer_id : cId,
					customer_city : cCity,
					customer_country : cCountry,
					customer_email : cEmail,
					customer_state : cState,
					customer_zip : cZip,
					customer_fashion_news : cFashionNews,
					customer_loyalty_level : cLoyaltyLevel,
					customer_has_children : cHasChildren,
					customer_status : cStatus,
					customer_club_member : cClubMember,
					customer_club_level : cClubLevel
				});
			} else {
				console.log("utagMainScript is undefined");
			}
		},2000);
	}
	
	if(location.pathname.indexOf("orderConfirmation") > -1 && window.orderConfirmationGuestEmail){
		var newP = document.createElement('p');
		newP.innerHTML = window.orderConfirmationGuestEmail;
		$formOrderConfirmation = $("form.order-confirmation");
		if($formOrderConfirmation.length){
			$("form.order-confirmation .inputwrapper")[0].appendChild(newP);
			$("#signin-email").attr({type: "hidden"});
			$("#signin-email").val(window.orderConfirmationGuestEmail);
			$("#signin-email").change();
		}
		
	}
	
	var transparencyCallback = function(modal){
		var id = hm.Remodal.Utils.Helper.getModalId(modal);
		  if (id === 'modalSustainability') {
			  hm.options.sustainabilityClicked = true;
		  }
	}
	
	hm.eventBus = hm.eventBus || new hm.EventEmitter();
	hm.eventBus.addListener('remodal.afterShow', transparencyCallback);

	function doSomething(modal) {
	  var id = hm.Remodal.Utils.Helper.getModalId(modal);
	  if (id === 'myid') {
	    // do something
	  }
	}
}) 
function trackVideoStart(eventLabel,isAutoStart){
	var eventType;
	if(isAutoStart == true){
		eventType = 'VIDEO_AUTOSTART';
	}else{
		eventType = 'VIDEO_START';
	}
	
	hm.Tracking.link({
		 event_type : eventType, 
		 event_id : 'Started',  
		 event_category : 'Video',  
		 event_label : eventLabel
	}) ;
}

function trackVideoPause(eventLabel,duration,elapsed){
	var eventId = getEventId(duration,elapsed);
	hm.Tracking.link({
		 event_type : 'VIDEO_PAUSE', 
		 event_id : eventId,  
		 event_category : 'Video',  
		 event_label : eventLabel
		}) ;
}

function trackVideoStop(eventLabel,duration,elapsed){
	var eventId = getEventId(duration,elapsed);
	hm.Tracking.link({
		 event_type : 'VIDEO_STOP', 
		 event_id : eventId,  
		 event_category : 'Video',  
		 event_label : eventLabel
		});
}

function trackVideoCompleted(eventLabel){
		hm.Tracking.link({
			 event_type : 'VIDEO_COMPLETED', 
			 event_id : '100%',  
			 event_category : 'Video',  
			 event_label : eventLabel
			});
}
 
/*Function is calculating percentage duration of played video*/
function getEventId(duration,elapsed){
    if(isNaN(duration) || isNaN(elapsed)){
        return '0%';
	  }else{
		  var timePassed = (elapsed/duration)*100;
		  if(timePassed<25){
			  return '25%';
		  } else if(timePassed<50){
			  return '50%';
		  } else if(timePassed<75){
			  return '75%';
		  } else if(timePassed<100){
			  return '100%';
		  } else {
			  return '0%';
		  }
	  }
}
/*! jquery.cookie v1.4.1 | MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});
hm.eventBus.addListener('loaded:hm-vanilla-application-js', function() {

    $.fn.serializeObject = function () {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function () {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

    $("#doiMiddlePageDestinationUrl").on("click", function () {
    	var newHref = $(this).data("url");
        setTimeout(function(){window.location.href = newHref},500);
    });

    hm.formValidator = new hm.FormValidator();

    $("#signin-dob-year").change();
	$("#signin-dob-day").change();
	$("#signin-dob-month").change();
	$("#signin-dob").change();
	
	$.urlParam = function (params) {
	    var results = new RegExp('[\?&]' + params + '=([^&#]*)').exec(window.location.search);

	    return (results !== null) ? results[1] || 0 : false;
	}
	
	$("body").on("click", ".js-submit-join", function(event){
        event.preventDefault();
        var $formButton = $(this);
        $formButton.attr("disabled", true);
        if( typeof window.executeRecaptchaTokenSubmission == 'function'){
			window.executeRecaptchaTokenSubmission(function() {return doRegister($formButton)});
		}
		else{
			doRegister($formButton);
		}
        
    });
	
	var doRegister = function($formButton){
		$form = $formButton.closest("form.js-join-modal-form");
        var  isModal =  $formButton.closest("*[data-remodal-id]").length > 0;
        var recruiterBPID = $.urlParam('rcr') ? $.urlParam('rcr') : '';
        trackSubmitJoin(isModal);
        if (!hm.formValidator.validateForm($form, true)) {
        	$formButton.attr("disabled", false);
        	return;
        }
        $form.find('.recruiterBPID').val(recruiterBPID);
        var formdata = $form.serializeObject();
        
        // if IS ORDER CONFIRMATION PAGE
        if ($form.hasClass("order-confirmation")) {
            var registerActionUrl = $form.closest("div[data-registeractionurl]").data("registeractionurl") + "/register";
            $.ajax({
                type: "POST",
                url: registerActionUrl,
                data: JSON.stringify(formdata),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (data.errors == null) {

                        if (data.hmNewsSubscription == true) {
                            utagHMNewsLetterSignupEvent();
                        }
                        if (data.hmClubJoin == true) {
                            if(data.losServiceDown)
                            {
                            	utagTrackClubJoinFailure();
                            }
                            else
                            {
                            	utagTrackClubJoinSuccess(isModal);
                            }
                        }
                        

                        if (data.doiMarket && data.emailUnconfirmed && data.hmNewsSubscription) {
                            //open doi popup for regular member or for club member
                            console.log("we are in a doi market and the user registerd in checkout -- opening popup");
                            //[PS] since form has his own scope we have to put this in the rootScope. otherwise other components do not reach them

                            // redirect on click
                            $("#doiMiddlePageDestinationUrl").attr("data-url", $("#contextPath").val() + data.redirect);
                            // replace user mail
                            var userEmail = data.email;
                            $("#doiMiddlePageGuestSignup").find("p#user-email").text(function () {
                                return $(this).text().replace("{0}", userEmail);
                            });

                            if (data.hmClubJoin) {
                                //open popup DOI for club
                                console.log("open popup DOI for club and setting OVERVIEW url for button: " + $("#contextPath").val() + data.redirect);
                                //hm.modalManager.loadModalWithUrl($scope.doiPopupUrl, 'ajax', '', undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined);
                                hm.modalManager.loadModalWithElementSettings('doiMiddlePageGuestSignup', {
                                    $element: $('#' + 'doiMiddlePageGuestSignup'),
                                    disableClose: true,
                                    modalLayout: 'no-header',
                                    template: 'no-close-modal-template'
                                });
                               
                                utagGuestCheckoutSignupView(data.email);
                                
                            }
                            else {
								var cleanRedirect = DOMPurify.sanitize(data.redirect);
                                window.location = $("#contextPath").val() + cleanRedirect;
                            }
                        }
                        else {
							var cleanRedirect = DOMPurify.sanitize(data.redirect);
                            window.location = $("#contextPath").val() + cleanRedirect;
                        }
                    } else {
                    	utagTrackClubJoinFailure();
                        $.each(data.errors.registerForm, function (key, value) {
                            hm.formValidator.displayFieldStatus($form.find('input[name = ' + key + ']'), {
                                isValid: false,
                                errorMessage: value
                            });

                        });
                    }
                },
                failure: function (err) {
                    utagTrackClubJoinFailure();
                },
                complete: function () {
                    $formButton.attr("disabled", false);
                }
            });
        } else {  // END ORDER CONFIRMATION PAGE
            var dataSubmitUrl = $formButton.attr("data-submit-redirect");
            $.ajax({
                type: "POST",
                url: dataSubmitUrl,
                data: JSON.stringify(formdata),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (data.errors == null) {
                        if (JSON.parse(hm.options.isCiamEnabled)) {
                            try {
                                 function fetchAccesstoken () {
                                    var accessTokenURL = "/" + hm.options.product.locale + "/login/getTokens?tokenExpired=false";
                                     $.ajax({
                                        type: "POST",
                                        url: accessTokenURL,
                                        contentType: "application/json; charset=utf-8",
                                        success: function(data) {
                                            if (data.errors == null) {
                                                if (data && data.accessToken) {
                                                    window.localStorage.setItem("jwt", JSON.stringify(data))
                                                }
                                            }
                                            registerSuccess();
                                        }
                                    });
                                }
                                fetchAccesstoken();
                            } catch (e) {} // Ignore any errors from /getTokens
                        }else{
                            registerSuccess();
                        }
                        function registerSuccess(){
                        if (data.hmNewsSubscription == true) {
                            utagHMNewsLetterSignupEvent();
                        }
                        if (data.hmClubJoin == true) {
                            if(data.losServiceDown)
                            {
                            	utagTrackClubJoinFailure();
                            }
                            else
                            {
                            	utagTrackClubJoinSuccess(isModal);
                            }
                        }
                        var cleanRedirect = DOMPurify.sanitize(data.redirect);
                        window.location = "/" + hm.options.product.locale + cleanRedirect;
                    }
                    } else {
                        utagTrackClubJoinFailure();
                        $.each(data.errors.registerForm, function (key, value) {
                            hm.formValidator.displayFieldStatus($form.find('input[name = ' + key + ']'), {
                                isValid: false,
                                errorMessage: value
                            });
                            hm.util.scrollToElement($form.find('input[name = ' + key + ']').attr("id"), -80);
                        });

                    }
                },
                failure: function (err) {
                    utagTrackClubJoinFailure();
                },
                complete: function () {
                    $formButton.attr("disabled", false);
                }
            });
        }
	}
	/** logic to hide KAKAO button in IOS device */
	var isDeviceTypeIOS = hm.Device.prototype.ios(); 
	if(isDeviceTypeIOS){
		$("#kakao-register-btn").hide();
		$("#kakao-divider").hide();
	}
	
	$( document ).ready(function() {
		function consentToggle(){
	
			var isFilled = false;
			$('.full-registration').find('input:not([name="prefix"]), select').each(function(){
				if($(this).val() !='' && $(this).val() != undefined){
					isFilled = true;
				}
			});
	
			var consent_selector = $('.inputwrapper').find('input[name="collectionAndUseInfo"]').closest('.inputwrapper');
			if(isFilled){
				$(consent_selector).show();
			}else{
				$(consent_selector).hide();
			}
			
		}
	
		$('body').on("keyup", ".full-registration input",function(e){
			consentToggle();
		});
		$('body').on("change",".full-registration select", function(e){
			consentToggle();
		});
		
		function utagTrackRegisterModalLoad(){
			hm.Tracking.link({
				event_type : 'REGISTER_INITIATE',
				event_id : 'initiated',
				event_category : 'Register',
				event_label : 'Header'
			});
		}

		document.addEventListener('click', function(e){
			if (e.target.closest('[data-remodal-trigger="join"]')){
				utagTrackRegisterModalLoad();
			}
		});
	});
	
});

hm.eventBus.addListener('loaded:hm-vanilla-application-js', function() {
	hm.cookies = hm.cookies || new hm.Cookies();
    hm.notify = new hm.Notify();
    var cookie =hm.cookies.readCookie(hm.cookies.userCookieName);
    var userCookie = jQuery.parseJSON(cookie);
    var url = window.location.pathname;
	var array = url.split('/');
	var lastsegment = array[array.length-1];
	$("body").on("click", ".js-submit-clubjoin", function(event){
		event.preventDefault();
		hm.formValidator = new hm.FormValidator();
		$formButton = $(this);
		var isModal = $formButton.closest("*[data-remodal-id]").length > 0;
		if(hm.formValidator.validateForm($('form.form.js-form-clubjoin'), true)){
			var dataSubmitUrl = "/" + hm.options.product.locale + "/hmclub/register-club";
			var joinBtn = this; 
            joinBtn.setAttribute("disabled","disabled");
			var formdata = $('form.form.js-form-clubjoin').serializeObject();
			var params = Object.keys(formdata).map(function(x){ return encodeURIComponent(x) + '=' + encodeURIComponent(formdata[x])}).join('&');
			 $.ajax({
		         type: "POST",
		         url: dataSubmitUrl,
		         data: params,
		         dataType: "json",
		         contentType: "application/x-www-form-urlencoded",
		         success: function(data){
		        	 if(data.responseStatusCode === "ok"){
				         	console.log("200 OK ");
				         	
				         	utagTrackClubJoinSuccess(isModal);
				         	
				         	var anchor = window.location.hash; 
				         	hm.confirmExit.toggle(false);
				         	window.location.href = window.location.href.replace(anchor,"") + "?upgraded=true";

		        		 
		        	 }else if(data.responseStatusCode === "ko"){
				         	console.log("200 KO");
		        	 }else {
		        		 console.log("responseStatusCode not set");
		        	 }
		          },
		         failure: function(err) {
		         	console.log(" 500 Error");
		         },
		         complete: function() {
		        	 joinBtn.setAttribute("disabled",false);
		        	 joinBtn.removeAttribute("disabled");
	             }
		     });
		}
	});


});

$(window).load(function (){
    if(location.href.search("upgraded") > 0){
        hm.notify.show({message: hm.options.clubUpgrade.confirmationMessage, type: 'confirmation'}); 
    }
});
var doLogin = function(button){
	
	
	var btnJoin = $(button);
	var form = btnJoin.closest("form");
	var btnJoinEmail = btnJoin.closest("form").find("input[type='email']");
	var btnJoinPassword = btnJoin.closest("form").find("input[type='password']");
	
	var  isModal =  btnJoin.closest("*[data-remodal-id]").length > 0;
	
	if (!hm.formValidator.validateForm(form, true)) {
		return;
	} 
	
	btnJoin.attr("disabled", true);
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange =  function() {
		if(this.readyState == 4 && this.status == 200) {
			if (JSON.parse(hm.options.isCiamEnabled)) {
                try {
                    var accessTokenURL = "/" + hm.options.product.locale + "/login/getTokens?tokenExpired=false";
                     $.ajax({
                        type: "POST",
                        url: accessTokenURL,
                        contentType: "application/json; charset=utf-8",
                        success: function(data) {
                            if (data.errors == null) {
                                if (data && data.accessToken) {
                                    window.localStorage.setItem("jwt", JSON.stringify(data))
                                }
                            }
							loginSuccess();
                        }
                    });
                } catch (e) {} // Ignore any errors from /getTokens
            }else{
				loginSuccess();
			}
		function loginSuccess(){
			var newPageUrl = this.responseURL;
			if(typeof utag_data !== 'undefined'){
				var label = 'Header';
				if(utag_data.page_id == "CHECKOUT : LOGIN" && !isModal){
					label = 'Checkout Login' 
				}
				if(utag_data.page_id == "CART" && !isModal){
					label = 'Shopping bag' 
				}
				if(utag_data.page_id == "LOGIN" && !isModal){
					label = 'Login' 
				}
				
				hm.Tracking.link({
					event_type : 'LOGIN_SUCCEEDED',
					event_id : 'Login succeeded',
					event_category : 'Login',
				 	event_label : label
				}) ;
			}
			window.sessionStorage.setItem('_loginbutton', true);
			if(newPageUrl == undefined){
				window.location.reload();
            }else{
            	window.location.replace(newPageUrl);
            }
		}
		} else if (this.readyState == 4 && this.status == 401) {
			hm.formValidator.displayFieldStatus( btnJoinEmail, {
				isValid: false
				}); 
			hm.formValidator.displayFieldStatus( btnJoinPassword, {
				isValid: false, 
				errorMessage: btnJoinPassword.data("login-failed-text")
				});
			btnJoin.attr("disabled",false);
			hm.Tracking.link({
				event_type : 'LOGIN_ERROR',
				event_id : 'Login failed',
				event_category : 'Login',
			 	event_label : 'Login failed'
			}) ;
		}
	}
	xhttp.onerror = function() {
		hm.formValidator.displayFieldStatus( btnJoinEmail, {
			isValid: false
			}); 
		hm.formValidator.displayFieldStatus( btnJoinPassword, {
			isValid: false, 
			errorMessage: btnJoinPassword.data("login-failed-text")
			}); 
		btnJoin.setAttribute("disabled",false);
		btnJoin.removeAttribute("disabled");
		hm.Tracking.link({
			event_type : 'LOGIN_ERROR',
			event_id : 'Login failed',
			event_category : 'Login',
		 	event_label : 'Login failed'
		}) ;
	}
	xhttp.open("POST","/"+hm.options.product.locale+"/j_spring_security_check",true);
	xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
	xhttp.send(form.serialize());
	
}

hm.eventBus.addListener('loaded:hm-vanilla-application-js', function() {
	$("body").on("click", ".btn-login", function(event){
		event.preventDefault();
		var button = this;
		if( typeof window.executeRecaptchaTokenSubmission == 'function'){
			window.executeRecaptchaTokenSubmission(function() {return doLogin(button)});
		}
		else{
			doLogin(button);
		}
		
	})
})
$(window).on("load", function() {
  var winurl = window.location.pathname;
  if (winurl.indexOf('/logout') > -1){
	  window.sessionStorage.removeItem('_loginbutton');
  }
  if (winurl.indexOf('/account') > -1){
	hm.cookies = hm.cookies || new hm.Cookies();
	var cookie =hm.cookies.readCookie(hm.cookies.userCookieName);
	var userCookie = jQuery.parseJSON(cookie);
	if(userCookie && userCookie.customer_id != null && window.sessionStorage.getItem('_loginbutton') === "true") {
		    window.sessionStorage.removeItem('_loginbutton');
	        var appName = hm.Device.prototype.app.name;
	        var enableQuestionairre = hm.options.enableQuestionairre;
	        if(enableQuestionairre && appName==""){
				window._uzactions = window._uzactions || [];
				_uzactions.push(['_setID', '09408767C10AEA11AA5EC9768AD49726']);
				_uzactions.push(['_setSID', '2A3E8767C10AEA11AA5EC9768AD49726']);
				_uzactions.push(['_start']);
				(function() {
				var uz = document.createElement('script'); uz.type = 'text/javascript'; uz.async = true; uz.charset = 'utf-8'; uz.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn4.userzoom.com/trueintent/js/uz_til.js?cuid=473D556F0ECEE411B0190022196C2B88';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(uz, s);
				})();
			}
		}
	}
})
hm.eventBus.addListener('loaded:hm-vanilla-application-js', function() {
	if(window.location.host.indexOf("asm")>=0) {
		var asmUrl = "/" + hm.options.product.locale
		+ "/assisted-service/header";
		$.ajax({
			url: asmUrl,
			type: 'GET',
			dataType: 'html',
			success: function(result){
				var cleanResult = DOMPurify.sanitize(result);
				$("body").prepend(cleanResult);
			},
			error: function(error) {
				console.log("error loading ASM header")
				console.log(error)
			}
		});
	}
	
})

