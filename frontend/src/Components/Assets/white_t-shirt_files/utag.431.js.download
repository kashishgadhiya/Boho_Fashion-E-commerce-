//tealium universal tag - utag.431 ut4.0.202406180732, Copyright 2024 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1,"link":1};u.hasOwn=function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a);};u.isEmptyObject=function(o,a){for(a in o){if(u.hasOwn(o,a)){return false;}}return true;};u.toBoolean=function(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";};u.hasgtagjs=function(){window.gtagRename=window.gtagRename||""||"gtag";if(utag.ut.gtagScriptRequested){return true;}
var i,s=document.getElementsByTagName("script");for(i=0;i<s.length;i++){if(s[i].src&&s[i].src.indexOf("gtag/js")>=0&&(s[i].id&&s[i].id.indexOf('utag')>-1)){return true;}}
var data_layer_name=""||"dataLayer";window[data_layer_name]=window[data_layer_name]||[];if(typeof window[window.gtagRename]!=="function"){window[window.gtagRename]=function(){window[data_layer_name].push(arguments);};if(u.data.cross_track_domains!==""){window[window.gtagRename]("set","linker",{domains:u.data.cross_track_domains.split(","),accept_incoming:true});}
window[window.gtagRename]("js",new Date());}
return false;};u.isScriptRequestedInit=false;u.scriptRequestedInit=function(){if(u.isScriptRequestedInit){return}
u.scriptrequested=u.hasgtagjs();u.o=window[window.gtagRename];u.isScriptRequestedInit=true;}
u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.map={};u.extend=[function(a,b){try{if(1){var sendtoStr=function(type){if(activityObj[type][b.selected_market]){var groupString=activityObj.groupString[b.selected_market];var activityType='+standard';if(type==='purchase'){groupString='confi0';activityType='+transactions';}
return advertiser_id+'/'+groupString+'/'+activityObj[type][b.selected_market]+activityType;}
return'drop';};var init_dwell=function(){var fld_qv=(tiq.tools.variable_is(tiq.sessionData.fld_qv)&&tiq.tools.variable_is(tiq.sessionData.fld_qv.value))?tiq.sessionData.fld_qv.value:undefined;var dwell_t=[10000,30000,60000,120000];var dwell_c=!isNaN(Number(fld_qv))?Number(fld_qv):0;for(var i=dwell_c;i<dwell_t.length;i++){var type='dwell'+(i+1);if(activityObj[type][b.selected_market]){setTimeout(function(i){var u=pop_uobj(['u2']);u.send_to=sendtoStr(type);gtag('event','conversion',u);tiq.tools.storeSet("fld_qv",''+(i+1),"session");},dwell_t[i],i);}}};var pop_uobj=function(u_vals){var consent_lvl=1;if(b.customer_allow_marketing===false){consent_lvl=0;}
var u={'u5':'1','u6':consent_lvl,'allow_custom_scripts':true,'u7':b.touchpoint,'u8':b.selected_market,'u11':b.customer_lcs,'dc_custom_params':{'match_id':[b.client_id_ga],}};var map={'u1':'product_name','u2':'dom.url','u3':'product_article_id','u4':'product_quantity','u9':'customer_type','value':'order_subtotal','transaction_id':'order_id'};for(var i in u_vals){var e=u_vals[i];if(b[map[e]]){if(Array.isArray(b[map[e]])){u[e]=b[map[e]].join().replace(/,/g,"|");}else{u[e]=b[map[e]];}}}
return u;};activityObj={dwell1:{AT:"globa001",BE:"globa001",CA:"globa001",DK:"globa001",FI:"globa001",FR:"globa001",DE:"globa001",IE:"globa001",NL:"globa001",NO:"globa000",PL:"globa001",RU:"globa001",ES:"globa001",IT:"globa001",CZ:"globa001",TR:"globa001",GB:"globa001",US:"globa001",LU:"globa001",PT:"globa001",AU:"globa001",MX:"globa003",SE:"globa0",CH:"globa001",SK:"globa001",RO:"globa001",KR:"globa001",JP:"globa001",HU:"globa001",IN:"globa001",HR:"globa001",LV:"globa001",GR:"globa001",LT:"globa001",CY:"globa001",SI:"globa001",EE:"globa001",PH:"globa001",MY:"globa001",TW:"globa001",SG:"globa001",MO:"globa001",HK:"globa001",BG:"globa001",RS:"globa001"},dwell2:{AT:"globa002",BE:"globa002",CA:"globa002",DK:"globa002",FI:"globa002",FR:"globa002",DE:"globa002",IE:"globa002",NL:"globa002",NO:"globa002",PL:"globa002",RU:"globa002",ES:"globa002",IT:"globa002",CZ:"globa002",TR:"globa002",GB:"globa002",US:"globa002",LU:"globa002",PT:"globa002",AU:"globa002",MX:"globa005",SE:"globa002",BG:"globa003",HR:"globa003",GR:"globa004",HU:"globa006",MY:"globa004",PH:"globa002",RO:"globa006",RS:"globa002",SG:"globa003",SK:"globa003",SI:"globa003",KR:"globa003"},dwell3:{AT:"globa003",BE:"globa003",CA:"globa003",DK:"globa003",FI:"globa003",FR:"globa003",DE:"globa003",IE:"globa003",NL:"globa003",NO:"globa003",PL:"globa003",RU:"globa003",ES:"globa003",IT:"globa003",CZ:"globa003",TR:"globa003",GB:"globa003",US:"globa003",LU:"globa003",PT:"globa003",AU:"globa003",MX:"globa006",SE:"globa003",CH:"globa003",BG:"globa004",HR:"globa004",GR:"globa005",HU:"globa007",MY:"globa005",PH:"globa004",RO:"globa007",RS:"globa003",SG:"globa004",SK:"globa004",SI:"globa003",KR:"globa004"},dwell4:{AT:"globa004",BE:"globa004",CA:"globa004",DK:"globa004",FI:"globa004",FR:"globa004",DE:"globa004",IE:"globa004",NL:"globa004",NO:"globa004",PL:"globa004",RU:"globa004",ES:"globa004",IT:"globa004",CZ:"globa004",TR:"globa004",GB:"globa004",US:"globa004",LU:"globa004",PT:"globa004",AU:"globa004",MX:"globa004",SE:"globa004",CH:"globa004",BG:"globa005",HR:"globa005",GR:"globa006",HU:"globa008",MY:"globa006",PH:"globa005",RO:"globa008",RS:"globa004",SG:"globa5",SK:"globa005",SI:"globa003",KR:"globa005"},pageview:{AT:"globa000",BE:"globa000",CA:"globa000",DK:"globa000",FI:"globa000",FR:"globa000",DE:"globa000",IE:"globa000",NL:"globa000",NO:"globa001",PL:"globa000",RU:"globa000",ES:"globa000",IT:"globa000",CZ:"globa000",TR:"globa000",GB:"globa000",US:"globa000",LU:"globa000",PT:"globa000",AU:"globa000",MX:"globa000",SE:"globa001",CH:"globa000",SK:"globa000",RO:"globa000",KR:"globa000",JP:"globa000",HU:"globa000",IN:"globa000",HR:"globa000",LV:"globa000",GR:"globa000",LT:"globa000",CY:"globa000",SI:"globa000",EE:"globa000",PH:"globa000",MY:"globa000",TW:"globa000",SG:"globa000",MO:"globa000",HK:"globa000",BG:"globa000",RS:"globa000"},add:{AT:"globa0",BE:"globa0",CA:"globa0",DK:"globa0",FI:"globa0",FR:"globa0",DE:"globa0",IE:"globa0",NL:"globa0",NO:"globa0",PL:"globa0",RU:"globa0",ES:"globa0",IT:"globa0",CZ:"globa0",TR:"globa0",GB:"globa0",US:"globa0",LU:"globa0",PT:"globa0",AU:"globa0",MX:"globa0",SE:"globa00",CH:"globa0",SK:"globa0",RO:"globa0",KR:"globa0",JP:"globa0",HU:"globa0",IN:"globa0",HR:"globa0",LV:"globa0",GR:"globa0",LT:"globa0",CY:"globa0",SI:"globa0",EE:"globa0",PH:"globa0",MY:"globa0",TW:"globa0",SG:"globa0",MO:"globa0",HK:"globa0",BG:"globa0",RS:"globa0"},checkout:{AT:"globa00",BE:"globa00",CA:"globa00",DK:"globa00",FI:"globa00",FR:"globa00",DE:"globa00",IE:"globa00",NL:"globa00",NO:"globa00",PL:"globa00",RU:"globa00",ES:"globa00",IT:"globa00",CZ:"globa00",TR:"globa00",GB:"globa00",US:"globa00",LU:"globa00",PT:"globa00",AU:"globa00",MX:"globa00",SE:"globa000",CH:"globa00",SK:"globa00",RO:"globa00",KR:"globa00",JP:"globa00",HU:"globa00",IN:"globa00",HR:"globa00",LV:"globa00",GR:"globa00",LT:"globa00",CY:"globa00",SI:"globa00",EE:"globa00",PH:"globa00",MY:"globa00",TW:"globa00",SG:"globa00",MO:"globa00",HK:"globa00",BG:"globa00",RS:"globa00"},purchase:{AT:"globa008",BE:"globa00d",CA:"globa00-",DK:"globa000",FI:"globa002",FR:"globa003",DE:"globa001",IE:"globa00b",NL:"globa005",NO:"globa00",PL:"globa004",RU:"globa00c",ES:"globa009",IT:"globa00q",CZ:"globa00j",TR:"globa00e",GB:"globa006",US:"globa007",LU:"globa00f",PT:"globa00w",AU:"globa012",MX:"globa013",SE:"globa0",CH:"globa00a",SK:"globa00_",RO:"globa00x",KR:"globa00r",JP:"globa00p",HU:"globa00n",IN:"globa00o",HR:"globa00m",LV:"globa00t",GR:"globa00l",LT:"globa00s",CY:"globa00i",SI:"globa00z",EE:"globa00k",PH:"globa00v",MY:"globa00u",TW:"globa01",SG:"globa00y",MO:"globa011",HK:"globa010",BG:"globa00g",RS:"globa016"},groupString:{AT:"austr0",BE:"belgi0",CA:"canad0",DK:"denma0",FI:"finla0",FR:"franc0",DE:"germa0",IE:"irela0",NL:"nethe0",NO:"norwa0",PL:"polan0",RU:"russi0",ES:"spain0",IT:"italy0",CZ:"czech0",TR:"turke0",GB:"uk-co0",US:"us-co0",LU:"luxem0",PT:"portu0",AU:"austr00",MX:"mexic0",SE:"swede0",CH:"switz0",SK:"slova0",RO:"roman0",KR:"south0",JP:"japan0",HU:"hunga0",IN:"india0",HR:"croat0",LV:"latvi0",GR:"greec0",LT:"lithu0",CY:"cypru0",SI:"slove0",EE:"eston0",PH:"phili0",MY:"malay0",TW:"taiwa0",SG:"singa0",MO:"macau0",HK:"hongk0",BG:"bulga0",RS:"serbi0"},nlSignupPage:{AT:"globa005",BE:"globa005",CA:"globa005",DK:"globa005",FI:"globa005",FR:"globa005",DE:"globa005",IE:"globa006",NL:"globa005",NO:"globa005",PL:"globa005",RU:"globa005",ES:"globa005",IT:"globa005",CZ:"globa005",TR:"globa006",GB:"globa005",US:"globa005",LU:"globa006",PT:"globa008",AU:"globa005",MX:"globa002",SE:"globa005",CH:"globa008",SK:"globa006",RO:"globa005",KR:"globa006",JP:"globa005",HU:"globa005",IN:"globa006",HR:"globa006",LV:"globa005",GR:"globa008",LT:"globa005",CY:"globa005",SI:"globa006",EE:"globa005",PH:"globa006",MY:"globa007",TW:"globa005",SG:"globa005",MO:"globa005",HK:"globa005",BG:"globa006",RS:"globa005"},nlSignupConf:{AT:"globa006",BE:"globa006",CA:"globa006",DK:"globa006",FI:"globa006",FR:"globa006",DE:"globa006",IE:"globa007",NL:"globa006",NO:"globa006",PL:"globa006",RU:"globa006",ES:"globa006",IT:"globa006",CZ:"globa006",TR:"globa007",GB:"globa006",US:"globa006",LU:"globa007",PT:"globa006",AU:"globa006",MX:"globa007",SE:"globa006",CH:"globa006",SK:"globa007",RO:"globa006",KR:"globa007",JP:"globa006",HU:"globa006",IN:"globa007",HR:"globa007",LV:"globa006",GR:"globa009",LT:"globa006",CY:"globa006",SI:"globa007",EE:"globa006",PH:"globa007",MY:"globa008",TW:"globa006",SG:"globa006",MO:"globa006",HK:"globa006",BG:"globa008",RS:"globa006"},mSignup:{AT:"globa008",BE:"globa007",CA:"globa007",DK:"globa007",FI:"globa007",FR:"globa007",DE:"globa007",NL:"globa007",NO:"globa007",PL:"globa007",RU:"globa007",ES:"globa007",IT:"globa007",CZ:"globa007",GB:"globa007",US:"globa007",AU:"globa007",MX:"globa001",SE:"globa007",CH:"globa006",RO:"globa004",JP:"globa004",HU:"globa004",GR:"globa007",BG:"globa007",HR:"globa008",IN:"globa008",IE:"globa008",LU:"globa008",MY:"globa009",PH:"globa008",PT:"globa007",RS:"globa007",SG:"globa007",SI:"globa008",SK:"globa008",KR:"globa008",TR:"globa008"},prodview:{AT:"globa007",BE:"globa008",CA:"globa008",DK:"globa008",FI:"globa008",FR:"globa008",DE:"globa008",IE:"globa005",NL:"globa008",NO:"globa008",PL:"globa008",RU:"globa008",ES:"globa009",IT:"globa008",CZ:"globa008",TR:"globa005",GB:"globa008",US:"globa008",LU:"globa005",PT:"globa005",AU:"globa009",MX:"globa008",SE:"globa008",CH:"globa007",SK:"globa002",RO:"globa005",KR:"globa002",JP:"globa005",HU:"globa005",IN:"globa002",HR:"globa002",LV:"globa002",GR:"globa002",LT:"globa002",CY:"globa002",SI:"globa002",EE:"globa002",MY:"globa003",TW:"globa002",SG:"globa002",MO:"globa002",HK:"globa002",BG:"globa002",RS:"globa008"}};var send_to='drop',advertiser_id='DC-9054599',u={};if(a=='view'){gtag('config',advertiser_id);u=pop_uobj([]);u.send_to=sendtoStr('pageview');gtag('event','conversion',u);init_dwell();if(b.page_is_orderConfirmation===1||page_is_orderConfirmation==="1"){send_to=sendtoStr('purchase');u=pop_uobj(['u1','u3','u4','u9','value','transaction_id']);if(b.customer_bpid_output){u.u19=b.customer_bpid_output;}}
if(b.page_id==="Customerservice : Newsletter : Mainpage"){send_to=sendtoStr('nlSignupPage');u=pop_uobj(['u2']);}
else if(b.page_id==="Customerservice : Thankyou : Mainpage"||b.page_id==="CUSTOMERSERVICE_THANKYOU_MAINPAGE"){send_to=sendtoStr('nlSignupConf');u=pop_uobj(['u2']);}}else{if(b.enh_action==='add'){send_to=sendtoStr('add');u=pop_uobj(['u1','u3','u4']);}
if(b.event_type==="CLUB_JOIN_SUCCESS"){send_to=sendtoStr('mSignup');u=pop_uobj([]);}}
if(b.page_is_productDetail===1||b.page_is_productDetail==="1"){send_to=sendtoStr('prodview');u=pop_uobj(['u1','u2','u3','u4']);u.u4="1";}
if(b.enh_action==='checkout'){send_to=sendtoStr('checkout');u=pop_uobj(['u1','u3','u4']);}
if(send_to!=='drop'){u.send_to=send_to;gtag('event','conversion',u);}}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:431");utag.DB(b);var c,d,e,f,h,i,j,k,_event,p,key;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"https://www.googletagmanager.com/gtag/js","advertiser_id":"DC-9054599","activity_group":"","activity":"","counting_method":"","fire_purchase":"false","custom_scripts":"true","data_layer_name":"",cross_track_domains:"","session_id":"","product_id":[],"product_quantity":[],"product_unit_price":[],"dc_custom_params":{},"event_name":"","event":[],"custom":{}};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:431:EXTENSIONS");utag.DB(b);for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}else{h=d.split(":");if(h.length===2&&b[h[0]]===h[1]){if(u.map[d]){u.data.event=u.data.event.concat(u.map[d].split(","));}}}}
utag.DB("send:431:MAPPINGS");utag.DB(u.data);u.scriptRequestedInit();u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(typeof(u.data.advertiser_id)==="string"&&u.data.advertiser_id!==""){u.data.advertiser_id=u.data.advertiser_id.split(",");}
if(typeof(u.data.activity_group)==="string"){u.data.activity_group=u.data.activity_group.split(",");}
if(typeof(u.data.activity)==="string"){u.data.activity=u.data.activity.split(",");}
if(typeof(u.data.counting_method)==="string"){u.data.counting_method=u.data.counting_method.split(",");}
if(typeof(u.data.session_id)==="string"){u.data.session_id=u.data.session_id.split(",");}
if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
if(!u.data.advertiser_id){utag.DB(u.id+": Tag not fired: Required attribute not populated");return;}
if(u.data.gtag_enable_tcf_support){window["gtag_enable_tcf_support"]=u.toBoolean(u.data.gtag_enable_tcf_support);}
for(i=0;i<u.data.advertiser_id.length;i++){if(!/^[a-zA-Z]{2}-/.test(u.data.advertiser_id[i])){u.data.advertiser_id[i]="DC-"+u.data.advertiser_id[i];}}
u.data.base_url+="?id="+(u.data.advertiser_id[0]);if(u.data.data_layer_name){u.data.base_url=u.data.base_url+"&l="+u.data.data_layer_name;}
if(u.data.order_id){for(i=0;i<u.data.event.length;i++){if(u.data.event[i]==="purchase"){p=true;}}
if(!p&&u.toBoolean(u.data.fire_purchase)){u.data.event.push("purchase");if(u.data.counting_method[0]===""){u.data.counting_method[0]="transactions";}}}
var total_qty=0;if(typeof(u.data.product_quantity)==="number"){total_qty=u.data.product_quantity;}else if(u.data.product_quantity.length===1){total_qty=u.data.product_quantity[0];}else if(u.data.product_quantity.length>1){for(i=0;i<u.data.product_quantity.length;i++){total_qty+=parseInt(u.data.product_quantity[i],10);}}else{total_qty=1;}
for(i=0;i<u.data.event.length;i++){_event=u.data.event[i];for(j=0;j<u.data.advertiser_id.length;j++){var eventIdData={};if(u.data.custom_scripts==="true"||u.data.custom_scripts){eventIdData.allow_custom_scripts=true;}else if(u.data.custom_scripts==="false"||!u.data.custom_scripts){eventIdData.allow_custom_scripts=false;}
if(u.data.session_id.length===1&&u.data.session_id[0]!==""){eventIdData.session_id=u.data.session_id[0];}else if(u.data.session_id[j]!==""){eventIdData.session_id=u.data.session_id[j];}
if(u.data.order_total){eventIdData.value=u.data.order_total;eventIdData.transaction_id=u.data.order_id;}
if(u.data.product_quantity){eventIdData.quantity=total_qty;}
eventIdData.items=[];for(k=0;k<u.data.product_id.length;k++){if(typeof(u.data.product_unit_price[k])==="undefined"||typeof(u.data.product_quantity[k])==="undefined"){utag.DB("No matching unit price or quantity for product ID "+u.data.product_id[k]);}else{eventIdData.items.push({"id":u.data.product_id[k],"price":u.data.product_unit_price[k],"quantity":u.data.product_quantity[k]});}}
for(key in u.data.custom){eventIdData[key]=u.data.custom[key];}
if(!u.isEmptyObject(u.data.dc_custom_params)){eventIdData.dc_custom_params={};for(key in u.data.dc_custom_params){eventIdData.dc_custom_params[key]=u.data.dc_custom_params[key];}}
if(u.data.counting_method[j]&&u.data.counting_method[j]!==u.data.counting_method[j].toLowerCase()){u.data.counting_method[j]=u.data.counting_method[j].toLowerCase();utag.DB("Counting Method not supplied in proper case - converted to lower case");}
eventIdData.send_to=u.data.advertiser_id[j]+
"/"+(u.data.activity_group[j]||u.data.activity_group[0])+
"/"+(u.data.activity[j]||u.data.activity[0])+
"+"+(u.data.counting_method[j]||u.data.counting_method[0]);if(_event==="purchase"){u.o("event","purchase",eventIdData);}
if(_event==="conversion"){u.o("event","conversion",eventIdData);}}}
if(!u.hasgtagjs()){u.scriptrequested=true;utag.ut.gtagScriptRequested=true;u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_431","attrs":{}});}
utag.DB("send:431:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("431","hm.goe"));}catch(error){utag.DB(error);}
