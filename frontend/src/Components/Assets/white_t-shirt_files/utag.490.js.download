//tealium universal tag - utag.490 ut4.0.202406180732, Copyright 2024 Tealium.com Inc. All Rights Reserved.
var _uxa=window._uxa||[];try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1,"link":1};u.scriptrequested=false;u.livesignals_requested=false;function forceBoolean(flag){if(typeof flag==="string"){if(flag.toLowerCase()==="false"){return false;}else if(flag.toLowerCase()==="true"){return true;}}
return Boolean(flag);}
u.map={"cs_project_id":"id_project","page_id":"custom.1.page id","category_id":"custom.2.category_id","category_path":"custom.3.category_path","selected_market":"custom.4.market","customer_fashion_news":"custom.7.fn_subscriber","product_view_type":"custom.8.pdp_type","cp.ab_idce":"custom.12.ab_idce","product_category":"custom.13.product_category","customer_type":"custom.15.customer_type"};u.extend=[function(a,b){try{if(1){var PII={PIISelectors:["div.order-info-summary h3, div.order-details.two.modules h3, div.order-confirmation li.item span.static, div.order-tracking h3, p.checkout-email-address, div.modal-text h3.label, #checkout-address-section p.text.ng-binding, #delivery-preferences-content input-picker-render span.value.ng-binding, #new-credit-card-content section.billing-address span, section.billing-address p.text span, #home-address-not-verified div.address-validation-address div, p.text[data-ng-bind-html], #address-validation-popup div.input-rows div.ng-binding, .content div.read-only[data-ng-show] [data-ng-show*='orderPhone']+p, #billing-address-dob, div.top-message > p:nth-child(1), div.modal-text p.ng-binding.ng-scope, #registration-form div span, dl.user-details dd, div.address-item-street, .order-id, .payment-method-details, #profile > fieldset:nth-child(1) > div:nth-child(2) > span, #profile > fieldset:nth-child(1) > div:nth-child(4) > span, #profile > fieldset:nth-child(1) > div:nth-child(5) > span, #profile > fieldset:nth-child(1) > div.inputwrapper.select-date.optional > span, #profile > fieldset:nth-child(1) > div:nth-child(7) > span, #profile > fieldset:nth-child(2) > div > span, #profile > div.form-part > div:nth-child(2) > p, span.order-id, div.order-info ul:nth-child(1) > li:nth-child(1) > span.static, div.order-info ul:nth-child(1) > li:nth-child(3), div.order-info ul:nth-child(2) > li:nth-child(2) > span.static, div.layout.layout-eight > div.form-section > div.form-part p, #homeAddressForm > fieldset span, #delivery0AddressForm > fieldset span, #delivery1AddressForm > fieldset span, #delivery2AddressForm > fieldset span, #delivery3AddressForm > fieldset span, #delivery4AddressForm > fieldset span, span.author-realname.blank_link, span.olapic-user-name, div.greeting h1.module-heading-title, dl.user-details dd > span, main.my-hm ul.info-details span.static, div.transactions-table ul li span > a, div[class*='personal-details'] form#profile span[class*='ng-binding'], [data-tracking-pii*='true'], div.form-part > div:nth-child(2) > p, div.form-part > div:nth-child(3) > p, div.form-part > div:nth-child(1n+6) > p, .Card-module--Card__2qYny:nth-child(1) > article > p:nth-child(even), #app > main > div > section:nth-child(3) > article > address, .Card-module--Card__2qYny:nth-child(2) > article > address, div.CardFront--cardHeader__21seq > h2 > span, div.FocusTrap-module--focusLockContainer__1CfNk > div > header > h3, div.CardBack--codeContainer__1iTKu > button, tbody > tr:nth-child(2) > td:nth-child(1) > button, div.OrderPackage--package__2zuSV > div:nth-child(5) > p, div.OrderPackage--package__2zuSV > div:nth-child(5) > span > span, div.CustomerDetails--container__2KImV > div:nth-child(1) > p, div.CustomerDetails--container__2KImV > div:nth-child(1) > span, div.CustomerDetails--container__2KImV > div:nth-child(2) > p, div.CustomerDetails--container__2KImV > div:nth-child(2) > span > span, tbody > tr:nth-child(2) > td:nth-child(1), p.BodyText-module--general__tc7rJ.Receipt--container__kE0wX, article > address > span, div.FocusTrap-module--focusLockContainer__1CfNk.FocusTrap-module--focusLockMiddleAlignment__hNMOl > div > div:nth-child(4) > div > div > label > span, div.FocusTrap-module--focusLockContainer__1CfNk.FocusTrap-module--focusLockMiddleAlignment__hNMOl > div > div:nth-child(1n+6) > div > label > span, div[class*='FocusTrap-module--focusLockContainer'] > div > header > h3, div[class*='FocusTrap-module--focusLockMiddleAlignment'] > div > div:nth-child(4) > div > div > label > span, div[class*='FocusTrap-module--focusLockMiddleAlignment'] > div > div:nth-child(1n+6) > div > label > span"],};window._uxa=window._uxa||[];window._uxa.push(['setPIISelectors',PII]);}}catch(e){utag.DB(e)}},function(a,b){try{if(1){try{b.cs_project_id="58e171a138772";if(b["ut.env"]!=="prod"){b.cs_project_id="017eb7948f953";}
if(b.selected_market==="IL"){b.cs_project_id="57f7b5247583e";if(b["ut.env"]!=="prod"){b.cs_project_id="51da656aa6da1";}}
window._uxa=window._uxa||[];if(a==="view"){if(b.product_view_type!==null&&b.product_view_type=="PDP"){window._uxa.push(["setCustomVariable",16,"product price",b.product_list_price[0]]);window._uxa.push(["setCustomVariable",14,"currency",b._ccurrency]);window._uxa.push(["setCustomVariable",18,"brand",b.product_brand[0]]);}else if(b.page_id=="CART"&&b.event_type!=="VIEW_CART"){window._uxa.push(["setCustomVariable",17,"basket total",b.order_subtotal]);window._uxa.push(["setCustomVariable",14,"currency",b._ccurrency]);}else if(b.page_is_checkout==1){if(tiq.tools.variable_is(b._cprice)){var d=0;for(var i=0;i<b._cprod.length;i++){d+=tiq.tools.variable_is(b._cquan[i])?Number(b._cprice[i])*Number(b._cquan[i]):Number(b._cprice[i]);}
value=d;f.value=Math.round(value*100)/100;}
window._uxa.push(["setCustomVariable",17,"basket total",f.value]);window._uxa.push(["setCustomVariable",14,"currency",b._ccurrency]);}}else{if(b.event_type==="CLUB_JOIN_INITIATE"){window._uxa.push(["trackPageview","/become_member_popup"]);}}
if(b.page_is_checkout){if(tiq.tools.variable_is(b.event_type)){if(b.event_type.indexOf("_ENTER")>0||b.event_type.indexOf("_EXIT")>0){window._uxa.push(["trackPageEvent",b.event_type]);}else if(b.event_type==="VIEW_CHECKOUT"||b.event_type==="CHECKOUT_PURCHASE_CLICK"){window._uxa.push(["trackPageEvent",b.event_type]);}}}}catch(e){}}}catch(e){utag.DB(e)}}];u.contentsquareSignalsCallback=function(){if(typeof window.CS_CONF!=="undefined"&&!u.livesignals_requested){u.livesignals_requested=true;CS_CONF.signalsDetection=CS_CONF.signalsDetection||{};CS_CONF.signalsDetection.sendVarsToCS=forceBoolean(u.data.sendVarsToCS);CS_CONF.signalsDetection.sendEventsToReplay=forceBoolean(u.data.sendEventsToReplay);CS_CONF.signalsDetection.initSignals=function(){if(forceBoolean(u.data.sendToTealium)){this.sendToTealium=true;}
if(forceBoolean(u.data.ad_blocker_detection)){if(forceBoolean(u.data.adBlockerModule)){this.adBlockerModule=forceBoolean(u.data.adBlockerModule);if(typeof u.data.adBlockerEventName!=="undefined"){this.adBlockerEventName=u.data.adBlockerEventName;}
if(typeof u.data.adBlockerFileURL!=="undefined"){this.adBlockerFileURL=u.data.adBlockerFileURL;}
if(typeof u.data.adBlockerTimer!=="undefined"){this.adBlockerTimer=parseInt(u.data.adBlockerTimer);}}
if(typeof this.adBlockerSignal==="function"){this.adBlockerSignal();}}
if(forceBoolean(u.data.fraud_detection)){if(forceBoolean(u.data.excessivePasteModule)||forceBoolean(u.data.excessiveReloadModule)){if(typeof u.data.fraudCondition!=="undefined"){this.fraudCondition=u.data.fraudCondition;}}
if(forceBoolean(u.data.excessivePasteModule)){this.excessivePasteModule=forceBoolean(u.data.excessivePasteModule);if(typeof u.data.excessivePasteLowThreshold!=="undefined"){this.excessivePasteLowThreshold=parseInt(u.data.excessivePasteLowThreshold);}
if(typeof u.data.excessivePasteMediumThreshold!=="undefined"){this.excessivePasteMediumThreshold=parseInt(u.data.excessivePasteMediumThreshold);}
if(typeof u.data.excessivePasteHighThreshold!=="undefined"){this.excessivePasteHighThreshold=parseInt(u.data.excessivePasteHighThreshold);}
if(typeof u.data.excessivePasteEventName!=="undefined"){this.excessivePasteEventName=u.data.excessivePasteEventName;}}
if(forceBoolean(u.data.excessiveReloadModule)){this.excessiveReloadModule=forceBoolean(u.data.excessiveReloadModule);if(typeof u.data.excessiveReloadLowThreshold!=="undefined"){this.excessiveReloadLowThreshold=parseInt(u.data.excessiveReloadLowThreshold);}
if(typeof u.data.excessiveReloadMediumThreshold!=="undefined"){this.excessiveReloadMediumThreshold=parseInt(u.data.excessiveReloadMediumThreshold);}
if(typeof u.data.excessiveReloadHighThreshold!=="undefined"){this.excessiveReloadHighThreshold=parseInt(u.data.excessiveReloadHighThreshold);}
if(typeof u.data.excessiveReloadEventName!=="undefined"){this.excessiveReloadEventName=u.data.excessiveReloadEventName;}}
if(typeof this.fraudSignals==="function"){this.fraudSignals();}}
if(forceBoolean(u.data.friction_detection)){if(forceBoolean(u.data.consecutiveClickModule)){this.consecutiveClickModule=forceBoolean(u.data.consecutiveClickModule);if(typeof u.data.consecutiveClickClickableThreshold!=="undefined"){this.consecutiveClickClickableThreshold=parseInt(u.data.consecutiveClickClickableThreshold);}
if(typeof u.data.consecutiveClickNonClickableThreshold!=="undefined"){this.consecutiveClickNonClickableThreshold=parseInt(u.data.consecutiveClickNonClickableThreshold);}
if(typeof u.data.consecutiveClickEventName!=="undefined"){this.consecutiveClickEventName=u.data.consecutiveClickEventName;}}
if(forceBoolean(u.data.constantHoverModule)){this.constantHoverModule=forceBoolean(u.data.constantHoverModule);if(typeof u.data.constantHoverThreshold!=="undefined"){this.constantHoverThreshold=parseInt(u.data.constantHoverThreshold);}
if(typeof u.data.constantHoverEventName!=="undefined"){this.constantHoverEventName=u.data.constantHoverEventName;}}
if(forceBoolean(u.data.jsErrorClickModule)){this.jsErrorClickModule=forceBoolean(u.data.jsErrorClickModule);if(typeof u.data.jsErrorClickThreshold!=="undefined"){this.jsErrorClickThreshold=parseInt(u.data.jsErrorClickThreshold);}
if(typeof u.data.jsErrorClickEventName!=="undefined"){this.jsErrorClickEventName=parseInt(u.data.jsErrorClickEventName);}}
if(forceBoolean(u.data.rageClickModule)){this.rageClickModule=forceBoolean(u.data.rageClickModule);if(typeof u.data.rageClickClickableThreshold!=="undefined"){this.rageClickClickableThreshold=parseInt(u.data.rageClickClickableThreshold);}
if(typeof u.data.rageClickNonClickableThreshold!=="undefined"){this.rageClickNonClickableThreshold=parseInt(u.data.rageClickNonClickableThreshold);}
if(typeof u.data.rageClickEventName!=="undefined"){this.rageClickEventName=u.data.rageClickEventName;}}
if(forceBoolean(u.data.repeatedScrollModule)){this.repeatedScrollModule=forceBoolean(u.data.repeatedScrollModule);if(typeof u.data.repeatedScrollMinPercentThreshold!=="undefined"){this.repeatedScrollMinPercentThreshold=parseInt(u.data.repeatedScrollMinPercentThreshold);}
if(typeof u.data.repeatedScrollMaxPercentThreshold!=="undefined"){this.repeatedScrollMaxPercentThreshold=parseInt(u.data.repeatedScrollMaxPercentThreshold);}
if(typeof u.data.repeatedScrollAmountThreshold!=="undefined"){this.repeatedScrollAmountThreshold=parseInt(u.data.repeatedScrollAmountThreshold);}
if(typeof u.data.repeatedScrollEventName!=="undefined"){this.repeatedScrollEventName=u.data.repeatedScrollEventName;}}
if(typeof this.frictionSignals==="function"){this.frictionSignals();}}};utag.ut.loader({"type":"script","src":u.data.livesignals_url,"cb":null,"loc":"script","id":"utag_490_contentsquare_detection_services","attrs":{}});}};u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:490");utag.DB(b);var c,d,e,f,udh_collection=[];u.data={"base_url":"//t.contentsquare.net/uxa/##utag_id_project##.js","id_project":"","custom":{},"path":"","product_id":[],"product_name":[],"product_sku":[],"product_category":[],"product_quantity":[],"product_unit_price":[],"order_id":"","order_total":"","order_shipping":"","order_tax":"","order_currency":"","send_udh_audiences":"false","send_udh_data":{},"friction_detection":"false","fraud_detection":"false","ad_blocker_detection":"false","livesignals_url":"https://ct.contentsquare.net/www/tc/ls_CS.js","sendVarsToCS":"true","sendEventsToReplay":""};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:490:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf("custom.")===0){u.data.custom[[e[f].substr(7)]]=b[d];}else if(e[f].indexOf("send_udh_data.")===0||e[f].indexOf("send_data.")===0){u.data.send_udh_data[d]=e[f].split(".")[1];}else if(e[f]==="send_audiences"){u.data.send_udh_audiences=b[d];}else{u.data[e[f]]=b[d];}}}}
utag.DB("send:490:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";u.data.order_shipping=u.data.order_shipping||b._cship||"";u.data.order_tax=u.data.order_tax||b._ctax||"";u.data.order_currency=u.data.order_currency||b._ccurrency||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_sku.length===0&&b._csku!==undefined){u.data.product_sku=b._csku.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
u.data.base_url=u.data.base_url.replace("##utag_id_project##",u.data.id_project);u.data.path=u.data.path||location.pathname+location.hash.replace("#","?__");var custom,customVar;for(custom in u.data.custom){if(u.data.custom.hasOwnProperty(custom)&&custom!==""){customVar=custom.split(".");_uxa.push(["setCustomVariable",customVar[0],customVar[1],u.data.custom[custom],3]);}}
if(forceBoolean(u.data.send_udh_audiences)){Object.keys(b).forEach(function(key){if(key.indexOf("va.audiences.")===0){_uxa.push(["trackDynamicVariable",{"key":"CDP_TL_Audience ID : "+key.substr(key.lastIndexOf("_")+1),"value":b[key]}]);}});}
Object.keys(u.data.send_udh_data).forEach(function(key){_uxa.push(["trackDynamicVariable",{"key":"CDP_TL_Badge ID : "+key.substr(key.lastIndexOf(".")+1),"value":u.data.send_udh_data[key]}]);});if(a==="view"){_uxa.push(["trackPageview",u.data.path]);}else{_uxa.push(["setPath",u.data.path]);}
if(u.data.order_id&&u.data.order_total){_uxa.push(["ecommerce:addTransaction",{"id":u.data.order_id,"revenue":u.data.order_total,"shipping":u.data.order_shipping,"tax":u.data.order_tax,"currency":u.data.order_currency}]);for(f=0;f<u.data.product_id.length;f++){if(u.data.product_name[f]&&u.data.product_sku[f]&&!isNaN(parseFloat(u.data.product_unit_price[f]))&&!isNaN(parseFloat(u.data.product_quantity[f]))){_uxa.push(["ecommerce:addItem",{"id":u.data.order_id,"name":u.data.product_name[f],"sku":u.data.product_sku[f],"category":u.data.product_category[f],"price":u.data.product_unit_price[f],"quantity":u.data.product_quantity[f]}]);}else{utag.DB(u.id+" (ContentSquare): Item not tracked in transaction: Required attribute(s) not populated");}}
_uxa.push(["ecommerce:send"]);}else{utag.DB(u.id+" (ContentSquare): Transaction not tracked: Required attribute(s) not populated");}
if(!u.livesignals_requested&&(forceBoolean(u.data.fraud_detection)||forceBoolean(u.data.friction_detection)||forceBoolean(u.data.ad_blocker_detection))){_uxa.push(["afterPageView",u.contentsquareSignalsCallback]);}
if(!u.scriptrequested){u.scriptrequested=true;u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_490","attrs":{}});}
utag.DB("send:490:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("490","hm.goe"));}catch(error){utag.DB(error);}
